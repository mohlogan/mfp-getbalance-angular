{"version":3,"sources":["node_modules/ibm-mfp-web-sdk/ibmmfpf.js","node_modules/sjcl/sjcl.js","node_modules/jssha/src/sha.js"],"names":[],"mappings":"AAAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC;;AAEvC;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,E;AACJ;AACA;;AAEA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,I;AACA;AACA;AACA;;AAEA,CAAC;;;;;AAKD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;AAE1B,mBAAmB,iBAAiB;AACpC;AACA;;AAEA;AACA,gCAAgC,2DAA2D,sBAAsB,0BAA0B,GAAG;AAC9I,0BAA0B,sBAAsB,EAAE;AAClD,OAAO;AACP;AACA;;AAEA,gCAAgC,2DAA2D,sBAAsB,0BAA0B,GAAG;AAC9I,0BAA0B,sBAAsB,EAAE;AAClD;AACA,MAAM;AACN;;AAEA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC,UAAU;AACX;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,MAAM,YAAY,4BAA4B,oDAAoD,wCAAwC,gDAAgD,+BAA+B,4CAA4C,0CAA0C,kBAAkB,4BAA4B,kBAAkB,gBAAgB,oCAAoC,KAAK,mBAAmB,4BAA4B,IAAI,aAAa,SAAS,UAAU,kBAAkB,4BAA4B,eAAe,8BAA8B,eAAe,2BAA2B,WAAW,gFAAgF,kBAAkB,eAAe,6FAA6F,eAAe,aAAa,iBAAiB,+CAA+C,iBAAiB,gBAAgB,iBAAiB,gBAAgB,cAAc,oCAAoC,YAAY,WAAW,gBAAgB,wCAAwC,iDAAiD,qBAAqB,oCAAoC,+FAA+F,yBAAyB,oBAAoB,0HAA0H,UAAU,2DAA2D,UAAU,oBAAoB,QAAQ,SAAS,oBAAoB,qGAAqG,UAAU,kBAAkB,gBAAgB,oCAAoC,oDAAoD,UAAU,yEAAyE,qBAAqB,kEAAkE,UAAU,kBAAkB,qBAAqB,QAAQ,UAAU,0DAA0D,oCAAoC,uBAAuB,IAAI,MAAM,mBAAmB,MAAM,6BAA6B,0BAA0B,kFAAkF,kDAAkD,SAAS,sBAAsB,0BAA0B,oCAAoC,uBAAuB,IAAI,KAAK,mBAAmB,MAAM,mCAAmC,6BAA6B,SAAS,sBAAsB,QAAQ,UAAU,iEAAiE,oCAAoC,uBAAuB,IAAI,MAAM,mBAAmB,MAAM,cAAc,gEAAgE,SAAS,oBAAoB,QAAQ,UAAU,wCAAwC,iCAAiC,uBAAuB,IAAI,MAAM,mBAAmB,MAAM,gEAAgE,SAAS,mBAAmB,QAAQ,UAAU,iDAAiD,qCAAqC,sCAAsC,iDAAiD,iDAAiD,WAAW,SAAS,gCAAgC,SAAS,4BAA4B,YAAY,WAAW,KAAK,WAAW,kBAAkB,iBAAiB,kBAAkB,YAAY,uBAAuB,0BAA0B,eAAe,wCAAwC,KAAK,iGAAiG,gCAAgC,eAAe,kCAAkC,iBAAiB,gCAAgC,eAAe,gCAAgC,SAAS,mBAAmB,eAAe,kBAAkB,iCAAiC,MAAM,IAAI,sBAAsB,aAAa,sBAAsB,WAAW,SAAS,gCAAgC,oBAAoB,0BAA0B,YAAY,2CAA2C,YAAY,2CAA2C,YAAY,8CAA8C,EAAE,YAAY,WAAW,KAAK,IAAI,SAAS,8BAA8B,SAAS,YAAY,0BAA0B,wEAAwE,uBAAuB,6BAA6B,6CAA6C,2BAA2B,qCAAqC,YAAY,WAAW,KAAK,SAAS,WAAW,4EAA4E,MAAM,mBAAmB,MAAM,4BAA4B,+BAA+B,yCAAyC,iBAAiB,UAAU,QAAQ,SAAS,wCAAwC,MAAM,IAAI,6CAA6C,SAAS,+DAA+D,SAAS,gCAAgC,0CAA0C,iEAAiE,8EAA8E,gCAAgC,YAAY,IAAI,KAAK,WAAW,kBAAkB,SAAS,gBAAgB,MAAM,MAAM,YAAY,YAAY,YAAY,YAAY,YAAY,YAAY,YAAY,YAAY,cAAc;;;AAG5oL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,YAAY;AAC3D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,YAAY;AAC3D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,2CAA2C,YAAY;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,0BAA0B;AAChD;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,iCAAiC;AACjC,GAAG;;AAEH;AACA,uFAAuF;AACvF;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA,mCAAmC,sBAAsB,sBAAsB;AAC/E,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,sDAAsD,EAAE;AACxD;AACA;AACA,qBAAqB;AACrB,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,wEAAwE,aAAa;AACrF;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,uBAAuB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,uBAAuB,mDAAmD,IAAI;AAC9E;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,yCAAyC,mDAAmD,IAAI;AAChG;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,uBAAuB,mDAAmD,IAAI,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,mF;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,MAAM,QAAQ,IAAI;AAC9D;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;;;AAGA;AACA;AACA;;;AAGA;;;AAGA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oCAAoC;AACnE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA2B,oCAAoC;AAC/D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4FAA4F;;AAE5F;AACA;AACA;AACA;AACA,0FAA0F,EAAE;AAC5F;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uDAAuD,YAAY;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,MAAM;AACpD,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA,uBAAuB,sBAAsB;AAC7C,oCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mC;AACA;AACA,6C;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,oC;AACA,GAAG;AACH;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,cAAc;AAC1G,iCAAiC;AACjC;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,sCAAsC;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,SAAS;;AAE5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA,iBAAiB;AACjB;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA,6EAA6E;AAC7E;;AAEA;AACA;AACA;AACA,kEAAkE;AAClE,oEAAoE,oBAAoB;;;;;AAKxF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,6CAA6C;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,6CAA6C;AACpE;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,6CAA6C;AACpE;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC,EAAE;AACnC;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA,6CAA6C;AAC7C,yCAAyC;AACzC,6BAA6B;AAC7B;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;;AAE7B,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,8EAA8E;AAC9E,uBAAuB,sCAAsC;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAAgD,QAAQ;AACxD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,uBAAuB,4BAA4B;AACnD;AACA;AACA;;AAEA;AACA,8DAA8D;AAC9D;AACA,uBAAuB,sCAAsC;AAC7D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,uBAAuB,4BAA4B;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yGAAyG;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,IAAI;AAC7B,2BAA2B;AAC3B;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,6CAA6C;AAC7C,6CAA6C;AAC7C;AACA,6CAA6C;AAC7C,6CAA6C;AAC7C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wBAAwB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;;AAGA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,S;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,qCAAqC,wBAAwB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,qCAAqC,wBAAwB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,YAAY;AACZ,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB;AACvB,+BAA+B;AAC/B,8BAA8B;AAC9B;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2CAA2C,oCAAoC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,KAAK;AACL,mFAAmF;AACnF,iFAAiF;AACjF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,KAAK;AACpB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,KAAK;AACpB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,6DAA6D;AAC7D;AACA,4BAA4B,gBAAgB;AAC5C,yBAAyB,aAAa;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe,KAAK;AACpB;AACA,6DAA6D;AAC7D;AACA,4BAA4B,gBAAgB;AAC5C,yBAAyB,aAAa;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB;AAClB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAwB;;AAExB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;AAC7C,mCAAmC;AACnC,qCAAqC;AACrC,gCAAgC;AAChC,wCAAwC;AACxC,6BAA6B;AAC7B,4BAA4B;AAC5B,iCAAiC;AACjC,kCAAkC;AAClC,oCAAoC;AACpC,kDAAkD;AAClD,uDAAuD;AACvD,oBAAoB;;AAEpB,gDAAgD;AAChD,+CAA+C;AAC/C,kCAAkC;AAClC,mCAAmC;AACnC,4CAA4C;AAC5C,gCAAgC;AAChC,oCAAoC;AACpC,oBAAoB;;AAEpB,yCAAyC;AACzC,uCAAuC;AACvC,oBAAoB;;AAEpB,uCAAuC;AACvC,+BAA+B;AAC/B,2CAA2C;AAC3C,oBAAoB;;AAEpB,0CAA0C;AAC1C,2CAA2C;AAC3C;AACA,oBAAoB;;AAEpB,8BAA8B;AAC9B,kCAAkC;AAClC,qCAAqC;AACrC,oBAAoB;;AAEpB,kEAAkE;AAClE,iCAAiC;AACjC,oBAAoB;;AAEpB,8CAA8C;AAC9C,mCAAmC;AACnC,iCAAiC;AACjC,qCAAqC;AACrC,oBAAoB;;AAEpB,oDAAoD;AACpD,+CAA+C;AAC/C,kCAAkC;AAClC,qCAAqC;AACrC,oBAAoB;;AAEpB,oCAAoC;AACpC,+CAA+C;AAC/C,kCAAkC;AAClC,qCAAqC;AACrC,oBAAoB;;AAEpB;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oB;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS,wBAAwB;AACjC;;AAEA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,8FAA8F,8BAA8B;AAC5H;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAwD;AACxD,mBAAmB;AACnB;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,gCAAgC,mBAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,iDAAiD;AACjD;AACA;;AAEA,mBAAmB,yCAAyC;AAC5D,mBAAmB;;AAEnB;AACA;AACA,2BAA2B;;AAE3B;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,eAAe;AAC7D;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,yBAAyB;;AAEzB,0CAA0C;AAC1C;AACA,4BAA4B,SAAS;AACrC;AACA,gDAAgD;AAChD;AACA,4BAA4B,SAAS;AACrC;AACA,kCAAkC;AAClC;AACA;AACA,+DAA+D;AAC/D;AACA;AACA,4BAA4B,SAAS;AACrC;AACA,0CAA0C;AAC1C,4BAA4B,gBAAgB;AAC5C;AACA;AACA,qGAAqG;AACrG;AACA,wBAAwB,iBAAiB,SAAS;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C,iEAAiE;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA,4DAA4D;AAC5D;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wDAAwD;AACxD,wDAAwD;AACxD,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qEAAqE;AACrE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wDAAwD;AACxD,wDAAwD;AACxD,qBAAqB;AACrB;;AAEA;AACA;AACA,6EAA6E;AAC7E;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD;AAChD,gDAAgD;AAChD,aAAa;;AAEb;AACA;;AAEA;AACA,8BAA8B,wBAAwB,oCAAoC,EAAE;AAC5F,8BAA8B;AAC9B,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,eAAe;AAC1E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,qCAAqC;AACtD;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,K;AACzB;AACA;AACA,cAAc;AACd;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA,wEAAwE;AACxE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B,qBAAqB;AACrB;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC,qBAAqB;AACrB,iBAAiB;AACjB;AACA,iBAAiB;AACjB,SAAS,OAAO;AAChB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,iC;AACA,kBAAkB;AAClB,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC,G;CClwRD,aAAa,UAAU,SAAS,QAAQ,eAAe,QAAQ,QAAQ,SAAS,YAAY,oBAAoB,yBAAyB,gCAAgC,eAAe,qBAAqB,yBAAyB,gCAAgC,eAAe,iBAAiB,yBAAyB,4BAA4B,eAAe,sBAAsB,yBAAyB,kCAAkC;AAC3b,4BAA4B,0BAA0B,uCAAuC,WAAW,QAAQ,gFAAgF,2BAA2B,QAAQ,SAAS,KAAK,SAAS,qIAAqI,cAAc,QAAQ,EAAE;AACvZ;AACA,2BAA2B,oBAAoB,mBAAmB,qBAAqB,mBAAmB,oDAAoD,kEAAkE,QAAQ,QAAQ,kCAAkC,UAAU,MAAM,sKAAsK,IAAI,gDAAgD;AAC5f,EAAE,IAAI;AACN,kBAAkB,2EAA2E,qDAAqD,gBAAgB,2CAA2C,SAAS,OAAO,gCAAgC,QAAQ,IAAI,uOAAuO;AAChf,EAAE,IAAI,kGAAkG;AACxG,eAAe,yBAAyB,oDAAoD,+CAA+C,yBAAyB,0BAA0B,6EAA6E,sBAAsB,iDAAiD,kDAAkD,yEAAyE,uBAAuB,eAAe;AACnf,8CAA8C,qBAAqB,0BAA0B,6BAA6B,eAAe,OAAO,mEAAmE,SAAS,yBAAyB,gDAAgD,wBAAwB,uCAAuC,qBAAqB,oEAAoE,UAAU,QAAQ,WAAW,iBAAiB;AAC3e,EAAE,qBAAqB,MAAM,IAAI,uBAAuB,MAAM,oBAAoB,4BAA4B,QAAQ,WAAW,oCAAoC,2BAA2B,8BAA8B,yDAAyD,SAAS,iBAAiB,gDAAgD,uBAAuB,QAAQ,QAAQ,WAAW,wDAAwD;AAC3c,uBAAuB,qBAAqB,0CAA0C,QAAQ,MAAM,+DAA+D,qCAAqC,oBAAoB,kCAAkC,eAAe,QAAQ,WAAW,sDAAsD,8CAA8C;AACpY,gBAAgB,qBAAqB,WAAW,QAAQ,WAAW,wDAAwD,gDAAgD,oBAAoB,aAAa,yBAAyB,WAAW,eAAe,QAAQ,WAAW,0CAA0C;AAC5T,mBAAmB,+HAA+H,2HAA2H,2BAA2B,QAAQ,aAAa,uEAAuE,KAAK,eAAe,QAAQ,SAAS,sBAAsB,sCAAsC;AACre,yGAAyG,yCAAyC,QAAQ,WAAW,KAAK,yBAAyB,QAAQ,UAAU,sCAAsC,UAAU,uDAAuD,qDAAqD,8CAA8C;AAC/Z,sBAAsB,uBAAuB,yCAAyC,oBAAoB;AAC1G,mBAAmB,8FAA8F,oEAAoE,2BAA2B,QAAQ,aAAa,yEAAyE,KAAK,eAAe,QAAQ,SAAS,sBAAsB,wBAAwB,2CAA2C,2BAA2B,QAAQ,WAAW,KAAK;AAC/d,8DAA8D,yDAAyD,8CAA8C,WAAW,sBAAsB,qBAAqB,yCAAyC,oBAAoB,uCAAuC,6BAA6B,oBAAoB,qEAAqE,kCAAkC;AACvd,4BAA4B,+BAA+B,uBAAuB,UAAU,SAAS,YAAY,oBAAoB,yDAAyD,8CAA8C,SAAS,sCAAsC,8FAA8F,qCAAqC,6BAA6B,0BAA0B,KAAK;AAC1d,gBAAgB,iBAAiB,+BAA+B,KAAK,8BAA8B,YAAY,qBAAqB,+EAA+E,iBAAiB,KAAK,cAAc,uCAAuC,qBAAqB,SAAS,wBAAwB,aAAa,SAAS,wBAAwB,cAAc,uCAAuC,oBAAoB,KAAK,KAAK,KAAK,QAAQ,OAAO,gBAAgB;AACzf,GAAG,MAAM;AACT,gBAAgB,8EAA8E,QAAQ,KAAK,uSAAuS,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc;AACpf;AACA,eAAe,2CAA2C,wBAAwB,8BAA8B,6BAA6B,kCAAkC,gBAAgB,gCAAgC,QAAQ,WAAW,aAAa,6BAA6B,yEAAyE,QAAQ,QAAQ,4EAA4E,QAAQ,aAAa,KAAK,iBAAiB;AAC5e,UAAU,+BAA+B,+BAA+B,8BAA8B,6BAA6B,QAAQ,QAAQ,uGAAuG,4EAA4E,QAAQ,aAAa,KAAK,iBAAiB,sBAAsB,+BAA+B,oCAAoC;AAC1c,cAAc,0BAA0B,+BAA+B,4CAA4C,gBAAgB,QAAQ,eAAe,2IAA2I,WAAW,sDAAsD,SAAS,yBAAyB,0BAA0B,KAAK;AACva,mHAAmH,+CAA+C,QAAQ,WAAW,sDAAsD,sBAAsB,yBAAyB,sBAAsB,MAAM,2CAA2C,4DAA4D,oCAAoC,aAAa,eAAe,QAAQ,IAAI;AACze,iFAAiF,OAAO;AACxF,gBAAgB,0CAA0C,gGAAgG,2DAA2D,kBAAkB,WAAW,QAAQ,QAAQ,QAAQ,aAAa,yEAAyE,aAAa,iBAAiB,4BAA4B,oCAAoC,8BAA8B;AAC5d,gDAAgD,0CAA0C,+BAA+B,gGAAgG,QAAQ,mHAAmH,QAAQ,QAAQ,SAAS,yEAAyE,SAAS,4BAA4B;AAC3d,OAAO,SAAS,4BAA4B,gDAAgD,qGAAqG,8BAA8B,oBAAoB,iGAAiG,QAAQ,aAAa,kDAAkD,aAAa,oEAAoE;AAC5e,oCAAoC,eAAe;AACnD,eAAe,uCAAuC,iBAAiB,gBAAgB,QAAQ,qCAAqC,8BAA8B,6BAA6B,kDAAkD,SAAS,QAAQ,4DAA4D,gCAAgC,gFAAgF,cAAc,kBAAkB,gCAAgC;AAC9e,KAAK,aAAa,QAAQ,MAAM,KAAK,qDAAqD,eAAe,QAAQ,IAAI,iCAAiC,UAAU,uBAAuB,SAAS,mBAAmB,iBAAiB,aAAa,QAAQ,IAAI,2HAA2H,SAAS,yBAAyB,oCAAoC,WAAW,iBAAiB,iBAAiB;AAC3e,uBAAuB,+IAA+I,iCAAiC,aAAa,aAAa,8BAA8B,QAAQ,IAAI,6EAA6E,eAAe,8BAA8B,kFAAkF,yBAAyB;AAChf,WAAW,WAAW,WAAW,WAAW,OAAO,gCAAgC,6BAA6B,6BAA6B,2CAA2C,qBAAqB,0BAA0B,QAAQ,IAAI,mDAAmD,uBAAuB,uBAAuB;AACpV,0EAA0E,uFAAuF,eAAe,uBAAuB,0CAA0C,6BAA6B,YAAY,4CAA4C,WAAW,kBAAkB,2CAA2C,uEAAuE,aAAa;AACle,qCAAqC,SAAS,yEAAyE,yDAAyD,yDAAyD,oBAAoB,WAAW,iCAAiC,QAAQ,mBAAmB,KAAK,+BAA+B,QAAQ,IAAI,2BAA2B,WAAW,eAAe,cAAc,oBAAoB;AAC3c,sBAAsB,8BAA8B,WAAW,SAAS,UAAU,SAAS,UAAU,+BAA+B,yBAAyB,iBAAiB,cAAc,SAAS,UAAU,QAAQ,WAAW,YAAY,iBAAiB,SAAS,SAAS,gBAAgB,mDAAmD,YAAY;AAChW,qBAAqB,0BAA0B,WAAW,kBAAkB,MAAM,0EAA0E,aAAa,cAAc,KAAK,UAAU,yCAAyC,QAAQ,KAAK,wCAAwC,QAAQ,+FAA+F,KAAK,6EAA6E,UAAU;AACve,GAAG,SAAS,+CAA+C,mCAAmC,QAAQ,0CAA0C,MAAM,QAAQ,IAAI,sEAAsE,QAAQ,oBAAoB,kCAAkC,sDAAsD,2GAA2G,2BAA2B,SAAS;AAC3e,KAAK,YAAY,gEAAgE,YAAY,oCAAoC,4BAA4B,sCAAsC,iBAAiB,gCAAgC,2CAA2C,MAAM,kDAAkD,+BAA+B,KAAK,QAAQ,WAAW,iBAAiB,IAAI,yCAAyC,eAAe;AAC3d,MAAM,OAAO,wBAAwB,WAAW,eAAe,IAAI,aAAa,wDAAwD,MAAM,uCAAuC,8CAA8C,oBAAoB,MAAM,YAAY,yGAAyG,aAAa,UAAU,4GAA4G;AACrf,oBAAoB,8BAA8B,4HAA4H,yBAAyB,qBAAqB,uCAAuC,4BAA4B,YAAY,QAAQ,0KAA0K;AAC7d,kSAAkS,yMAAyM;AAC3e,WAAW,2BAA2B;AACtC,6FAA6F,gCAAgC,uBAAuB,mCAAmC,yBAAyB,oDAAoD,QAAQ,WAAW,uBAAuB,eAAe,UAAU,gBAAgB,QAAQ,IAAI,8DAA8D,SAAS,MAAM,6CAA6C,UAAU,gBAAgB;AACvf,kCAAkC,mEAAmE,UAAU,eAAe,UAAU,gBAAgB,uGAAuG,uBAAuB,yBAAyB,0DAA0D,wCAAwC;AACjZ,gBAAgB,8BAA8B,6CAA6C,QAAQ,WAAW,YAAY,gBAAgB,gMAAgM,cAAc,sBAAsB,6BAA6B,cAAc,YAAY,iCAAiC,KAAK;AAC3c,gBAAgB,kBAAkB,sBAAsB;AACxD,MAAM,YAAY,kDAAkD,MAAM,IAAI,oBAAoB,SAAS,OAAO,MAAM,8IAA8I,uEAAuE,sBAAsB,iFAAiF;AACpb,aAAa,4DAA4D,SAAS;AAClF,WAAW,UAAU,2DAA2D,sBAAsB,QAAQ,QAAQ,uBAAuB,gCAAgC,eAAe,SAAS,UAAU,oEAAoE,8DAA8D;AACjV,mFAAmF,kMAAkM,yDAAyD,iEAAiE,+BAA+B,SAAS,QAAQ;AAC/b,kHAAkH,SAAS,2BAA2B,0CAA0C,mBAAmB,sBAAsB,QAAQ,QAAQ,gBAAgB,gBAAgB,sBAAsB,QAAQ,UAAU,oEAAoE,8DAA8D;AACnc,wMAAwM,+MAA+M,yDAAyD,+BAA+B;AAC/e,iLAAiL,SAAS,QAAQ,qDAAqD,2BAA2B,gBAAgB,+BAA+B,oBAAoB,UAAU,OAAO,mCAAmC,mGAAmG;AAC5e,OAAO,MAAM,oBAAoB,qCAAqC,MAAM,sCAAsC,MAAM,4DAA4D,MAAM,wEAAwE,WAAW,EAAE,oBAAoB,sBAAsB,gBAAgB,IAAI,sEAAsE,gBAAgB,GAAG,mBAAmB,QAAQ,KAAK,QAAQ,WAAW,KAAK;AAC9d,6KAA6K,SAAS,mBAAmB,iBAAiB,EAAE,uBAAuB,uCAAuC,mGAAmG,UAAU,SAAS,kBAAkB,QAAQ,GAAG,yDAAyD,SAAS;AAC/e,GAAG,QAAQ,GAAG,QAAQ,WAAW,wCAAwC,WAAW,+BAA+B,+BAA+B,gBAAgB,qCAAqC,qBAAqB,QAAQ,cAAc,gBAAgB,cAAc,8EAA8E,qCAAqC,wCAAwC,OAAO;;CC1Dlb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa,aAAa,kBAAkB,4DAA4D,QAAQ,qBAAqB,iBAAiB,SAAS,wEAAwE,iDAAiD,kBAAkB,uDAAuD,gBAAgB,qBAAqB,QAAQ,wDAAwD;AACtc,eAAe,6DAA6D,KAAK,YAAY,WAAW,uBAAuB,MAAM,kBAAkB,sBAAsB,WAAW,QAAQ,IAAI,6BAA6B,wDAAwD,0BAA0B,8GAA8G;AACja,kDAAkD,6DAA6D,SAAS,eAAe,iBAAiB,2BAA2B,kCAAkC,mCAAmC,mCAAmC,wDAAwD,oEAAoE,QAAQ,IAAI,cAAc,WAAW,QAAQ,IAAI,uBAAuB,UAAU;AACze,eAAe,oCAAoC,mCAAmC,mCAAmC,6CAA6C,6CAA6C,wDAAwD,sBAAsB,IAAI,mCAAmC,QAAQ,UAAU,gCAAgC,aAAa,SAAS,WAAW,WAAW,QAAQ,qBAAqB,YAAY,aAAa,cAAc,EAAE;AAC5e,KAAK,gEAAgE,wBAAwB,gEAAgE,KAAK,sBAAsB,UAAU,wDAAwD,OAAO,gCAAgC,MAAM,8CAA8C,kEAAkE,yDAAyD,QAAQ,mBAAmB;AAC3e,WAAW,UAAU,QAAQ,QAAQ,UAAU,sBAAsB,YAAY,WAAW,iBAAiB,eAAe,KAAK,YAAY,WAAW,iBAAiB,QAAQ,KAAK,8CAA8C,SAAS,IAAI,MAAM,wBAAwB,sBAAsB,WAAW,WAAW,UAAU,QAAQ,QAAQ,IAAI,0CAA0C,KAAK,iBAAiB,MAAM,MAAM,2BAA2B,YAAY;AAC5c,OAAO,WAAW,wEAAwE,aAAa,UAAU,yBAAyB,iBAAiB,MAAM,yBAAyB,iBAAiB,MAAM,2BAA2B,eAAe,MAAM,uBAAuB,qBAAqB,UAAU,8DAA8D,cAAc,eAAe,MAAM,uEAAuE;AAC/d,GAAG,QAAQ,IAAI,8EAA8E,aAAa,2BAA2B,YAAY,4EAA4E,OAAO,UAAU,yBAAyB,iBAAiB,MAAM,yBAAyB,iBAAiB,MAAM,2BAA2B,eAAe,MAAM,uBAAuB,qBAAqB,SAAS,8DAA8D,cAAc;AAC/f,IAAI,MAAM,6EAA6E,0BAA0B,YAAY,eAAe,aAAa,gBAAgB,SAAS,SAAS,kBAAkB,yBAAyB,SAAS,OAAO,QAAQ,wEAAwE,QAAQ,IAAI,MAAM,6BAA6B,0EAA0E,YAAY,YAAY,YAAY,WAAW;AAC9e,UAAU,OAAO,sBAAsB,mBAAmB,0BAA0B,OAAO,QAAQ,QAAQ,WAAW,+EAA+E,OAAO,6BAA6B,mBAAmB,kCAAkC,OAAO,QAAQ,0FAA0F,iBAAiB,sBAAsB;AAC9a,QAAQ,WAAW,MAAM,gBAAgB,UAAU,WAAW,qGAAqG,QAAQ,aAAa,MAAM,MAAM,YAAY,YAAY,WAAW,kCAAkC,MAAM,OAAO,sBAAsB,mBAAmB,wBAAwB,OAAO,QAAQ,QAAQ,eAAe,gEAAgE,OAAO,iCAAiC,kBAAkB;AACvf,GAAG,KAAK,QAAQ,QAAQ,IAAI,mGAAmG,uCAAuC,kBAAkB,qBAAqB,QAAQ,IAAI,yIAAyI,IAAI,yHAAyH,SAAS;AACxe,GAAG,mBAAmB,QAAQ,IAAI,0DAA0D,SAAS,gBAAgB,iCAAiC,QAAQ,IAAI,mCAAmC,SAAS,cAAc,OAAO,uCAAuC,QAAQ,gCAAgC,qDAAqD,sCAAsC,oEAAoE,sBAAsB;AACve,0EAA0E,8EAA8E,SAAS,gBAAgB,MAAM,UAAU,gDAAgD,mEAAmE,UAAU,eAAe,MAAM,8BAA8B,qCAAqC,OAAO,QAAQ,sBAAsB,WAAW;AACtc,qNAAqN,WAAW,MAAM,MAAM,YAAY,YAAY,WAAW,sBAAsB,KAAK,6CAA6C,WAAW,MAAM,kBAAkB,sCAAsC,MAAM,YAAY,YAAY,WAAW,mBAAmB,KAAK,OAAO;AACxe,MAAM,MAAM,gBAAgB,MAAM,kBAAkB,MAAM,uBAAuB,qBAAqB,SAAS,8DAA8D,KAAK,MAAM,6EAA6E,SAAS,gBAAgB,qBAAqB,gBAAgB,mHAAmH,gBAAgB,qBAAqB,gBAAgB;AAC3e,iBAAiB,uJAAuJ,gBAAgB,WAAW,+EAA+E,mBAAmB,gBAAgB,mBAAmB,gDAAgD,kBAAkB,mBAAmB,mBAAmB,8DAA8D,eAAe;AAC7f,mBAAmB,eAAe,wBAAwB,UAAU,sCAAsC,eAAe,8BAA8B,eAAe,wBAAwB,UAAU,sCAAsC,eAAe,4BAA4B,eAAe,sBAAsB,SAAS,sCAAsC,eAAe,8BAA8B,eAAe,wBAAwB,SAAS,sCAAsC;AAChf,GAAG,0BAA0B,qDAAqD,qBAAqB,8CAA8C,uEAAuE,sBAAsB,wDAAwD,gFAAgF,iBAAiB,UAAU,0BAA0B,iCAAiC,wBAAwB;AACxe,qBAAqB,iCAAiC,sCAAsC,qBAAqB,UAAU,kDAAkD,uDAAuD,wBAAwB,2DAA2D,uDAAuD,sCAAsC,uBAAuB,UAAU,8DAA8D;AACnf,gEAAgE,wBAAwB,uEAAuE,kEAAkE,sCAAsC,cAAc,cAAc,QAAQ,mBAAmB,yCAAyC,kBAAkB,cAAc,WAAW,yEAAyE;AAC3d,kMAAkM,qBAAqB,mBAAmB,MAAM,2MAA2M,MAAM;AACjc,qJAAqJ,MAAM,4CAA4C,2EAA2E,IAAI,mEAAmE,8CAA8C,SAAS,gBAAgB,uBAAuB,OAAO,OAAO,OAAO,OAAO,OAAO,QAAQ,KAAK;AACve,iOAAiO,eAAe,eAAe,eAAe,eAAe,eAAe,SAAS,oBAAoB,MAAM,uBAAuB,YAAY,WAAW,uBAAuB,KAAK,kBAAkB,sBAAsB,WAAW,QAAQ,IAAI;AACxd,SAAS,kBAAkB,uDAAuD,gGAAgG,mGAAmG,6DAA6D,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,QAAQ,IAAI;AACtZ,uHAAuH,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,eAAe,SAAS,gBAAgB,sBAAsB,oBAAoB,WAAW;AAC7T,YAAY,QAAQ,KAAK,MAAM,aAAa,QAAQ,IAAI,qDAAqD,QAAQ,IAAI,wCAAwC,QAAQ,IAAI,aAAa,IAAI,6BAA6B,QAAQ,IAAI,aAAa,IAAI,0CAA0C,QAAQ,IAAI,aAAa,IAAI,iGAAiG,wBAAwB,SAAS,YAAY;AAC7c;AACA,8IAA8I;AAC9I;AACA;AACA;AACA,mGAAmG;AACnG,mHAAmH,mFAAmF,yDAAyD,SAAS,qHAAqH","file":"scripts.js","sourcesContent":["/**\n * @license\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/**\n * This file is a wrapper for the web SDK which is in target/jslibexpanded/app/web/worklight.js\n * Its purpose is to make the web SDK as an AMD module.\n *\n * There is a placeholder in this file which will be replaced with the web sdk during the build of client-javascript.\n * The replacement is defined in expandjslib.xml inside buildEnv_web target\n * After the replacement the file will be renamed to worklight.js\n */\n\n(function (root, factory) {\n    var wlanalytics = dummyanalytics();//This function is being injected later on the \"skeleton.placeholder\" below\n\n    // scripts which are AMD defined by calling define function\n    // if 'define' is in our global name space then we expose our web SDK as an AMD module with one dependency: wlanalytics.\n    if (typeof define === 'function' && define.amd) {\n\n        if (!require.specified('ibmmfpfanalytics')) {\n\t\t\tdefine(\"ibmmfpfanalytics\",function() {\n      \t\t\treturn dummyanalytics();\n\t\t\t});            \n\t\t}\n        define(['ibmmfpfanalytics'], factory);\n\n    } else {\n        // not using 'define', so we expose our web sdk (WL) to the global name space.\n        // if wlanalytics is not in the global name space, we use dummy implementation for them\n\n        if (!root.ibmmfpfanalytics) {\n            root.ibmmfpfanalytics = wlanalytics;\n        }\n        root.WL = factory(root.ibmmfpfanalytics);\n    }\n    \n    \n    function dummyanalytics() {\n\n\t  \tlogger = {\n\t\t\tpkg: _apiAnalyticsMissing,\n\t\t\tstate: _apiAnalyticsMissing,\n\t\t\tcapture: _apiAnalyticsMissing,\n\t\t\tenable: _apiAnalyticsMissing,\n\t\t\tupdateConfigFromServer: _apiAnalyticsMissing,\n\t\t\ttrace      : _apiAnalyticsMissing,\n\t\t\tdebug      : _apiAnalyticsMissing,\n\t\t\tlog        : _apiAnalyticsMissing,\n\t\t\tinfo       : _apiAnalyticsMissing,\n\t\t\twarn       : _apiAnalyticsMissing,\n\t\t\terror      : _apiAnalyticsMissing,\n\t\t\tfatal      : _apiAnalyticsMissing\n\t\t\t      \n\t\t};\t\n\t   return {\n\t\t\tinit: _apiAnalyticsMissing,\n\t\t\tenable : _apiAnalyticsMissing,\n\t\t\tstate: _apiAnalyticsMissing,\n\t\t\tsend: _apiAnalyticsMissing,\n\t\t\tsetUserContext: _apiAnalyticsMissing,\n\t\t\taddEvent: _apiAnalyticsMissing,\n\t\t\tenableAutoSend: _apiAnalyticsMissing,\n\t\t\t_setClientId: _apiAnalyticsMissing,\n\t\t\tlogger: logger\n\t\t}\n\t\tfunction _apiAnalyticsMissing(message){\n\t\t\tvar textMssg = '';\n\t\t\tif (typeof message === 'string'){\n\t\t\t\ttextMssg = ' (message sent: ' + message + ')';\n\t\t\t}\t\t\n\t\t\tconsole.log(\"Sending analytics data to the MobileFirst Analytics server is ignored. Are you sure the MobileFirst Analytics JavaScript file is included in your project?.\" +  textMssg);\n\t\t};\n\t};\n\n}(this, function(wlanalytics) {\n\n    \n    \n\n/**\n * ================================================================= \n * Source file taken from :: wldeferredjs.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2016 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/**\n * @license\n * deferred-js https://github.com/warpdesign/deferred-js#licence\n * Copyright 2012  Nicolas Ramz\n * Released under the MIT license\n */\n\n(function(global) {\n\tfunction isArray(arr) {\n\t\treturn Object.prototype.toString.call(arr) === '[object Array]';\n\t}\n\n\tfunction foreach(arr, handler) {\n\t\tif (isArray(arr)) {\n\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\thandler(arr[i]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\thandler(arr);\n\t}\n\n\tfunction D(fn) {\n\t\tvar status = 'pending',\n\t\t\tdoneFuncs = [],\n\t\t\tfailFuncs = [],\n\t\t\tprogressFuncs = [],\n\t\t\tresultArgs = null,\n\n\t\t\tpromise = {\n\t\t\t\tdone: function() {\n\t\t\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\t// skip any undefined or null arguments\n\t\t\t\t\t\tif (!arguments[i]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isArray(arguments[i])) {\n\t\t\t\t\t\t\tvar arr = arguments[i];\n\t\t\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\t\t\tif (status === 'resolved') {\n\t\t\t\t\t\t\t\t\tarr[j].apply(this, resultArgs);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdoneFuncs.push(arr[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\t\tif (status === 'resolved') {\n\t\t\t\t\t\t\t\targuments[i].apply(this, resultArgs);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdoneFuncs.push(arguments[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\tfail: function() {\n\t\t\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\t// skip any undefined or null arguments\n\t\t\t\t\t\tif (!arguments[i]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isArray(arguments[i])) {\n\t\t\t\t\t\t\tvar arr = arguments[i];\n\t\t\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\t\t\tif (status === 'rejected') {\n\t\t\t\t\t\t\t\t\tarr[j].apply(this, resultArgs);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfailFuncs.push(arr[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\t\tif (status === 'rejected') {\n\t\t\t\t\t\t\t\targuments[i].apply(this, resultArgs);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfailFuncs.push(arguments[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\talways: function() {\n\t\t\t\t\treturn this.done.apply(this, arguments).fail.apply(this, arguments);\n\t\t\t\t},\n\n\t\t\t\tprogress: function() {\n\t\t\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\t// skip any undefined or null arguments\n\t\t\t\t\t\tif (!arguments[i]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isArray(arguments[i])) {\n\t\t\t\t\t\t\tvar arr = arguments[i];\n\t\t\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\t\t\tif (status === 'pending') {\n\t\t\t\t\t\t\t\t\tprogressFuncs.push(arr[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\t\tif (status === 'pending') {\n\t\t\t\t\t\t\t\tprogressFuncs.push(arguments[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\tthen: function() {\n\t\t\t\t\t// fail callbacks\n\t\t\t\t\tif (arguments.length > 1 && arguments[1]) {\n\t\t\t\t\t\tthis.fail(arguments[1]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// done callbacks\n\t\t\t\t\tif (arguments.length > 0 && arguments[0]) {\n\t\t\t\t\t\tthis.done(arguments[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// notify callbacks\n\t\t\t\t\tif (arguments.length > 2 && arguments[2]) {\n\t\t\t\t\t\tthis.progress(arguments[2]);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tpromise: function(obj) {\n\t\t\t\t\tif (obj == null) {\n\t\t\t\t\t\treturn promise;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (var i in promise) {\n\t\t\t\t\t\t\tobj[i] = promise[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn status;\n\t\t\t\t},\n\n\t\t\t\tdebug: function() {\n\t\t\t\t\tconsole.log('[debug]', doneFuncs, failFuncs, status);\n\t\t\t\t},\n\n\t\t\t\tisRejected: function() {\n\t\t\t\t\treturn status === 'rejected';\n\t\t\t\t},\n\n\t\t\t\tisResolved: function() {\n\t\t\t\t\treturn status === 'resolved';\n\t\t\t\t},\n\n\t\t\t\tpipe: function(done, fail, progress) {\n\t\t\t\t\treturn D(function(def) {\n\t\t\t\t\t\tforeach(done, function(func) {\n\t\t\t\t\t\t\t// filter function\n\t\t\t\t\t\t\tif (typeof func === 'function') {\n\t\t\t\t\t\t\t\tdeferred.done(function() {\n\t\t\t\t\t\t\t\t\tvar returnval = func.apply(this, arguments);\n\t\t\t\t\t\t\t\t\t// if a new deferred/promise is returned, its state is passed to the current deferred/promise\n\t\t\t\t\t\t\t\t\tif (returnval && typeof returnval === 'function') {\n\t\t\t\t\t\t\t\t\t\treturnval.promise().then(def.resolve, def.reject, def.notify);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\t// if new return val is passed, it is passed to the piped done\n\t\t\t\t\t\t\t\t\t\tdef.resolve(returnval);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tdeferred.done(def.resolve);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tforeach(fail, function(func) {\n\t\t\t\t\t\t\tif (typeof func === 'function') {\n\t\t\t\t\t\t\t\tdeferred.fail(function() {\n\t\t\t\t\t\t\t\t\tvar returnval = func.apply(this, arguments);\n\n\t\t\t\t\t\t\t\t\tif (returnval && typeof returnval === 'function') {\n\t\t\t\t\t\t\t\t\t\treturnval.promise().then(def.resolve, def.reject, def.notify);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdef.reject(returnval);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tdeferred.fail(def.reject);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}).promise();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdeferred = {\n\t\t\t\tresolveWith: function(context) {\n\t\t\t\t\tif (status === 'pending') {\n\t\t\t\t\t\tstatus = 'resolved';\n\t\t\t\t\t\tvar args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n\t\t\t\t\t\tfor (var i = 0; i < doneFuncs.length; i++) {\n\t\t\t\t\t\t\tdoneFuncs[i].apply(context, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\trejectWith: function(context) {\n\t\t\t\t\tif (status === 'pending') {\n\t\t\t\t\t\tstatus = 'rejected';\n\t\t\t\t\t\tvar args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n\t\t\t\t\t\tfor (var i = 0; i < failFuncs.length; i++) {\n\t\t\t\t\t\t\tfailFuncs[i].apply(context, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\tnotifyWith: function(context) {\n\t\t\t\t\tif (status === 'pending') {\n\t\t\t\t\t\tvar args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n\t\t\t\t\t\tfor (var i = 0; i < progressFuncs.length; i++) {\n\t\t\t\t\t\t\tprogressFuncs[i].apply(context, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\tresolve: function() {\n\t\t\t\t\treturn this.resolveWith(this, arguments);\n\t\t\t\t},\n\n\t\t\t\treject: function() {\n\t\t\t\t\treturn this.rejectWith(this, arguments);\n\t\t\t\t},\n\n\t\t\t\tnotify: function() {\n\t\t\t\t\treturn this.notifyWith(this, arguments);\n\t\t\t\t}\n\t\t\t}\n\n\t\tvar obj = promise.promise(deferred);\n\n\t\tif (fn) {\n\t\t\tfn.apply(obj, [obj]);\n\t\t}\n\n\t\treturn obj;\n\t}\n\n\tD.when = function() {\n\t\tif (arguments.length < 2) {\n\t\t\tvar obj = arguments.length ? arguments[0] : undefined;\n\t\t\tif (obj && (typeof obj.isResolved === 'function' && typeof obj.isRejected === 'function')) {\n\t\t\t\treturn obj.promise();\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn D().resolve(obj).promise();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn (function(args){\n\t\t\t\tvar df = D(),\n\t\t\t\t\tsize = args.length,\n\t\t\t\t\tdone = 0,\n\t\t\t\t\trp = new Array(size);\t// resolve params: params of each resolve, we need to track down them to be able to pass them in the correct order if the master needs to be resolved\n\n\t\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\t\t(function(j) {\n\t\t\t\t\t\tvar obj = null;\n\n\t\t\t\t\t\tif (args[j].done) {\n\t\t\t\t\t\t\targs[j].done(function() { rp[j] = (arguments.length < 2) ? arguments[0] : arguments; if (++done == size) { df.resolve.apply(df, rp); }})\n\t\t\t\t\t\t\t\t.fail(function() { df.reject(arguments); });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj = args[j];\n\t\t\t\t\t\t\targs[j] = new Deferred();\n\n\t\t\t\t\t\t\targs[j].done(function() { rp[j] = (arguments.length < 2) ? arguments[0] : arguments; if (++done == size) { df.resolve.apply(df, rp); }})\n\t\t\t\t\t\t\t\t.fail(function() { df.reject(arguments); }).resolve(obj);\n\t\t\t\t\t\t}\n\t\t\t\t\t})(i);\n\t\t\t\t}\n\n\t\t\t\treturn df.promise();\n\t\t\t})(arguments);\n\t\t}\n\t},\n\n\tD.isEmptyObject = function( obj ) {\n\t\tvar name;\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tglobal.Deferred = D;\n\tglobal.WLJQ = D;\n\tglobal.WLJQ.Deferred = function () {\n\t\treturn new Deferred();\n\t}\n})(window);/*\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2015 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n */\n \n\n/**\n * ================================================================= \n * Source file taken from :: stacktrace.min.js\n * ================================================================= \n */\n\n// Domain Public by Eric Wendelin http://eriwen.com/ (2008)\n//                  Luke Smith http://lucassmith.name/ (2008)\n//                  Loic Dachary <loic@dachary.org> (2008)\n//                  Johan Euphrosine <proppy@aminche.com> (2008)\n//                  Oyvind Sean Kinsey http://kinsey.no/blog (2010)\n//                  Victor Homyakov <victor-homyakov@users.sourceforge.net> (2010)\n// https://github.com/eriwen/javascript-stacktrace/blob/v0.5.0/stacktrace.js\nfunction printStackTrace(e){e=e||{guess:true};var t=e.e||null,n=!!e.guess;var r=new printStackTrace.implementation,i=r.run(t);return n?r.guessAnonymousFunctions(i):i}if(typeof module!==\"undefined\"&&module.exports){module.exports=printStackTrace}printStackTrace.implementation=function(){};printStackTrace.implementation.prototype={run:function(e,t){e=e||this.createException();t=t||this.mode(e);if(t===\"other\"){return this.other(arguments.callee)}else{return this[t](e)}},createException:function(){try{this.undef()}catch(e){return e}},mode:function(e){if(e[\"arguments\"]&&e.stack){return\"chrome\"}else if(e.stack&&e.sourceURL){return\"safari\"}else if(e.stack&&e.number){return\"ie\"}else if(typeof e.message===\"string\"&&typeof window!==\"undefined\"&&window.opera){if(!e.stacktrace){return\"opera9\"}if(e.message.indexOf(\"\\n\")>-1&&e.message.split(\"\\n\").length>e.stacktrace.split(\"\\n\").length){return\"opera9\"}if(!e.stack){return\"opera10a\"}if(e.stacktrace.indexOf(\"called from line\")<0){return\"opera10b\"}return\"opera11\"}else if(e.stack){return\"firefox\"}return\"other\"},instrumentFunction:function(e,t,n){e=e||window;var r=e[t];e[t]=function(){n.call(this,printStackTrace().slice(4));return e[t]._instrumented.apply(this,arguments)};e[t]._instrumented=r},deinstrumentFunction:function(e,t){if(e[t].constructor===Function&&e[t]._instrumented&&e[t]._instrumented.constructor===Function){e[t]=e[t]._instrumented}},chrome:function(e){var t=(e.stack+\"\\n\").replace(/^\\S[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+(at eval )?at\\s+/gm,\"\").replace(/^([^\\(]+?)([\\n$])/gm,\"{anonymous}()@$1$2\").replace(/^Object.<anonymous>\\s*\\(([^\\)]+)\\)/gm,\"{anonymous}()@$1\").split(\"\\n\");t.pop();return t},safari:function(e){return e.stack.replace(/\\[native code\\]\\n/m,\"\").replace(/^(?=\\w+Error\\:).*$\\n/m,\"\").replace(/^@/gm,\"{anonymous}()@\").split(\"\\n\")},ie:function(e){var t=/^.*at (\\w+) \\(([^\\)]+)\\)$/gm;return e.stack.replace(/at Anonymous function /gm,\"{anonymous}()@\").replace(/^(?=\\w+Error\\:).*$\\n/m,\"\").replace(t,\"$1@$2\").split(\"\\n\")},firefox:function(e){return e.stack.replace(/(?:\\n@:0)?\\s+$/m,\"\").replace(/^[\\(@]/gm,\"{anonymous}()@\").split(\"\\n\")},opera11:function(e){var t=\"{anonymous}\",n=/^.*line (\\d+), column (\\d+)(?: in (.+))? in (\\S+):$/;var r=e.stacktrace.split(\"\\n\"),i=[];for(var s=0,o=r.length;s<o;s+=2){var u=n.exec(r[s]);if(u){var a=u[4]+\":\"+u[1]+\":\"+u[2];var f=u[3]||\"global code\";f=f.replace(/<anonymous function: (\\S+)>/,\"$1\").replace(/<anonymous function>/,t);i.push(f+\"@\"+a+\" -- \"+r[s+1].replace(/^\\s+/,\"\"))}}return i},opera10b:function(e){var t=/^(.*)@(.+):(\\d+)$/;var n=e.stacktrace.split(\"\\n\"),r=[];for(var i=0,s=n.length;i<s;i++){var o=t.exec(n[i]);if(o){var u=o[1]?o[1]+\"()\":\"global code\";r.push(u+\"@\"+o[2]+\":\"+o[3])}}return r},opera10a:function(e){var t=\"{anonymous}\",n=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;var r=e.stacktrace.split(\"\\n\"),i=[];for(var s=0,o=r.length;s<o;s+=2){var u=n.exec(r[s]);if(u){var a=u[3]||t;i.push(a+\"()@\"+u[2]+\":\"+u[1]+\" -- \"+r[s+1].replace(/^\\s+/,\"\"))}}return i},opera9:function(e){var t=\"{anonymous}\",n=/Line (\\d+).*script (?:in )?(\\S+)/i;var r=e.message.split(\"\\n\"),i=[];for(var s=2,o=r.length;s<o;s+=2){var u=n.exec(r[s]);if(u){i.push(t+\"()@\"+u[2]+\":\"+u[1]+\" -- \"+r[s+1].replace(/^\\s+/,\"\"))}}return i},other:function(e){var t=\"{anonymous}\",n=/function\\s*([\\w\\-$]+)?\\s*\\(/i,r=[],i,s,o=10;while(e&&e[\"arguments\"]&&r.length<o){i=n.test(e.toString())?RegExp.$1||t:t;s=Array.prototype.slice.call(e[\"arguments\"]||[]);r[r.length]=i+\"(\"+this.stringifyArguments(s)+\")\";e=e.caller}return r},stringifyArguments:function(e){var t=[];var n=Array.prototype.slice;for(var r=0;r<e.length;++r){var i=e[r];if(i===undefined){t[r]=\"undefined\"}else if(i===null){t[r]=\"null\"}else if(i.constructor){if(i.constructor===Array){if(i.length<3){t[r]=\"[\"+this.stringifyArguments(i)+\"]\"}else{t[r]=\"[\"+this.stringifyArguments(n.call(i,0,1))+\"...\"+this.stringifyArguments(n.call(i,-1))+\"]\"}}else if(i.constructor===Object){t[r]=\"#object\"}else if(i.constructor===Function){t[r]=\"#function\"}else if(i.constructor===String){t[r]='\"'+i+'\"'}else if(i.constructor===Number){t[r]=i}}}return t.join(\",\")},sourceCache:{},ajax:function(e){var t=this.createXMLHTTPObject();if(t){try{t.open(\"GET\",e,false);t.send(null);return t.responseText}catch(n){}}return\"\"},createXMLHTTPObject:function(){var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject(\"Msxml2.XMLHTTP\")},function(){return new ActiveXObject(\"Msxml3.XMLHTTP\")},function(){return new ActiveXObject(\"Microsoft.XMLHTTP\")}];for(var n=0;n<t.length;n++){try{e=t[n]();this.createXMLHTTPObject=t[n];return e}catch(r){}}},isSameDomain:function(e){return typeof location!==\"undefined\"&&e.indexOf(location.hostname)!==-1},getSource:function(e){if(!(e in this.sourceCache)){this.sourceCache[e]=this.ajax(e).split(\"\\n\")}return this.sourceCache[e]},guessAnonymousFunctions:function(e){for(var t=0;t<e.length;++t){var n=/\\{anonymous\\}\\(.*\\)@(.*)/,r=/^(.*?)(?::(\\d+))(?::(\\d+))?(?: -- .+)?$/,i=e[t],s=n.exec(i);if(s){var o=r.exec(s[1]);if(o){var u=o[1],a=o[2],f=o[3]||0;if(u&&this.isSameDomain(u)&&a){var l=this.guessAnonymousFunction(u,a,f);e[t]=i.replace(\"{anonymous}\",l)}}}}return e},guessAnonymousFunction:function(e,t,n){var r;try{r=this.findFunctionName(this.getSource(e),t)}catch(i){r=\"getSource failed with url: \"+e+\", exception: \"+i.toString()}return r},findFunctionName:function(e,t){var n=/function\\s+([^(]*?)\\s*\\(([^)]*)\\)/;var r=/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/;var i=/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/;var s=\"\",o,u=Math.min(t,20),a,f;for(var l=0;l<u;++l){o=e[t-l-1];f=o.indexOf(\"//\");if(f>=0){o=o.substr(0,f)}if(o){s=o+s;a=r.exec(s);if(a&&a[1]){return a[1]}a=n.exec(s);if(a&&a[1]){return a[1]}a=i.exec(s);if(a&&a[1]){return a[1]}}}return\"(?)\"}}\n\n\n/**\n * ================================================================= \n * Source file taken from :: wljsx.js\n * ================================================================= \n */\n\n/*\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2015 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n /*globals WLJSX, WLJQ*/\n\n/*jshint unused:false*/\nfunction __WL() {}\nvar WL = WL ? WL : {};\n\nwindow.WLJSX = {\n\n  /*jshint strict:false*/\n\n  /*\n   * Constant values, required for prototype.js functionality\n   */\n  emptyFunction: function() {},\n\n  /**\n   * Search for an element with a specified ID and returns it as a DOM element.\n   * Returns null if element is not found\n   *\n   * @Param selector - a string with the requires DOM element's Id\n   */\n  $: function(id) {\n    var elements = WLJQ('#' + id);\n    if (elements.length === 0) {\n      return null;\n    } else {\n      return elements[0];\n    }\n  },\n\n  /**\n   * Searches for the elements with a specified selector and returns them as an array of DOM elements\n   *\n   * @Param selector - a string representing a CSS selector\n   */\n  $$: function(selector) {\n    return WLJQ(selector);\n  },\n\n  $$$: function(elem) {\n    var elements = WLJQ(elem);\n    if (elements.length === 0) {\n      return null;\n    } else {\n      return elements[0];\n    }\n  },\n\n  /**\n   * Same as $$ but searches inside of a given element only. Returns array of DOM elements\n   *\n   * @Param el - the DOM element to search inside of\n   * @Param selector - a string representing a CSS selector\n   */\n  find: function(el, selector) {\n    return WLJQ(el).find(selector);\n  },\n\n  /**\n   * Creates a new DOM element and returns it\n   *\n   * @Param type - a string representing the element type (tag name, e.g. '<div/>')\n   * @Param attrs - an object of attributes to be added to newly created element\n   */\n  newElement: function(type, attrs) {\n    return WLJQ(type, attrs)[0];\n  },\n\n  /**\n   * Appends the content before the end of a DOM element\n   *\n   * @Param el - the DOM element (or CSS selector string) to append content to\n   * @Param content - new content to be appended\n   */\n  append: function(el, content) {\n    WLJQ(el).append(content);\n  },\n\n  /**\n   * Prepends the content at the beginning of a DOM element\n   *\n   * @Param el - the DOM element (or CSS selector string) to prepend content to\n   * @Param content - new content to be prepended\n   */\n  prepend: function(el, content) {\n    WLJQ(el).prepend(content);\n  },\n\n  /**\n   * Sets or Gets DOM element's content\n   *\n   * @Param el - the DOM element to update content in\n   * @Param content - new content, can be string or other DOM elements\n   */\n  html: function(el, content) {\n    if (content) {\n      WLJQ(el).html(content);\n    } else {\n      return WLJQ(el).html();\n    }\n  },\n\n  /**\n   * Empties the content of a given DOM element\n   *\n   * @Param el - the DOM element (or CSS selector string) to empty\n   */\n  empty: function(el) {\n    WLJQ(el).empty();\n  },\n\n  /**\n   * Shows a DOM element (makes visible)\n   *\n   * @Param el - the DOM element (or CSS selector string) to make visible\n   */\n  show: function(el) {\n    WLJQ(el).show();\n  },\n\n  /**\n   * Hides a DOM element (makes invisible)\n   *\n   * @Param el - the DOM element (or CSS selector string) to hide\n   */\n  hide: function(el) {\n    WLJQ(el).hide();\n  },\n\n  /**\n   * Adds a specified CSS class to DOM elements\n   *\n   * @Param el - the DOM element (or CSS selector string) to add the CSS class to\n   * @Param className - string with the class' name\n   */\n  addClass: function(el, className) {\n    WLJQ(el).addClass(className);\n  },\n\n  /**\n   * Removes a specified CSS class from DOM elements\n   *\n   * @Param el - the DOM element (or CSS selector string) to remove the CSS class from\n   * @Param className - string with the class' name\n   */\n  removeClass: function(el, className) {\n    WLJQ(el).removeClass(className);\n  },\n\n  /**\n   * Sets or Gets the width of a DOM element (first one in case several elements fit CSS selector)\n   *\n   * @Param el - the DOM element to get/set width\n   * @Param width - new width to set\n   */\n  width: function(el, width) {\n    if (width) {\n      WLJQ(el).width(width);\n    } else {\n      return WLJQ(el).width();\n    }\n  },\n\n  /**\n   * Sets or Gets the height of a DOM element (first one in case several elements fit CSS selector)\n   *\n   * @Param el - the DOM element to get/set height\n   * @Param height - new height to set\n   */\n  height: function(el, height) {\n    if (height) {\n      WLJQ(el).height(height);\n    } else {\n      return WLJQ(el).height();\n    }\n  },\n\n  /**\n   * Removes an element from the DOM.\n   *\n   * @Param el - the DOM element (or CSS selector string) to remove\n   */\n  remove: function(el) {\n    WLJQ(el).remove();\n  },\n\n  /**\n   * Sets specific CSS style on the DOM elements\n   *\n   * @Param el - the DOM element (or CSS selector string) to set CSS style on\n   * @Param style - an object of CSS styles to be set\n   */\n  css: function(el, style) {\n    WLJQ(el).css(style);\n  },\n\n  /**\n   * Sets or Gets the attribute of a DOM element\n   *\n   * @Param el - the DOM element to get/set attribute\n   * @Param attrName - the name of an attribute\n   * @Param attrValue - the new value of the attribute\n   */\n  attr: function(el, attrName, attrValue) {\n    if (attrValue) {\n      WLJQ(el).attr(attrName, attrValue);\n    } else {\n      return WLJQ(el).attr(attrName);\n    }\n  },\n\n  /**\n   * Adds the event listener to DOM elements for a specified event\n   *\n   * @Param el - the DOM element (or CSS selector string) to add event listener to\n   * @Param event - string with the event's name, e.g. 'click', 'change' etc.\n   * @Param callback - a JavaScript function to be invoked once event is triggered\n   */\n  bind: function(el, event, callback) {\n    WLJQ(el).bind(event, callback);\n  },\n\n  /**\n   * Removes the event listener from DOM elements\n   *\n   * @Param el - the DOM element (or CSS selector string) to remove event listener form\n   * @Param event - string with the event's name, e.g. 'click', 'change' etc.\n   */\n  unbind: function(el, event) {\n    if (event) {\n      WLJQ(el).unbind(event);\n    } else {\n      WLJQ(el).unbind();\n    }\n  },\n\n  /**\n   * Triggers a specific event on DOM elements\n   *\n   * @Param el - the DOM element (or CSS selector string) to trigger the event on\n   * @Param event - string with the event's name, e.g. 'click', 'change' etc.\n   */\n  trigger: function(el, event) {\n    WLJQ(el).trigger(event);\n  },\n\n  /**\n   * Retrieves the element that triggered the event (event's target)\n   *\n   * @Param event - event to get the target from\n   */\n  eventTarget: function(event) {\n    return event.target;\n  },\n\n  /*\n   * Detects browser types. Implementation taken from Prototype.js\n   */\n  detectBrowser: function() {\n    var userAgent = navigator.userAgent;\n    /*jshint eqeqeq:false*/\n    var isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]';\n    return {\n      isIE: !!window.attachEvent && !isOpera,\n      isOpera: isOpera,\n      isWebKit: userAgent.indexOf('AppleWebKit/') > -1,\n      isGecko: userAgent.indexOf('Gecko') > -1 && userAgent.indexOf('KHTML') === -1,\n      isMobileSafari: /Apple.*Mobile/.test(userAgent),\n      isWP81RT: userAgent.indexOf('Windows Phone 8.1') > -1\n    };\n  },\n\n  /*\n   * Returns viewport root element depending on a browser. Implementation taken from Prototype.js\n   */\n  getViewportRootElement: function() {\n    var browser = WLJSX.detectBrowser();\n\n    if (browser.isWebKit && !document.evaluate) {\n      return document;\n    }\n\n    if (browser.isOpera && window.parseFloat(window.opera.version()) < 9.5) {\n      return document.body;\n    }\n\n    return document.documentElement;\n  },\n\n  /*\n   * Returns the width of a viewport\n   */\n  getViewportWidth: function() {\n    return (this.getViewportRootElement())['clientWidth'];\n  },\n\n  /*\n   * Returns the height of a viewport\n   */\n  getViewportHeight: function() {\n    return (this.getViewportRootElement())['clientHeight'];\n  },\n\n  isEmptyObject: function(obj) {\n    return WLJQ.isEmptyObject(obj);\n  }\n\n\n};\n\n/*\n * The following namespaces are taken from prototypejs framework and adopted to work with MobileFirst Platform\n */\n\n/*\n * Class object defines a Class.create API for object oriented JS approach\n */\nwindow.WLJSX.Class = (function() {\n  var IS_DONTENUM_BUGGY = (function() {\n    for (var p in {\n        toString: 1\n      }) {\n      if (p === 'toString') {\n        return false;\n      }\n    }\n    return true;\n  })();\n\n  function subclass() {}\n\n  function create() {\n    var parent = null;\n    var properties = WLJSX.Object.toArray(arguments);\n\n    if (WLJSX.Object.isFunction(properties[0])) {\n      parent = properties.shift();\n    }\n\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    WLJSX.Object.extend(klass, WLJSX.Class.Methods);\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      subclass.prototype = parent.prototype;\n      /*jshint newcap:false*/\n      klass.prototype = new subclass();\n      parent.subclasses.push(klass);\n    }\n\n    for (var i = 0, length = properties.length; i < length; i++) {\n      klass.addMethods(properties[i]);\n    }\n\n    if (!klass.prototype.initialize) {\n      klass.prototype.initialize = WLJSX.emptyFunction;\n    }\n\n    klass.prototype.constructor = klass;\n    return klass;\n  }\n\n  function addMethods(source) {\n    var ancestor = this.superclass && this.superclass.prototype,\n      properties = WLJSX.Object.keys(source);\n\n    if (IS_DONTENUM_BUGGY) {\n      /*jshint eqeqeq:false*/\n      if (source.toString != Object.prototype.toString) {\n        properties.push('toString');\n      }\n      if (source.valueOf != Object.prototype.valueOf) {\n        properties.push('valueOf');\n      }\n    }\n\n    for (var i = 0, length = properties.length; i < length; i++) {\n      var property = properties[i],\n        value = source[property];\n\n      if (ancestor && WLJSX.Object.isFunction(value) && value.argumentNames()[0] == '__super') {\n        var method = value;\n        /*jshint -W083*/\n        value = (function(m) {\n          return function() {\n            return ancestor[m].apply(this, arguments);\n          };\n        })\n        (property).wrap(method);\n\n        value.valueOf = method.valueOf.bind(method);\n        value.toString = method.toString.bind(method);\n      }\n      this.prototype[property] = value;\n    }\n    return this;\n  }\n\n  return {\n    create: create,\n    Methods: {\n      addMethods: addMethods\n    }\n  };\n})();\n\n/*\n * WLJSX.Object APIs are responsible for Object related functionality\n *\n * WLJSX.Object.objectSize(obj) - returns the number of properties in the supplied object\n * WLJSX.Object.toArray(iterable) - coverts object to array\n * WLJSX.Object.toJSON(obj) - converts object to it's JSON representation\n * WLJSX.Object.extend(destination, source) - extends destination object with properties from the source object\n * WLJSX.Object.toQueryString(obj) - converts object to a query string\n * WLJSX.Object.keys(obj) - returns object keys as array\n * WLJSX.Object.clone(obj) - returns a new copy of a supplied object\n * WLJSX.Object.isArray(obj) - checks whether object is an array\n * WLJSX.Object.isFunction(obj) - checks whether object is a function\n * WLJSX.Object.isString(obj) - checks whether object is a string\n * WLJSX.Object.isNumber(obj) - checks whether object is a number\n * WLJSX.Object.isDate(obj) - checks whether object is a date\n * WLJSX.Object.isUndefined(obj) - checks whether object is undefined\n */\nwindow.WLJSX.Object = {\n  _toString: Object.prototype.toString,\n  NULL_TYPE: 'Null',\n  UNDEFINED_TYPE: 'Undefined',\n  BOOLEAN_TYPE: 'Boolean',\n  NUMBER_TYPE: 'Number',\n  STRING_TYPE: 'String',\n  OBJECT_TYPE: 'Object',\n  FUNCTION_CLASS: '[object Function]',\n  BOOLEAN_CLASS: '[object Boolean]',\n  NUMBER_CLASS: '[object Number]',\n  STRING_CLASS: '[object String]',\n  ARRAY_CLASS: '[object Array]',\n  DATE_CLASS: '[object Date]',\n\n  NATIVE_JSON_STRINGIFY_SUPPORT: (window.JSON &&\n    typeof JSON.stringify === 'function' &&\n    JSON.stringify(0) === '0' &&\n    typeof JSON.stringify(function(x) {\n      return x;\n    }) === 'undefined'),\n\n  objectSize: function(obj) {\n    var count = 0;\n    /*jshint forin:false*/\n    for (var key in obj) {\n      count++;\n    }\n    return count;\n  },\n\n  toArray: function(iterable) {\n    if (!iterable) {\n      return [];\n    }\n    if ('toArray' in Object(iterable)) {\n      return iterable.toArray();\n    }\n    var length = iterable.length || 0;\n    var result = new Array(length);\n    while (length--) {\n      result[length] = iterable[length];\n    }\n    return result;\n  },\n\n  Type: function(o) {\n    switch (o) {\n      case null:\n        return WLJSX.Object.NULL_TYPE;\n      case (void 0):\n        return WLJSX.Object.UNDEFINED_TYPE;\n    }\n    var type = typeof o;\n    switch (type) {\n      case 'boolean':\n        return WLJSX.Object.BOOLEAN_TYPE;\n      case 'number':\n        return WLJSX.Object.NUMBER_TYPE;\n      case 'string':\n        return WLJSX.Object.STRING_TYPE;\n    }\n    return WLJSX.Object.OBJECT_TYPE;\n  },\n\n  extend: function(destination, source) {\n    /*jshint forin:false*/\n    for (var property in source) {\n      destination[property] = source[property];\n    }\n    return destination;\n  },\n\n  toJSON: function(object) {\n    if (WLJSX.Object.NATIVE_JSON_STRINGIFY_SUPPORT) {\n      return JSON.stringify(object);\n    }\n    else {\n      return WLJSX.Object.Str('', {\n        '': object\n      }, []);\n    }\n  },\n\n  Str: function(key, holder, stack) {\n    var value = holder[key];\n    var type = typeof value;\n    if (WLJSX.Object.Type(value) === WLJSX.Object.OBJECT_TYPE && typeof value.toJSON === 'function') {\n      value = value.toJSON(key);\n    }\n    var _class = WLJSX.Object._toString.call(value);\n    switch (_class) {\n      case WLJSX.Object.NUMBER_CLASS:\n      case WLJSX.Object.BOOLEAN_CLASS:\n      case WLJSX.Object.STRING_CLASS:\n        value = value.valueOf();\n    }\n    switch (value) {\n      case null:\n        return 'null';\n      case true:\n        return 'true';\n      case false:\n        return 'false';\n    }\n    type = typeof value;\n    switch (type) {\n      case 'string':\n        return value;\n      case 'number':\n        return isFinite(value) ? String(value) : 'null';\n      case 'object':\n        for (var i = 0, length = stack.length; i < length; i++) {\n          if (stack[i] === value) {\n            throw new TypeError();\n          }\n        }\n        stack.push(value);\n        var partial = [];\n        if (_class === WLJSX.Object.ARRAY_CLASS) {\n          for (i = 0, length = value.length; i < length; i++) {\n            var str = WLJSX.Object.Str(i, value, stack);\n            partial.push(typeof str === 'undefined' ? 'null' : str);\n          }\n          partial = '[' + partial.join(',') + ']';\n        } else {\n          var keys = WLJSX.Object.keys(value);\n          for (i = 0, length = keys.length; i < length; i++) {\n            key = keys[i];\n            var strResult = WLJSX.Object.Str(key, value, stack);\n            if (typeof strResult !== 'undefined') {\n              partial.push(WLJSX.String.inspect(key, true) + ':' + strResult);\n            }\n          }\n          partial = '{' + partial.join(',') + '}';\n        }\n        stack.pop();\n        return partial;\n    }\n  },\n\n  toQueryString: function(object) {\n    var results = [];\n\n    /*jshint forin:false*/\n    for (var key in object) {\n      key = encodeURIComponent(key);\n      var value = object[key];\n      var queryPair = (WLJSX.Object.isUndefined(value)) ? key : key + '=' + encodeURIComponent(WLJSX.String.interpret(value));\n      results.push(queryPair);\n    }\n    return results.join('&');\n  },\n\n  keys: function(object) {\n    if (WLJSX.Object.Type(object) !== WLJSX.Object.OBJECT_TYPE) {\n      throw new TypeError();\n    }\n    var results = [];\n    for (var property in object) {\n      if (object.hasOwnProperty(property)) {\n        results.push(property);\n      }\n    }\n    return results;\n  },\n\n  clone: function(object) {\n    return WLJSX.Object.extend({}, object);\n  },\n\n  isArray: function(object) {\n    if ((typeof Array.isArray === 'function') && Array.isArray([]) && !Array.isArray({})) {\n      return Array.isArray(object);\n    } else {\n      return WLJSX.Object._toString.call(object) === WLJSX.Object.ARRAY_CLASS;\n    }\n  },\n\n  isFunction: function(object) {\n    return WLJSX.Object._toString.call(object) === WLJSX.Object.FUNCTION_CLASS;\n  },\n\n  isString: function(object) {\n    return WLJSX.Object._toString.call(object) === WLJSX.Object.STRING_CLASS;\n  },\n\n  isNumber: function(object) {\n    return WLJSX.Object._toString.call(object) === WLJSX.Object.NUMBER_CLASS;\n  },\n\n  isDate: function(object) {\n    return WLJSX.Object._toString.call(object) === WLJSX.Object.DATE_CLASS;\n  },\n\n  isUndefined: function(object) {\n    return typeof object === 'undefined';\n  }\n};\n\n/*jshint -W100*/\n\n/*\n * WLJSX.String APIs are responsible for String related functionality\n *\n * WLJSX.String.stripScripts(str) - stripts <script> tags from string\n * WLJSX.String.escapeHTML(str) - replaces &, < and > characters with their escaped HTML values\n * WLJSX.String.inspect(str) - Returns a debug-oriented version of the string (i.e. wrapped in single or double quotes, with backslashes and quotes escaped)\n * WLJSX.String.interpret(str) - Forces value into a string. Returns an empty string for null\n * WLJSX.String.strip(str) - Strips all leading and trailing whitespace from a string\n * WLJSX.String.isJSON(str) - validates whether string is a valid JSON representation\n * WLJSX.String.isBlank(str) - Check if the string is 'blank'  either empty (length of 0) or containing only whitespace.\n * WLJSX.String.unfilterJSON(str) - Strips comment delimiters around Ajax JSON or JavaScript responses. This security method is called internally\n * WLJSX.String.evalJSON(str) - Evaluates the JSON in the string and returns the resulting object\n * WLJSX.String.parseResponseHeaders(str) - Parses the string returned by the XMLHttpRequest.getAllResponseHeaders() method and returns an map holding the response headers\n * WLJSX.String.getHeaderByKey(headers, key) - case insenstive search in a map for a given key, Returns the header as json\n */\nwindow.WLJSX.String = {\n  specialChar: {\n    '\\b': '\\\\b',\n    '\\t': '\\\\t',\n    '\\n': '\\\\n',\n    '\\f': '\\\\f',\n    '\\r': '\\\\r',\n    '\\\\': '\\\\\\\\'\n  },\n  stripScripts: function(str) {\n    return str.replace(new RegExp('<script[^>]*>([\\\\S\\\\s]*?)<\\/script>', 'img'), '');\n  },\n\n  escapeHTML: function(str) {\n    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  },\n\n  interpret: function(str) {\n    return str === null ? '' : String(str);\n  },\n\n  strip: function(str) {\n    return str.replace(/^\\s+/, '').replace(/\\s+$/, '');\n  },\n\n  toQueryParams: function(str) {\n    var match = WLJSX.String.strip(str).match(/([^?#]*)(#.*)?$/);\n    if (!match) {\n      return {};\n    }\n\n    var paramsArray = match[1].split('&');\n    var paramsObj = {};\n    for (var i = 0; i < paramsArray.length; i++) {\n      var pair = paramsArray[i].split('=');\n      if (pair[0]) {\n        (pair.shift()).toString().replace(/%/g , '%25');\n        var key = decodeURIComponent(pair.shift());\n        var value = pair.length > 1 ? pair.join('=') : pair[0];\n        if (value !== undefined) {\n          value = decodeURIComponent(value);\n        }\n        paramsObj[key] = value;\n      }\n    }\n    return paramsObj;\n  },\n\n  isJSON: function(str) {\n    if (WLJSX.String.isBlank(str)) {\n      return false;\n    }\n    str = str.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@');\n    str = str.replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']');\n    str = str.replace(/(?:^|:|,)(?:\\s*\\[)+/g, '');\n    return (/^[\\],:{}\\s]*$/).test(str);\n  },\n\n  isBlank: function(str) {\n    return (/^\\s*$/).test(str);\n  },\n\n  inspect: function(str, useDoubleQuotes) {\n    var escapedString = str.replace(/[\\x00-\\x1f\\\\]/g, function(character) {\n      if (character in WLJSX.String.specialChar) {\n        return WLJSX.String.specialChar[character];\n      }\n      return '\\\\u00' + character.charCodeAt().toPaddedString(2, 16);\n    });\n    if (useDoubleQuotes) {\n      return '\"' + escapedString.replace(/\"/g, '\\\\\"') + '\"';\n    }\n    return '\\'' + escapedString.replace(/'/g, '\\\\\\'') + '\\'';\n  },\n\n  unfilterJSON: function(str) {\n    return str.replace(/^\\/\\*-secure-([\\s\\S]*)\\*\\/\\s*$/, '$1');\n  },\n\n  evalJSON: function(str, sanitize) {\n    var json = WLJSX.String.unfilterJSON(str);\n    if (window.JSON && typeof JSON.parse === 'function' && JSON.parse('{\"test\": true}').test) {\n      // Native json parse support\n      return JSON.parse(json);\n    } else {\n      // No native json parse support\n      var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n      if (cx.test(json)) {\n        json = json.replace(cx, function(a) {\n          return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        });\n      }\n      try {\n        if (!sanitize || WLJSX.String.isJSON(json)) {\n          /*jshint evil:true*/\n          return eval('(' + json + ')');\n        }\n      } catch (e) {}\n      throw new SyntaxError('Badly formed JSON string: ' + WLJSX.String.inspect(str));\n    }\n  },\n  \n  parseResponseHeaders: function(responseHeadersString) {\n    var responseHeaders = {};\n    if (responseHeadersString !== null && typeof (responseHeadersString) !== 'undefined') {\n       var delimiter = responseHeadersString.indexOf('\\r') > -1 ? '\\r\\n' : '\\n';\n       var allHeaders = responseHeadersString.split(delimiter);\n\n       /*jshint maxdepth:4*/\n       for (var i = 0; i < allHeaders.length; i++) {\n         var pair = allHeaders[i];\n         var index = pair.indexOf(': ');\n         /*jshint maxdepth:5*/\n         if (index > 0) {\n           var key = pair.substring(0, index);\n           var value = pair.substring(index + 2);\n           responseHeaders[key] = value;\n         }\n       }\n    }\n    return responseHeaders;\n  },\n  \n  getHeaderByKey: function(headers, key) {\n\t//case insensitive search\n\tfor (var headerKey in headers) {\n\t\tif (headerKey.toLowerCase() === key.toLowerCase()) {\n\t\t\tvar jsonHeader = {};\n\t\t\tjsonHeader[key] = headers[headerKey];\n\t\t\treturn jsonHeader;\n\t\t}\n\t}\n\treturn null;\n  }\n};\n\n/*\n * WLJSX.PeriodicalExecuter APIs are responsible for PeriodicalExecuter related functionality\n *\n * WLJSX.Object.execute() - Executes a callback supplied at initialization\n * WLJSX.Object.stop() - Stops the timer interval execution\n * new WLJSX.PeriodicalExecuter(callback, frequency) - returns new WLJSX.PeriodicalExecuter() object\n * which will call callback at specified frequencies (in seconds)\n */\nwindow.WLJSX.PeriodicalExecuter = function(callback, frequency) {\n  var currentlyExecuting = false;\n\n  function onTimerEvent() {\n    if (!currentlyExecuting) {\n      try {\n        currentlyExecuting = true;\n        callback();\n        currentlyExecuting = false;\n      } catch (e) {\n        currentlyExecuting = false;\n        throw e;\n      }\n    }\n  }\n\n  var timer = setInterval(onTimerEvent.bind(this), frequency * 1000);\n\n  return {\n    execute: function() {\n      callback(this);\n    },\n\n    stop: function() {\n      if (!timer) {\n        return;\n      }\n      clearInterval(timer);\n      timer = null;\n    }\n  };\n};\n\n\n/*\n * Extends JavaScript Function object\n *\n * Public API:\n * functionName.argumentNames - http://api.prototypejs.org/language/Function/prototype/argumentNames/\n * finctionName.bind - http://api.prototypejs.org/language/Function/prototype/bind/\n * functionName.bindAsEventListener - http://api.prototypejs.org/language/Function/prototype/bindAsEventListener/\n * functionName.curry - http://api.prototypejs.org/language/Function/prototype/curry/\n * functionName.delay - http://api.prototypejs.org/language/Function/prototype/delay/\n * functionName.defer - http://api.prototypejs.org/language/Function/prototype/defer/\n * functionName.wrap - http://api.prototypejs.org/language/Function/prototype/wrap/\n */\nWLJSX.Object.extend(Function.prototype, (function() {\n  var slice = Array.prototype.slice;\n\n  function update(array, args) {\n    var arrayLength = array.length,\n      length = args.length;\n    while (length--) {\n      array[arrayLength + length] = args[length];\n    }\n    return array;\n  }\n\n  function merge(array, args) {\n    array = slice.call(array, 0);\n    return update(array, args);\n  }\n\n  function argumentNames() {\n    var names = this.toString().match(/^[\\s\\(]*function[^(]*\\(([^)]*)\\)/)[1]\n      .replace(/\\/\\/.*?[\\r\\n]|\\/\\*(?:.|[\\r\\n])*?\\*\\//g, '')\n      .replace(/\\s+/g, '').split(',');\n    /*jshint eqeqeq:false*/\n    return names.length == 1 && !names[0] ? [] : names;\n  }\n\n  function bind(obj) {\n      var args = Array.prototype.slice.call(arguments, 1),\n          self = this,\n          Nop = function() {\n          },\n          bound = function() {\n              return self.apply(\n                  this instanceof Nop ? this : (obj || {}), args.concat(\n                      Array.prototype.slice.call(arguments)\n                  )\n              );\n          };\n      Nop.prototype = this.prototype || {};\n      bound.prototype = new Nop();\n      return bound;\n  }\n\n  function bindAsEventListener(context) {\n    var __method = this,\n      args = slice.call(arguments, 1);\n    return function(event) {\n      var a = update([event || window.event], args);\n      return __method.apply(context, a);\n    };\n  }\n\n  function curry() {\n    if (!arguments.length) {\n      return this;\n    }\n    var __method = this,\n      args = slice.call(arguments, 0);\n    return function() {\n      var a = merge(args, arguments);\n      return __method.apply(this, a);\n    };\n  }\n\n  function delay(timeout) {\n    var __method = this,\n      args = slice.call(arguments, 1);\n    timeout = timeout * 1000;\n    return window.setTimeout(function() {\n      return __method.apply(__method, args);\n    }, timeout);\n  }\n\n  function defer() {\n    var args = update([0.01], arguments);\n    return this.delay.apply(this, args);\n  }\n\n  function wrap(wrapper) {\n    var __method = this;\n    return function() {\n      var a = update([__method.bind(this)], arguments);\n      return wrapper.apply(this, a);\n    };\n  }\n\n  return {\n    argumentNames: argumentNames,\n    bind: bind,\n    bindAsEventListener: bindAsEventListener,\n    curry: curry,\n    delay: delay,\n    defer: defer,\n    wrap: wrap\n  };\n})());\n\n\n/**\n * ================================================================= \n * Source file taken from :: validators.js\n * ================================================================= \n */\n\n/*\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2015 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n */\n\n\n/**\n * Validators are responsible for validating method arguments in development mode.\n */\nWL.Validators = {\n    // Validation should be disabled by default - so Welcome pages do not validate in production.\n    // If we want validation for the welcome page we must add a solution to turn it off in production.\n    isValidationEnabled : false,\n    verbose : true,\n\n    // True when 'o' is set, the native JavaScript event is defined, and 'o' has an event phase\n    isEvent : function(obj) {\n\treturn obj && obj.type;\n    },\n\n    logAndThrow : function(msg, callerName) {\n\t// Logger is not be available in public resources (welcome page).\n\tif (WL.Logger) {\n\t    if (callerName) {\n\t\tmsg = \"Invalid invocation of method \" + callerName + \"; \" + msg;\n\t    }\n\t    if (this.verbose) {\n\t\tWL.Logger.error(msg);\n\t    }\n\t}\n\tthrow new Error(msg);\n    },\n\n    enableValidation : function() {\n\tthis.isValidationEnabled = true;\n    },\n\n    disableValidation : function() {\n\tthis.isValidationEnabled = false;\n    },\n\n    validateArguments : function(validators, args, callerName) {\n\tif (validators.length < args.length) {\n\t    // More arguments than validators ... accept only if last argument is an Event.\n\t    if ((validators.length !== (args.length - 1)) || !this.isEvent(args[args.length - 1])) {\n\t\tthis.logAndThrow(\"Method was passed \" + args.length + \" arguments, expected only \" + validators.length + \" \" + WLJSX.Object.toJSON(validators) + \".\", callerName);\n\t    }\n\t}\n\tthis.validateArray(validators, args, callerName);\n    },\n\n    validateMinimumArguments : function(args, mandatoryArgsLength, callerName) {\n\tif (args.length < mandatoryArgsLength) {\n\t    this.logAndThrow(\"Method passed: \" + args.length + \" arguments. Minimum arguments expected are: \" + mandatoryArgsLength + \" arguments.\", callerName);\n\t}\n    },\n\n    /**\n     * Validates each argument in the array with the matching validator. @Param array - a JavaScript array.\n     * @Param validators - an array of validators - a validator can be a function or a simple JavaScript type\n     * (string).\n     */\n    validateArray : function(validators, array, callerName) {\n\tif (!this.isValidationEnabled) {\n\t    return;\n\t}\n\tfor ( var i = 0; i < validators.length; ++i) {\n\t    this.validateArgument(validators[i], array[i], callerName);\n\t}\n    },\n\n    /**\n     * Validates a single argument. @Param arg - an argument of any type. @Param validator - a function or a\n     * simple JavaScript type (string).\n     */\n    validateArgument : function(validator, arg, callerName) {\n\tif (!this.isValidationEnabled) {\n\t    return;\n\t}\n\tswitch (typeof validator) {\n\t    // Case validation function.\n\t    case 'function':\n\t\tvalidator.call(this, arg);\n\t\tbreak;\n\t    // Case direct type.\n\t    case 'string':\n\t\tif (typeof arg !== validator) {\n\t\t    this.logAndThrow(\"Invalid value '\" + WLJSX.Object.toJSON(arg) + \"' (\" + (typeof arg) + \"), expected type '\" + validator + \"'.\", callerName);\n\t\t}\n\t\tbreak;\n\t    default:\n\t\t// This error can be caused only if IBM MobileFirst Platform code is bugged.\n\t\tthis.logAndThrow(\"Invalid or undefined validator for argument '\" + WLJSX.Object.toJSON(arg) + \"'\", callerName);\n\t}\n    },\n\n    /**\n     * Validates that each option attribute in the given options has a valid name and type. @Param options -\n     * the options to validate. @Param validOptions - the valid options hash with their validators:\n     * validOptions = { onSuccess : 'function', timeout : function(value){...} }\n     * \n     */\n    validateOptions : function(validOptions, options, callerName) {\n\tthis.validateObjectProperties(validOptions, options, true, callerName);\n\n    },\n\n    /**\n     * Validates that option attribute in the given options have a valid name and type - only if they are\n     * explicitly defined in validOptions. If an option attribute does not exist in validOptions, it is simply\n     * ignored @Param options - the options to validate. @Param validOptions - the valid options hash with\n     * their validators: validOptions = { onSuccess : 'function', timeout : function(value){...} }\n     * \n     */\n    validateOptionsLoose : function(validOptions, options, callerName) {\n\tthis.validateObjectProperties(validOptions, options, false, callerName);\n    },\n\n    /**\n     * Validates that each option attribute in the given options has a valid name and type. @Param options -\n     * the options to validate. @Param validOptions - the valid options hash with their validators:\n     * validOptions = { onSuccess : 'function', timeout : function(value){...} } @Param strict - a boolean\n     * indicating whether options' properties that don't exist in validOptions are allowed\n     * \n     */\n    validateObjectProperties : function(validOptions, options, strict, callerName) {\n\tif (!this.isValidationEnabled || typeof options === 'undefined') {\n\t    return;\n\t}\n\tfor ( var att in options) {\n\t    // Check that the attribute exists in the validOptions.\n\t    if (!validOptions[att]) {\n\t\tif (strict) {\n\t\t    this.logAndThrow(\"Invalid options attribute '\" + att + \"', valid attributes: \" + WLJSX.Object.toJSON(validOptions), callerName);\n\t\t} else {\n\t\t    continue;\n\t\t}\n\t    }\n\t    try {\n\t\t// Check that the attribute type is valid.\n\t\tthis.validateArgument(validOptions[att], options[att], callerName);\n\t    } catch (e) {\n\t\tthis.logAndThrow(\"Invalid options attribute '\" + att + \"'. \" + (e.message || e.description), callerName);\n\t    }\n\t}\n    },\n\n    /**\n     * Validates that each option attribute in the given options is from the one of the validators type.\n     * @Param options - the options to validate. @Param validatos - the valid types (in string format):\n     * validators = ['string','null','undefined',someFunction,'boolean'...]\n     * \n     */\n    validateAllOptionTypes : function(validators, options, callerName) {\n\tif (!this.isValidationEnabled || typeof options === 'undefined') {\n\t    return;\n\t}\n\tvar isValidAtt = false;\n\tfor ( var att in options) {\n\t    isValidAtt = false;\n\t    for ( var i = 0; i < validators.length; ++i) {\n\t\ttry {\n\t\t    // Check that the attribute type is valid.\n\t\t    this.verbose = false;\n\t\t    this.validateArgument(validators[i], options[att], callerName);\n\t\t    isValidAtt = true;\n\t\t    break;\n\t\t} catch (e) {\n\t\t    // do nothing\n\t\t}\n\t    }\n\t    this.verbose = true;\n\t    if (!isValidAtt) {\n\t\tthis.logAndThrow(\"Invalid options attribute '\" + att + \"' (\" + typeof (options[att]) + \"). Please use just the following types: \" + validators.join(\",\"), callerName);\n\t    }\n\t}\n    },\n\n    validateStringOrNull : function(arg, callerName) {\n\tif (!this.isValidationEnabled) {\n\t    return;\n\t}\n\tif ((typeof arg !== 'undefined') && (arg !== null) && (typeof arg !== 'string')) {\n\t    this.logAndThrow(\"Invalid argument value '\" + arg + \"', expected null or 'string'.\", callerName);\n\t}\n    },\n    \n    validateNumberOrNull : function(arg, callerName) {\n    \tif (!this.isValidationEnabled) {\n    \t    return;\n    \t}\n    \tif ((typeof arg !== 'undefined') && (arg !== null) && (typeof arg !== 'number')) {\n    \t    this.logAndThrow(\"Invalid argument value '\" + arg + \"', expected null or 'number'.\", callerName);\n    \t}\n    },\n        \n    validateBooleanOrNull : function(arg, callerName) {\n\tif (!this.isValidationEnabled) {\n\t    return;\n\t}\n\tif ((typeof arg !== 'undefined') && (arg !== null) && (typeof arg !== 'boolean')) {\n\t    this.logAndThrow(\"Invalid argument value '\" + arg + \"', expected null or 'boolean'.\", callerName);\n\t}\n    },\n    \n    validateObjectOrNull : function(arg, callerName) {\n\tif (!this.isValidationEnabled) {\n\t    return;\n\t}\n\tif ((typeof arg !== 'undefined') && (arg !== null) && (typeof arg !== 'object')) {\n\t    this.logAndThrow(\"Invalid argument value '\" + arg + \"', expected null or 'object'.\", callerName);\n\t}\n    },\n\n    validateArrayObjectOrNull : function(arg, callerName) {\n    \tif (!this.isValidationEnabled) {\n    \t    return;\n    \t}\n\n    \tif ((typeof arg !== 'undefined') && (arg !== null) && (!Array.isArray(arg))) {\t\n    \t\tthis.logAndThrow(\"Invalid argument value '\" + arg + \"', expected null or 'array'.\", callerName);\n    \t}\n    \t\n    },\n        \n    validateFunctionOrNull : function(arg, callerName) {\n\tif (!this.isValidationEnabled) {\n\t    return;\n\t}\n\tif ((typeof arg !== 'undefined') && (arg !== null) && (typeof arg !== 'function')) {\n\t    this.logAndThrow(\"Invalid argument value '\" + arg + \"', expected null or 'function'.\", callerName);\n\t}\n    },\n\t/**\n\t * Validates that the url is a valid url\n\t * Throws exception if not\n\t * @param validOptions\n\t * @param options\n\t * @param callerName\n\t */\n\tvalidateURLOrNull : function(url, callerName) {\n\t\tif (!this.isValidationEnabled || typeof url === 'undefined' || url == null) {\n\t\t\treturn;\n\t\t}\n\t\tvar pattern = /[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi;\n\t\tif(!url.match(pattern)) {\n\t\t\tthis.logAndThrow(\"Invalid URL : \" + url, callerName);\n\t\t}\n\t},\n\tvalidateDefined : function(arg, callerName) {\n\t\tif(typeof (arg) === 'undefined' || arg === null){\n\t\t\tthis.logAndThrow(\"Invalid argument value '\" + arg + \"', expected not empty string.\", callerName);\n\t\t}\n\t},\n    isDefined : function(arg) {\n        return(typeof (arg) === 'undefined' || arg === null)\n    },\n\n    validateNotEmptyString : function(arg, callerName) {\n\tif (!this.isValidationEnabled) {\n\t    return;\n\t}\n\tif ((typeof arg !== 'string') || arg.length == 0) {\n\t    this.logAndThrow(\"Invalid argument value '\" + arg + \"', expected not empty string.\", callerName);\n\t}\n    },\n\tisNullOrUndefined: function (object) {\n\t\treturn object === null || typeof object === 'undefined';\n\t},\n\tisString: function (object) {\n\t    return (typeof (object) === 'string');\n\t},\n    isBoolean: function (object) {\n        return (typeof (object) === 'boolean');\n    },\n    isNumber: function (object) {\n        return (typeof (object) === 'number');\n    },\n    isArray: function (object) {\n        return Array.isArray(object);\n    }\n};\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlconfig.js\n * ================================================================= \n */\n\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n__WLConfig = function() {\n    /*jshint strict:false, maxparams:4*/\n    var baseURL;\n    var applicationName;\n    var contextRoot;\n    var sdkProtocolVersion;\n    var serverRelativeTime;\n\n    this.__getBaseURL = function() {\n        if(typeof baseURL === 'undefined' || baseURL === null) {\n            baseURL = this.__getContext() + '/api';\n        }\n        return baseURL;\n    };\n\n    this.__setBaseURL = function(url) {\n        WL.Validators.validateURLOrNull(url, '__setBaseURL');\n        baseURL = url;\n    };\n\n    this.__getApplicationName = function() {\n        return applicationName;\n    };\n\n    this.__setApplicationName = function(app) {\n        WL.Validators.validateDefined(app, '__setApplicationName');\n        applicationName = app;\n    };\n\n    this.__setSDKProtocolVersion = function(protocolVersion) {\n        sdkProtocolVersion = protocolVersion;\n    }\n\n    this.__getSDKProtocolVersion = function () {\n        var data = {};\n        if(sdkProtocolVersion){\n            data['sdk_protocol_version'] = sdkProtocolVersion;\n        }\n        else{\n            data['sdk_protocol_version'] = 2;\n        }\n        return data;\n    };\n    \n    this.__getClientPlatform = function () {\n        return 'web';\n    };\n\n    this.__getApplicationData = function () {\n        var data = {};\n        data['clientPlatform'] = this.__getClientPlatform();\n        data['id'] = this.__getApplicationName();\n        return data;\n    };\n\n    this.__getServerRelativeTime = function () {\n        return WL.Validators.isNullOrUndefined(serverRelativeTime) ? 0 : serverRelativeTime;\n    };\n\n    this.__setServerRelativeTime = function (time) {\n        WL.Validators.validateNumberOrNull(time, '__setServerRelativeTime');\n        serverRelativeTime = time;\n    };\n\n    this.__getContext = function () {\n        return contextRoot;\n    };\n\n    this.__setContext = function (ctx) {\n        contextRoot = ctx;\n    };\n};\n\n__WL.prototype.Config = new __WLConfig;\nWL.Config = new __WLConfig;\n\n\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlproperties.web.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*\n * NOTICE: All server errors MUST be defined with same values in the ErrorCode\n * java enumeration.\n */\nvar __WLErrorCode = {\n    UNEXPECTED_ERROR: 'UNEXPECTED_ERROR',\n    API_INVOCATION_FAILURE: 'API_INVOCATION_FAILURE',\n    USER_INSTANCE_ACCESS_VIOLATION: 'USER_INSTANCE_ACCESS_VIOLATION',\n    AUTHENTICATION_REQUIRED: 'AUTHENTICATION_REQUIRED',\n    DOMAIN_ACCESS_FORBIDDEN: 'DOMAIN_ACCESS_FORBIDDEN',\n\n    // Client Side Errors\n    UNRESPONSIVE_HOST: 'UNRESPONSIVE_HOST',\n    LOGIN_FAILURE: 'LOGIN_FAILURE',\n    REQUEST_TIMEOUT: 'REQUEST_TIMEOUT',\n    PROCEDURE_ERROR: 'PROCEDURE_ERROR',\n    UNSUPPORTED_VERSION: 'UNSUPPORTED_VERSION',\n    UNSUPPORTED_BROWSER: 'UNSUPPORTED_BROWSER',\n    DISABLED_COOKIES: 'DISABLED_COOKIES',\n    CONNECTION_IN_PROGRESS: 'CONNECTION_IN_PROGRESS',\n    AUTHORIZATION_FAILURE: 'AUTHORIZATION_FAILURE',\n    CHALLENGE_HANDLING_CANCELED: 'CHALLENGE_HANDLING_CANCELED',\n    MINIMUM_SERVER: \"MINIMUM_SERVER\"\n};\n\nWL.Language = {\n  DIRECTION_LTR: 0,\n  DIRECTION_RTL: 1,\n  LANGUAGES_RTL: ['he', 'iw', 'ar']\n};\n\n__WL.prototype.ErrorCode = __WLErrorCode;\nWL.ErrorCode = __WLErrorCode;\n\n\n/**\n * ================================================================= \n * Source file taken from :: wllocalstoragedb.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n/*globals WLConfig */\n\nvar isSessionDefault = false;\n\n__WLLocalStorageDB = function() {\n    /*jshint strict:false, maxparams:4*/\n\n    var appNamePrefix;\n\n    // By Default, we work with localStorage, unless it is changed during a set/get\n    var storage = window.localStorage;\n\n\t/**\n     * Initializes the database and verifies it is accessible\n     * @returns {*}\n     */\n    this.init = function() {\n        appNamePrefix = WL.Config.__getApplicationName();\n    };\n\n    /**\n     * Sets an item in the database\n     * @param key\n     * @param value\n     * @param options {{session : boolean, global : boolean}}\n     * @returns {*}\n     */\n    this.setItem = function(key, value, options) {\n        var finalOptions = initOptions(options);\n        var finalKey = buildKey(key, finalOptions);\n        var finalValue = value ? JSON.stringify(value) : null;\n        storage.setItem(finalKey, finalValue);\n    };\n\n    /**\n     * Gets an item in the database\n     * @param key\n     * @param options {{session : boolean, global : boolean}}\n     * @returns {string - JSON representation of value for given key}\n     */\n    this.getItem = function(key, options) {\n        var finalOptions = initOptions(options);\n        var finalKey = buildKey(key, finalOptions);\n        var value = storage.getItem(finalKey);\n        return value ? JSON.parse(value) : null;\n    };\n\n    /**\n     * Removes an item in the database\n     * @param key\n     * @param options {{session : boolean, global : boolean}}\n     * @returns {*}\n     */\n    this.removeItem = function(key, options) {\n        var finalOptions = initOptions(options);\n        var finalKey = buildKey(key, finalOptions);\n        storage.removeItem(finalKey);\n    };\n\n    /**\n     * Takes the options the user entered (if any) and appends them to the default\n     * options, overriding the default values\n     * @param userOptions\n     * @returns {{global: boolean, session: boolean}}\n     */\n    function initOptions(userOptions) {\n        var options = {\n            'session' : isSessionDefault,\n            'global' : false\n        };\n        for (var property in userOptions) {\n            options[property] = userOptions[property];\n        }\n\n        // Init the storage\n        storage = options.session ? window.sessionStorage : window.localStorage;\n\n        return options;\n    }\n\n    function buildKey(key, options) {\n        return options.global ? key : appNamePrefix + '.' + key;\n    }\n};\n\nWL.LocalStorageDB = new __WLLocalStorageDB();\n\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlclient.web.js\n * ================================================================= \n */\n\n/*\n * Licensed Materials - Property of IBM\n * 5725-I43 (C) Copyright IBM Corp. 2006, 2013. All Rights Reserved.\n * US Government Users Restricted Rights - Use, duplication or\n * disclosure restricted by GSA ADP Schedule Contract with IBM Corp.\n */\n\n/* Copyright (C) Worklight Ltd. 2006-2012.  All rights reserved. */\n\n\n__WLClient = function() {\n\n    this.__chMap = {};\n    this.__globalHeaders = {};\n    var userInfo = {};\n    var initOptions = {};\n    var MESSAGE_ID = 'messageId';\n\n    var isConnecting = false;\n\n    this.addGlobalHeader = function (headerName, headerValue) {\n        this.__globalHeaders[headerName] = headerValue;\n    };\n\n    this.__getGlobalHeaders = function(onSuccess){\n        return this.__globalHeaders;\n    };\n\n    this.getEnvironment = function () {\n        return 'web';\n    };\n\n    this.getMessageID = function() {\n        return MESSAGE_ID;\n    };\n\n\n    this.init = function (initOptions) {\n        var dfd = WLJQ.Deferred();\n        setInitParams(initOptions);\n\n        // Init the DBs\n        WL.DAO.init();\n\n        // init analytics - analytics is defined in AMDWrapper.js\n        wlanalytics.init(WL.BrowserManager.getWLUniqueID(),WL.Config.__getApplicationName(), WL.Config.__getContext());\n\n        var hasWlCommonInit = window.wlCommonInit !== undefined;\n        //Call to load localized user visible messages based on device locale.\n        WL.Utils.setLocalization().always(function () {\n            WL.CertManager.init().then(\n            function(){\n                if (hasWlCommonInit) {\n                    wlCommonInit();\n                }\n                dfd.resolve();\n            }\n            ,function(error) {\n                dfd.reject(error);\n            });\n        });\n\n        if(!hasWlCommonInit) {\n            // We return a promise onlyWL if the user didn't implement wlCommonInit();\n            return dfd.promise();\n        }\n    };\n\n    function setInitParams(params) {\n        WL.Validators.enableValidation();\n\n        // assign params to initOptions inside WL.Client class\n        initOptions = params;\n\n        var mfpContextRoot = params['mfpContextRoot'];\n        var sdkProtocolVersion = params['sdkProtocolVersion'];\n        WL.Validators.validateDefined(mfpContextRoot, 'init');\n\t\n        if(params['sessionMode'] !== undefined){\n          if(params['sessionMode'] === true || params['sessionMode'] === false){\n               isSessionDefault = params['sessionMode'];\n          }else{\n               console.log('sessionMode has to be only either true or false and cannot be any other value. Default is false.');\n          }\n        }\n\t\n        var appId = params['applicationId'];\n        WL.Validators.validateDefined(appId, 'init');\n\n        // Pass to config\n        WL.Config.__setContext(mfpContextRoot);\n        WL.Config.__setApplicationName(appId);\n        WL.Config.__setSDKProtocolVersion(sdkProtocolVersion);\n    }\n\n    this.invokeProcedure = function (invocationData, options) {\n        WL.Validators.validateOptions({\n            onSuccess : 'function',\n            onFailure : 'function',\n            invocationContext : function() {\n            },\n            onConnectionFailure : 'function',\n            timeout : 'number',\n            fromChallengeRequest : 'boolean'\n        }, options, 'WL.Client.invokeProcedure');\n\n        options = extendWithDefaultOptions(options);\n\n        var blocked = false;\n\n        function onInvokeProcedureSuccess(transport) {\n            if (!blocked) {\n                blocked = true;\n                if (!transport.responseJSON || (transport.responseJSON && !transport.responseJSON.isSuccessful)) {\n                    var failResponse = new WL.Response(transport, options.invocationContext);\n                    failResponse.errorCode = WL.ErrorCode.PROCEDURE_ERROR;\n                    failResponse.errorMsg = 'Procedure invocation error.';\n                    failResponse.invocationResult = transport.responseJSON;\n                    if (!failResponse.invocationResult) {\n                    }\n                    else if (failResponse.invocationResult.errors) {\n                        failResponse.errorMsg += \" \" + failResponse.invocationResult.errors;\n                    }\n                    WL.Logger.error(failResponse.errorMsg);\n                    options.onFailure(failResponse);\n                } else {\n                    var response = new WL.Response(transport, options.invocationContext);\n                    response.invocationResult = transport.responseJSON;\n                    options.onSuccess(response);\n                }\n            }\n\n        }\n\n        function onInvokeProcedureFailure(transport) {\n            if (!blocked) {\n                blocked = true;\n                setConnected(false);\n                var errorCode = transport.responseJSON.errorCode;\n                if (options.onConnectionFailure && (errorCode == WL.ErrorCode.UNRESPONSIVE_HOST || errorCode == WL.ErrorCode.REQUEST_TIMEOUT)) {\n                    options.onConnectionFailure(new WL.FailResponse(transport, options.invocationContext));\n                } else {\n                    options.onFailure(new WL.FailResponse(transport, options.invocationContext));\n                }\n            }\n        }\n\n        var resourceRequest = {};\n\n        if (!WLJSX.Object.isUndefined(options.timeout)) {\n            resourceRequest = new WLResourceRequest(\"/adapters/\" + invocationData.adapter + \"/\" + invocationData.procedure, WLResourceRequest.GET, options.timeout);\n        } else {\n            resourceRequest = new WLResourceRequest(\"/adapters/\" + invocationData.adapter + \"/\" + invocationData.procedure, WLResourceRequest.GET);\n        }\n\n        //add parameters\n        resourceRequest.setQueryParameter(\"params\", WLJSX.Object.toJSON(invocationData.parameters));\n\n        var environment = WL.Client.getEnvironment();\n\n        resourceRequest.send().then(\n            onInvokeProcedureSuccess,\n            onInvokeProcedureFailure\n        );\n    };\n\n\n    this.pinTrustedCertificatePublicKey = function(certificateFilename){};\n\n    this.reloadApp = function () {\n        document.location.reload();\n    };\n\n    this.setHeartBeatInterval = function (interval) {\n        WL.Validators.validateArguments(['number'], arguments, 'WL.Client.setHeartBeatInterval');\n        if (typeof(WLAuthorizationManager) !== 'undefined' && WLAuthorizationManager !== null) {\n            WLAuthorizationManager.__sendHeartBeat(interval);\n        }\n    };\n\n    this.setDeviceDisplayName = function(deviceDisplayName, options) {\n        WL.Validators.validateArguments(['string', WL.Validators.validateObjectOrNull], arguments, 'WL.Client.setDeviceDisplayName');\n\n        if ( typeof options !== \"undefined\") {\n            WL.Validators.validateOptions({\n                onSuccess : 'function',\n                onFailure : 'function'\n            }, options, 'WL.Client.setDeviceDisplayName');\n        } else {\n            options = {};\n            options.onSuccess = function(){};\n            options.onFailure = function(){};\n        }\n\n        WL.DeviceAuth.__setDeviceDisplayName(deviceDisplayName, options.onSuccess, options.onFailure);\n    };\n\n    this.getDeviceDisplayName = function(options) {\n\n        WL.Validators.validateArguments(['object'], arguments, 'WL.Client.getDeviceDisplayName');\n\n        WL.Validators.validateOptions({\n            onSuccess : 'function',\n            onFailure : 'function'\n        }, options, 'WL.Client.getDeviceDisplayName');\n\n        WL.DeviceAuth.__getDeviceDisplayName(options.onSuccess, options.onFailure);\n    };\n\n\n    this.removeGlobalHeader = function (headerName) {\n        delete this.__globalHeaders[headerName];\n    };\n\n\n    this.getCookies = function () {};\n\n\n    this.setCookie = function (cookie) {};\n\n\n    this.deleteCookie = function (name) {};\n\n\n    this.getLanguage = function() {};\n\n    this.isWl401 = function(response) {\n        if (response.status == 401) {\n            var challengesHeader = response.getHeader(\"WWW-Authenticate\");\n            if (( typeof challengesHeader !== \"undefined\") && (challengesHeader == \"MFP-Challenge\")) {\n                return true;\n            }\n        }\n        return false;\n    };\n    \n\t/**\n\t * @ignore\n\t * Go over all non MFP challenge handlers and call it's canHandleResponse function.\n\t * Return true if ChallengeHander was called\n\t */\n\tthis.isGatewayResponse = function(response){\n\n\t\tfor (var processorRealm in WL.Client.__chMap) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(WL.Client.__chMap, processorRealm)) {\n\t\t\t\tvar handler = WL.Client.__chMap[processorRealm];\n\t\t\t\tif (!handler.isWLHandler && handler.canHandleResponse(response)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n    /**\n     * @ignore\n     * check is a IBM MobileFirst Platform 403 response\n     */\n    this.isWl403 = function(response) {\n        if (response.status == 403 || response.status == 222) {\n            if (( typeof response.responseJSON !== \"undefined\") && (response.responseJSON != null) && response.responseJSON[\"failures\"]) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    this.checkResponseForChallenges = function(wlRequest, response, responseForPostAnswersRealm) {\n        var containsChallenges = false;\n\n        // iterate over successes in json\n        if (( typeof response.responseJSON !== \"undefined\") && (response.responseJSON != null) && (response.responseJSON[\"successes\"] !== \"undefined\") && (response.responseJSON[\"successes\"] != null)) {\n            successes = response.responseJSON[\"successes\"];\n            handleSuccess(successes);\n        }\n\n        if (this.isWl401(response)) {\n            var challengeRealms = response.responseJSON.challenges;\n            wlRequest.setExpectedAnswers(challengeRealms);\n            var realm = getDirectUpdateRealm(challengeRealms);\n            if (realm) {\n                executeChallenge(challengeRealms, realm);\n            } else {\n                for (realm in challengeRealms) {\n                    executeChallenge(challengeRealms, realm);\n                }\n            }\n            containsChallenges = true;\n        }\n        // check if wl403\n        else if (this.isWl403(response)) {\n            var wlFailure = response.responseJSON[\"failures\"];\n            isConnecting = false;\n            // only one failure in this type of message\n            for (var realm in wlFailure) {\n                if (Object.prototype.hasOwnProperty.call(wlFailure, realm)) {\n                    handler = this.__chMap[realm];\n                    if (handler != null && typeof handler !== 'undefined') {\n                        handler.handleFailure(wlFailure[realm], wlRequest, response);\n                        handler.clearWaitingList();\n                        wlRequest.onFailure(response);\n                    }\n                }\n            }\n            containsChallenges = true;\n        }\n        else {\n            for (var processorRealm in WL.Client.__chMap) {\n                if (Object.prototype.hasOwnProperty.call(WL.Client.__chMap, processorRealm)) {\n                    var handler = WL.Client.__chMap[processorRealm];\n                    if (!handler.isWLHandler && handler.canHandleResponse(response)) {\n                        handler.startChallengeHandling(wlRequest, response);\n                        containsChallenges = true;\n                        break;\n                    }\n                }\n            }\n        }\n        // Handle successes\n        function handleSuccess(successes) {\n            for (var securityCheck in successes) {\n                if (Object.prototype.hasOwnProperty.call(successes, securityCheck)) {\n                    // always add the identity to userInfo even if there is\n                    // no cp to handle it (like SingleIdentity)\n                    userInfo[securityCheck] = successes[securityCheck];\n                    var cp = WL.Client.__chMap[securityCheck];\n                    if ( typeof cp !== \"undefined\") {\n                        if (cp.isWLHandler) {\n                            cp.handleSuccess(successes[securityCheck]);\n                            cp.releaseWaitingList();\n                        }\n                    }\n                }\n            }\n        }\n\n        /**\n         * Search for the direct update scope in an array of realms\n         * @param realms - an array of realms\n         * @returns the update realm if it found or null if it doesn't\n         */\n        function getDirectUpdateRealm(realms) {\n\n            for (var scope in realms) {\n                if (scope == 'directUpdate') {\n                    return scope;\n                }\n            }\n\n            return null;\n        }\n\n        /**\n         * handle the challenge (execute it if everything is ok)\n         * @param challengeRealms - an array of realms that the given realm is part of\n         * @param realm - the realm of the challenge that needs to be execute\n         */\n        function executeChallenge(challengeRealms,realm)\n        {\n            if (Object.prototype.hasOwnProperty\n                    .call(challengeRealms, realm)) {\n                // get the correct challenge\n                var handler = WL.Client.__chMap[realm];\n                if (handler == null || typeof handler == 'undefined') {\n                    var errorMsg = \"unknown challenge arrived, cannot proccess challenge handler: \"\n                        + realm + \". register challenge handler using WL.Client.createSecurityCheckChallengeHandler()\";\n                    WL.Logger.error(errorMsg);\n                    var transportFailure = {\n                        status: -1,\n                        responseJSON: {\n                            errorCode: WL.ErrorCode.UNEXPECTED_ERROR,\n                            errorMsg: errorMsg\n                        }\n                    };\n                    wlRequest.onFailure(transportFailure);\n\n                } else {\n                    handler.startChallengeHandling(wlRequest,\n                        challengeRealms[realm]);\n                }\n            }\n        }\n\n        return containsChallenges;\n    };\n\n\n\n    this.createGatewayChallengeHandler = function(gatewayName) {\n            // Creates abstract challenge handler\n            var challengeHandler = new AbstractChallengeHandler(gatewayName);\n            challengeHandler.isWLHandler = false;\n\n            // Extends it by adding new methods (can also override methods)\n\n            /**\n             * User calls this function when the the challange was handled successfully.\n             * When a success is submitted, the state of successes is checked for all chalanges issued per original request.\n             * What this means is that, if all challenges are succesfully met, the original message would be resent automagically.\n             */\n            challengeHandler.submitSuccess = function() {\n                // ch has done its job, now we can set the activRequest to null.\n                challengeHandler.activeRequest.removeExpectedAnswer(this.realm);\n                challengeHandler.activeRequest = null;\n                challengeHandler.releaseWaitingList();\n\n            };\n\n            /**\n             * Must be implemented by developer.\n             *\n             * This method will be invoked by the IBM MobileFirst Platform for every server response.\n             * It is responsible to detect whether server response contains data\n             * that should be processed by this challenge handler.\n             */\n            challengeHandler.canHandleResponse = function(transport) {\n                return false;\n            };\n\n            /**\n             * This method should be used in a challenge handler to submit authentication of a form, in case of form\n             * based authentication.\n             */\n            challengeHandler.submitLoginForm = function(reqURL, options, submitLoginFormCallback) {\n                var timer = null;\n\n                WL.Logger.debug(\"Request [login]\");\n\n                function onUnresponsiveHost(transport) {\n                    if (isTimeout()) {\n                        return;\n                    }\n                    cancelTimer();\n\n                    WLJSX.Ajax.WLRequest.setConnected(false);\n                    submitLoginFormCallback(transport);\n                }\n\n                function onLoginFormResponse(transport) {\n                    if (isTimeout()) {\n                        return;\n                    }\n                    cancelTimer();\n                    submitLoginFormCallback(transport);\n                }\n\n                setTimer(WLJSX.Ajax.WLRequest.options.timeout);\n\n                var requestHeaders = WL.CookieManager.createCookieHeaders();\n\n                // add headers\n                if (options && options.headers) {\n                    var headers = options.headers;\n                    if (( typeof headers != \"undefined\") && (headers != null)) {\n                        for (var headerName in headers) {\n                            if (Object.prototype.hasOwnProperty.call(headers, headerName)) {\n                                requestHeaders[headerName] = headers[headerName];\n                            }\n                        }\n                    }\n                }\n\n                var reqOptions = {\n                    method : 'post',\n                    contentType : 'application/x-www-form-urlencoded',\n                    onSuccess : onLoginFormResponse,\n                    onFailure : onLoginFormResponse,\n                    // Unresponsive host: Some desktops treat as success if not\n                    // defined explicitly.\n                    on0 : onUnresponsiveHost.bind(this),\n                    requestHeaders : requestHeaders\n                };\n\n                \n                reqOptions.parameters = options.parameters;\n\n                var finalUrl = null;\n\n                if (reqURL.indexOf(\"http\") == 0 && reqURL.indexOf(':') > 0) {\n                    finalUrl = reqURL;\n                } else {\n                    finalUrl = WL.Utils.createAPIRequestURL(reqURL);\n                }\n\n                var ajaxRequest = null;\n\n                __sendRequest();\n\n                function __sendRequest() {\n                    ajaxRequest = new WLJSX.Ajax.Request(finalUrl, reqOptions);\n                }\n\n                function setTimer(timeout) {\n                    if (timer !== null) {\n                        window.clearTimeout(timer);\n                    }\n                    timer = window.setTimeout(onTimeout, timeout);\n                }\n\n                function onTimeout() {\n                    timer = null;\n                    if (ajaxRequest !== null) {\n                        ajaxRequest.transport.abort();\n                    }\n\n                    var transport = {};\n                    transport.responseJSON = {\n                        errorCode : WL.ErrorCode.REQUEST_TIMEOUT,\n                        errorMsg : WL.ClientMessages.requestTimeout\n                    };\n                    transport.responseText = null;\n                    submitLoginFormCallback(transport);\n                }\n\n                function cancelTimer() {\n                    if (timer !== null) {\n                        window.clearTimeout(timer);\n                        timer = null;\n                    }\n                }\n\n                function isTimeout() {\n                    return (timer === null);\n                }\n\n            };\n\n\n            return challengeHandler;\n    };\n\n\n    this.createSecurityCheckChallengeHandler = function (securityCheckName) {\n            // Creates SUPER challenge processor\n            var challengeHandler = new AbstractChallengeHandler(securityCheckName);\n            challengeHandler.isWLHandler = true;\n\n            challengeHandler.MAX_NUMBER_OF_FAILURES = 3;\n            challengeHandler.numOfFailures = 0;\n\n            // Extends it by adding new methods (can also override methods)\n            challengeHandler.submitChallengeAnswer = function(answer) {\n                if (( typeof answer === \"undefined\") || answer == null) {\n                    challengeHandler.activeRequest.removeExpectedAnswer(this.realm);\n                } else {\n                    challengeHandler.activeRequest.submitAnswer(this.realm, answer);\n                }\n                // cp has done its job, now we can set the activRequest to null.\n                challengeHandler.activeRequest = null;\n            };\n\n            // when a WL success arrives, this user method is called.\n            challengeHandler.handleSuccess = function(identity) {\n\n            };\n\n            // when a WL failure arrives, this user method is called.\n            challengeHandler.handleFailure = function(err) {\n\n            };\n\n            // Returns it\n            return challengeHandler;\n\n    };\n\n\n    function AbstractChallengeHandler(securityCheckName) {\n        this.realm = securityCheckName;\n        this.isWLHandler = false;\n        this.activeRequest = null;\n        this.requestWaitingList = [];\n\n        /**\n         * @ignore\n         * in case this is the first request that is associated with the\n         * challenge, set activeRequest and handleChallenge. If this is not the\n         * first request, we place it in a queue for handling once we finish\n         * handling the first request (just get the result).\n         */\n        this.startChallengeHandling = function(wlRequest, obj) {\n            if (this.activeRequest == null) {\n                this.activeRequest = wlRequest;\n            } else if (WLJSX.Object.isUndefined(wlRequest.options.fromChallengeRequest)) {\n                this.requestWaitingList.push(wlRequest);\n                return;\n            }\n\n            this.handleChallenge(obj);\n\n        };\n\n        /**\n         * @ignore\n         * Must be implemented by developer.\n         *\n         * This method is responsible for actual challenge handling.\n         * It will be invoked by the IBM MobileFirst Platform in case canHandleResponse() API has\n         * returned true value\n         *\n         */\n        this.handleChallenge = function(obj) {\n        };\n\n        /**\n         * @ignore\n         * In case of cancel we need to clear the waiting list of request,\n         * without further handling.\n         */\n        this.clearWaitingList = function() {\n            this.requestWaitingList = [];\n        };\n\n        /**\n         * @ignore\n         * When processing is successful (onSuccess) we assume the challenge is\n         * answered, and does need further handling so we remove the expected\n         * answer from the waiting list. Then we clear the waiting list.\n         */\n        this.releaseWaitingList = function() {\n            if (this.requestWaitingList.length > 0) {\n                for (var i = 0; i < this.requestWaitingList.length; i++) {\n                    this.requestWaitingList[i].removeExpectedAnswer(this.realm);\n                }\n            }\n            this.requestWaitingList = [];\n        };\n\n        /**\n         * @ignore\n         * This method is used to cancel the processing of the challenge\n         * Because this is a failure to authenticate, the original message will be discarded\n         * (i.e. will not be sent again, even if all other challenges are successfull)\n         */\n        this.cancel = function() {\n            isConnecting=false;\n            // store active request before calling to clearWaitingList, because of later call on onFailure\n            var request = this.activeRequest;\n            this.activeRequest = null;\n            this.clearWaitingList();\n            if (request !== null && typeof(request.options) !== 'undefined' &&\n                typeof(request.options.onAuthRequestFailure) !== 'undefined') {\n                var transport = {\n                    status : 0,\n                    responseJSON : {\n                        errorCode: WL.ErrorCode.CHALLENGE_HANDLING_CANCELED,\n                        errorMsg: 'Challenge handler operation was cancelled.'\n                    },\n                    responseText : 'Challenge handler operation was cancelled.'\n                };\n\n                var err = new WL.Response(transport, null);\n                request.options.onAuthRequestFailure(err);\n            }\n        };\n\n        this.moveToWaitingList = function(wlRequest) {\n            this.requestWaitingList.push(wlRequest);\n        };\n\n        this.removeFromWaitingList = function(wlRequest) {\n            for (var i = 0; i < this.requestWaitingList.length; i++) {\n                if (this.requestWaitingList[i] === wlRequest) {\n                    spliced = this.requestWaitingList.splice(i - 1, 1);\n                    break;\n                }\n            }\n        };\n\n        WL.Client.__chMap[securityCheckName] = this;\n    }\n\n    /*\n     * Check if the user added a default handler for OnRemoteDisableDenial and\n     * if so, activate it. If not then call the defaultRemoteDisableDenial.\n     */\n    this.__handleOnRemoteDisableDenial = function(defaultonErrorRemoteDisableDenial, that, msg, downloadLink) {\n        if (initOptions.onErrorRemoteDisableDenial) {\n            initOptions.onErrorRemoteDisableDenial(msg, downloadLink);\n        } else {\n            defaultonErrorRemoteDisableDenial(that, msg, downloadLink);\n        }\n    };\n\n    this.isShowCloseButtonOnRemoteDisable = function() {\n      return initOptions.showCloseOnRemoteDisableDenial ? true : false;\n    };\n};\n\n\n__WL.prototype.Client = new __WLClient;\nWL.Client = new __WLClient;\n\n\n/**\n * ================================================================= \n * Source file taken from :: jwt.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*globals WLAuthorizationManager, WLConfig, WLJSX */\n\n/*jshint strict:false, maxparams:4*/\n\n\n\nWL.JWT = WLJSX.Class.create({\n    iss :  null,\n    sub : null,\n    exp : 0,\n    iat : 0,\n    jti : null,\n    aud : null,\n\n    initialize : function JWT (jti, aud) {\n        var DEFAULT_JWT_EXP_MILLIS = 60 * 1000;\n        var currentTime = new Date().getTime() + WL.Config.__getServerRelativeTime();\n\n        this.iss = WL.Config.__getApplicationName() + '$' + WL.Config.__getClientPlatform();\n        this.sub = WLAuthorizationManager.__getClientId();\n        this.exp = currentTime + DEFAULT_JWT_EXP_MILLIS;\n        this.iat = currentTime;\n        this.jti = typeof jti === 'undefined' ? null : jti;\n        this.aud = typeof aud === 'undefined' ? null : aud;\n    }\n});\n\n/**\n * ================================================================= \n * Source file taken from :: accessToken.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*globals WLJSX */\n\n/*jshint strict:false, maxparams:4*/\nWL.AccessToken = WLJSX.Class.create({\n    value : null,\n    expiration : 0,\n    scope : null,\n    asAuthorizationRequestHeader : null,\n    asFormEncodedBodyParameter : null,\n\n    initialize : function(token, expiration, scope) {\n        var currentTime = new Date().getTime();\n        this.value = token;\n\n        // Expiration is in seconds, we transform to millis and add current time\n        this.expiration = currentTime + (expiration * 1000);\n        this.scope = scope;\n        this.asAuthorizationRequestHeader = 'Bearer ' + token;\n        this.asFormEncodedBodyParameter = 'access_token=' + token;\n    }\n});\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlbrowsermanager.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n__WLBrowserManager = function() {\n    /*jshint strict:false, maxparams:4*/\n    var uniqueId;\n    var localDeviceDisplayName;\n\n    /**\n     * Unique ID taken from different parts of the browser information\n     * @returns {*}\n     */\n    this.getWLUniqueID = function() {\n        var key = 'com.mfp.browser.uniqueid';\n\n        // BrowserID should be saved cross applications\n        var globalOptions = {'global' : true};\n        \n        var uniqueId = WL.DAO.getItem(key, globalOptions);\n        if(WL.Validators.isNullOrUndefined(uniqueId)) {\n            uniqueId = generateGUID();\n            WL.DAO.setItem(key, uniqueId, globalOptions);\n        }\n        return uniqueId;\n    };\n\n    this.__setLocalDeviceDisplayName = function(name) {\n        localDeviceDisplayName = name;\n    };\n\n    /**\n     * Browser Object that is used for registration\n     * @returns {{}}\n     */\n    this.getDeviceData = function () {\n        var data = {};\n        data['id'] = this.getWLUniqueID();\n        data['platform'] = getUserAgent();\n        data['hardware'] = getPlatform();\n        data['deviceDisplayName'] = localDeviceDisplayName;\n        if (WL.Config.__getSDKProtocolVersion().sdk_protocol_version >= 2 && WL.Crypto.cryptoFlag == true) {\n            data['sdkVersion'] = WL.Config.__getSDKProtocolVersion().sdk_protocol_version;\n        }\n        return data;\n    };\n\n    function getUserAgent() {\n        return window.navigator.userAgent;\n    }\n\n    function getPlatform() {\n        return window.navigator.platform;\n    }\n\n    /*\n    Generates a unique ID based on the random information\n     */\n    function generateGUID() {\n        function s4() {\n            return Math.floor((1 + Math.random()) * 0x10000)\n                .toString(16)\n                .substring(1);\n        }\n        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n            s4() + '-' + s4() + s4() + s4();\n    }\n};\n\n\n__WL.prototype.BrowserManager = new __WLBrowserManager;\nWL.BrowserManager = new __WLBrowserManager;\n\n\n/**\n * ================================================================= \n * Source file taken from :: ajax.web.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*globals WLJSX, WL, escape, unescape*/\n\n/*jshint strict:false*/\n\nwindow.WLJSX.Ajax = {\n    getTransport: function() {\n        var tr = null;\n        try {\n            tr = new XMLHttpRequest();\n        } catch (e) {}\n\n        return tr;\n    }\n};\n\nwindow.WLJSX.Ajax.Request = WLJSX.Class.create({\n    _complete: false,\n\n    initialize: function(url, options) {\n        this.options = {\n            method: 'post',\n            asynchronous: true,\n            contentType: 'application/json',\n            encoding: 'UTF-8',\n            parameters: '',\n            evalJSON: true,\n            evalJS: true\n        };\n        WLJSX.Object.extend(this.options, options || {});\n\n        this.options.method = this.options.method.toLowerCase();\n        this.transport = window.WLJSX.Ajax.getTransport();\n\n        this.request(url);\n    },\n\n    request: function(url) {\n        this.url = url;\n        this.method = this.options.method;\n        var params = WLJSX.Object.isString(this.options.parameters) ?\n            this.options.parameters : WLJSX.Object.toJSON(this.options.parameters);\n\n        if (this.method !== 'get' && this.method !== 'post' && this.method !== 'put') {\n            params += (params ? '&' : '') + '_method=' + this.method;\n            this.method = 'post';\n        }\n\n        if (params && this.method === 'get') {\n            // Query params\n            params = WLJSX.Object.toQueryString(this.options.parameters);\n            this.url += ((this.url.indexOf('?') > -1) ? '&' : '?') + params;\n        }\n\n        if (params && this.method.toLowerCase() === 'post' || this.method.toLowerCase() === 'put') {\n            if(this.options.contentType === 'application/x-www-form-urlencoded') {\n                // Send the body as form\n                params = WLJSX.Object.toQueryString(this.options.parameters);\n            } else {\n                // Send body as JSON\n                params = WLJSX.Object.toJSON(this.options.parameters);\n            }\n        }\n\n        try {\n            var response = new window.WLJSX.Ajax.Response(this);\n            if (this.options.onCreate) {\n                this.options.onCreate(response);\n            }\n\n            this.transport.open(this.method.toUpperCase(), this.url, this.options.asynchronous);\n\n            this.transport.timeout = this.options.timeout;\n\n            if (this.options.asynchronous) {\n                this.respondToReadyState.bind(this).defer(1);\n            }\n\n            this.transport.onreadystatechange = this.onStateChange.bind(this);\n            this.setRequestHeaders();\n\n            /*jshint eqeqeq:false*/\n            this.body = (this.method == 'post' || this.method == 'put')? (this.options.postBody || params) : null;\n            this.transport.send(this.body);\n\n            /* Force Firefox to handle ready state 4 for synchronous requests */\n            if (!this.options.asynchronous && this.transport.overrideMimeType) {\n                this.onStateChange();\n            }\n\n        } catch (e) {\n            this.dispatchException(e);\n        }\n    },\n\n    onStateChange: function() {\n        var readyState = this.transport.readyState;\n        /*jshint eqeqeq:false*/\n        if (readyState > 1 && !((readyState == 4) && this._complete)) {\n            this.respondToReadyState(this.transport.readyState);\n        }\n    },\n\n    setRequestHeaders: function() {\n        var headers = {\n            'X-Requested-With': 'XMLHttpRequest',\n            'Accept': 'text/javascript, text/html, application/xml, text/xml, */*',\n            'Accept-Language': WL.App.__getDeviceLocale()\n        };\n\n        /*jshint eqeqeq:false*/\n        if (this.method == 'post' || this.method.toLowerCase() === 'put') {\n            headers['Content-type'] = this.options.contentType + (this.options.encoding ? '; charset=' + this.options.encoding : '');\n\n            /* Force \"Connection: close\" for older Mozilla browsers to work\n             * around a bug where XMLHttpRequest sends an incorrect\n             * Content-length header. See Mozilla Bugzilla #246651.\n             */\n            if (this.transport.overrideMimeType && (navigator.userAgent.match(/Gecko\\/(\\d{4})/) || [0, 2005])[1] < 2005) {\n                headers['Connection'] = 'close';\n            }\n        }\n\n        if (typeof this.options.requestHeaders == 'object') {\n            var extras = this.options.requestHeaders;\n\n            if (WLJSX.Object.isFunction(extras.push)) {\n                for (var i = 0, length = extras.length; i < length; i += 2) {\n                    headers[extras[i]] = extras[i + 1];\n                }\n            }\n            else {\n                /*jshint forin:false*/\n                for (var key in extras) {\n                    var value = extras[key];\n                    headers[key] = (value === null || typeof(value) == 'undefined') ? '' : value;\n                }\n            }\n        }\n        for (var name in headers) {\n            this.transport.setRequestHeader(name, unescape(encodeURIComponent(headers[name])));\n        }\n    },\n\n    success: function() {\n        var status = this.getStatus();\n        if (status === 0 && this.isSameOrigin() === false) {\n            return false;\n        }\n        /*jshint eqeqeq:false*/\n        return !status || (status >= 200 && status < 300) || status == 304 || status == 302;\n    },\n\n    getStatus: function() {\n        try {\n            if (this.transport.status === 1223) {\n                return 204;\n            }\n            return this.transport.status || 0;\n        } catch (e) {\n            return 0;\n        }\n    },\n\n    respondToReadyState: function(readyState) {\n        var state = window.WLJSX.Ajax.Request.Events[readyState],\n            response = new window.WLJSX.Ajax.Response(this);\n\n        /*jshint eqeqeq:false*/\n        if (state == 'Complete') {\n            try {\n                this._complete = true;\n                (this.options['on' + response.status] || this.options['on' + (this.success() ? 'Success' : 'Failure')] || WLJSX.emptyFunction)(response, response.headerJSON);\n            } catch (e) {\n                this.dispatchException(e);\n            }\n\n            var contentType = response.getHeader('Content-type');\n            if (this.options.evalJS == 'force' || (this.options.evalJS &&\n                this.isSameOrigin() &&\n                contentType &&\n                contentType.match(/^\\s*(text|application)\\/(x-)?(java|ecma)script(;.*)?\\s*$/i))) {\n                this.evalResponse();\n            }\n        }\n\n        try {\n            (this.options['on' + state] || WLJSX.emptyFunction)(response, response.headerJSON);\n        } catch (e) {\n            this.dispatchException(e);\n        }\n\n        if (state == 'Complete') {\n            this.transport.onreadystatechange = WLJSX.emptyFunction;\n        }\n    },\n\n    isSameOrigin: function() {\n        var m = this.url.match(/^\\s*https?:\\/\\/[^\\/]*/);\n        var url = location.protocol + '//' + document.domain;\n        if (location.port) {\n            url += ':' + location.port;\n        }\n        /*jshint eqeqeq:false*/\n        return (!m || (m[0] == url));\n    },\n\n    getHeader: function(name) {\n        try {\n            return this.transport.getResponseHeader(name) || null;\n        } catch (e) {\n            return null;\n        }\n    },\n\n    evalResponse: function() {\n        try {\n            /*jshint evil:true*/\n            return eval(WLJSX.String.unfilterJSON(this.transport.responseText || ''));\n        } catch (e) {\n            this.dispatchException(e);\n        }\n    },\n\n    dispatchException: function(exception) {\n        (this.options.onException || WLJSX.emptyFunction)(this, exception);\n    }\n});\n\nwindow.WLJSX.Ajax.Request.Events = ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];\n\nwindow.WLJSX.Ajax.Response = WLJSX.Class.create({\n    initialize: function(request) {\n        this.request = request;\n        var transport = this.transport = request.transport,\n            readyState = this.readyState = transport.readyState;\n\n        /*jshint eqeqeq:false*/\n        if ((readyState > 2 && !WLJSX.detectBrowser().isIE) || readyState == 4) {\n            this.status = this.getStatus();\n            this.statusText = this.getStatusText();\n            this.responseText = WLJSX.String.interpret(transport.responseText);\n            this.headerJSON = this._getHeaderJSON();\n        }\n\n        if (readyState == 4) {\n            var xml = transport.responseXML;\n            this.responseXML = WLJSX.Object.isUndefined(xml) ? null : xml;\n            this.responseJSON = this._getResponseJSON();\n\n        }\n    },\n\n    status: 0,\n\n    statusText: '',\n\n    getStatus: window.WLJSX.Ajax.Request.prototype.getStatus,\n\n    getStatusText: function() {\n        try {\n            return this.transport.statusText || '';\n        } catch (e) {\n            return '';\n        }\n    },\n\n    getHeader: window.WLJSX.Ajax.Request.prototype.getHeader,\n\n    getAllHeaders: function() {\n        try {\n            return this.getAllResponseHeaders();\n        } catch (e) {\n            return null;\n        }\n    },\n\n    getResponseHeader: function(name) {\n        return this.transport.getResponseHeader(name);\n    },\n\n    getAllResponseHeaders: function() {\n        return this.transport.getAllResponseHeaders();\n    },\n\n    _getHeaderJSON: function() {\n        var json = this.getHeader('X-JSON');\n        if (!json) {\n            return null;\n        }\n        json = decodeURIComponent(escape(json));\n        try {\n            return String.wl.evalJSON(json, this.request.options.sanitizeJSON || !this.request.isSameOrigin());\n        } catch (e) {\n            this.request.dispatchException(e);\n        }\n    },\n\n    _getResponseJSON: function() {\n        //Assume JSON is returned regardless, and only throw an exception\n        //if we expected JSON and JSON was not returned\n        var options = this.request.options;\n        try {\n            return WLJSX.String.evalJSON(this.responseText, (options.sanitizeJSON || !this.request.isSameOrigin()));\n        } catch (e) {\n            /*jshint eqeqeq:false*/\n            if (!options.evalJSON || (options.evalJSON != 'force' && (this.getHeader('Content-type') || '').indexOf('application/json') < 0) || WLJSX.String.isBlank(this.responseText)) {\n                return null;\n            } else {\n                this.request.dispatchException(e);\n            }\n        }\n    }\n});\n\n/**\n * ================================================================= \n * Source file taken from :: wlapp.web.js\n * ================================================================= \n */\n\n/**\n \\ * @license\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n\n */\n\n/* Copyright (C) Worklight Ltd. 2006-2012.  All rights reserved. */\n\n/**\n * @class\n * @ilog.undocumented.constructor\n * @displayname WL.App\n */\n/*jshint undef:false*/\n__WLApp = function() {\n\n    /*jshint strict:false*/\n\n    /**\n     * Opens the specified URL according to the specified target and options\n     * (specs). The behavior of this method depends on the app environment, as\n     * follows:\n     *  <table class=\"userTable\" cellspacing=\"0\">\n     <thead>\n     <tr>\n     <th>Environment</th>\n     <th>Description</th>\n     </tr>\n     </thead>\n     <tbody>\n     <tr>\n     <td class=\"attributes\">Adobe AIR</td>\n     <td class=\"nameDescription\">Opens a new browser window at the specified URL. The target and options parameters are ignored.</td>\n     </tr>\n     <tr>\n     <td class=\"attributes\">TO BE COMPLETED</td>\n     <td class=\"nameDescription\">TO BE COMPLETED.</td>\n     </tr>\n     </tbody>\n     </table>\n     *\n     * @param url\n     *            Mandatory. The URL of the web page to be opened.\n     * @param target\n     *            Optional. The value to be used as the target (or name)\n     *            parameter of JavaScript <code>window.open</code> method. If\n     *            no value is specified, <code>_self</code> will be used.\n     *\n     * @param options\n     *            Optional. Parameters hash.\n     *            If no value is specified, the following options are used:\n     *        status=1, toolbar=1, location=1, menubar=1, directories=1, resizable=1, scrollbars=1\n     * @return A reference to the newly opened window, or NULL if no window was opened.\n     */\n    this.__openURL = function(url, target, options) {\n        WL.Validators.validateArguments(['string', WL.Validators.validateStringOrNull,\n            WL.Validators.validateStringOrNull\n        ], arguments, 'WL.App.openURL');\n\n        var wnd = null;\n        if (WLJSX.Object.isUndefined(options) || options === null) {\n            options = 'status=1,toolbar=1,location=1,menubar=1,directories=1,resizable=1,scrollbars=1';\n        }\n        if (WLJSX.Object.isUndefined(target) || target === null) {\n            target = '_self';\n        }\n        var absoluteURL = WL.Utils.createAPIRequestURL(url);\n        wnd = window.open(absoluteURL, target, options);\n        console.log('openURL url: ' + absoluteURL);\n\n        return wnd;\n    };\n\n    /**\n     * Returns the locale code (or device language on BlackBerry).\n     * Returns the locale code according to user device settings, for example: en_US.\n     * @note {Note} On BlackBerry 6 and 7, this method returns the device language (for example, en), not the device locale.\n     */\n    this.__getDeviceLocale = function() {\n    \tif (typeof navigator.languages !== 'undefined' && navigator.languages.length > 0) {\n           // has navigator.languages list and it is non-empty\n           // relevant only for Chrome\n            return navigator.languages[0];\n        }\n        if (navigator.language == null){\n            return navigator.browserLanguage;\n        }\n        return navigator.language;\n    };\n\n    /**\n     * Returns the language code.\n     * Returns the language code according to user device settings, for example: en.\n     */\n    this.__getDeviceLanguage = function() {\n        return this.__getDeviceLocale().substring(0, 2);\n    };\n\n    /**\n     * Returns a pattern string to format and parse numbers according to the client's user preferences.\n     * Returns the pattern to the successCallback with a properties object as a parameter,that contains :\n     pattern,symbol,fraction,rounding,positive etc\n     */\n\n    this.getLocalePattern = function() {\n        pattern = WL.Client.getLocalePattern();\n        return pattern;\n    };\n\n    /**\n     * Returns the decimal separator.\n     * Returns the decimal separator accoriding to the region/locale preferences. eg : French uses \",\" but English uses \".\"\n     */\n    this.getDecimalSeparator = function() {\n        var localepattern = this.getLocalePattern();\n        if (typeof localepattern === 'undefined' || localepattern === null) {\n            return '.';\n        }\n        return localepattern.decimal;\n    };\n\n    /**\n     * Extracts a string that contains an error message.\n     * Extracts a string that contains the error message within the specified exception object.\n     * Use for exceptions that are thrown by the IBM MobileFirst Platform client runtime.\n     * @param {Function} callback Mandatory. The function that is called when Back is pressed.\n     * @example {}\n     * WL.App.overrideBackButton(backFunc);\n     * function backFunc(){\n   *    alert('you hit the back key!');\n   * }\n     */\n    this.getErrorMessage = function(e) {\n        var message;\n        if (e === null) {\n            message = null;\n        } else if (WLJSX.Object.isString(e)) {\n            message = e;\n        } else if (WLJSX.Object.isArray(e)) {\n            message = e.join(',');\n        } else if (e.description || e.message) {\n            // the exception message\n            message = e.description ? e.description : e.message;\n\n            // add file name and line number\n            if (e.fileName) {\n                message += ' [' + e.fileName + ': line ' + e.lineNumber + ']';\n            } else if (e.sourceURL) {\n                message += ' [' + e.sourceURL + ': line ' + e.line + ']';\n            }\n        } else {\n            message = e.toString();\n        }\n        return message;\n    };\n\n\n\n};\n\n/*jshint newcap:false*/\n__WL.prototype.App = new __WLApp();\nWL.App = new __WLApp();\n\n/**\n * ================================================================= \n * Source file taken from :: wlutils.web.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*globals WL, WL_, __WL, WLJSX, WLJQ, WL_LOADER_CHECKSUM, WL_I18N_MESSAGES, WL_CLASS_NAME_TRANSLATE*/\n\n/*\n * IBM MobileFirst Platform Utils\n */\nvar __WLUtils = function () {\n\n    /*jshint strict:false*/\n\n    // ........................Private methods........................\n\n    var IBMMFPF_SDK_NAME = 'ibmmfpf';\n\n    function loadWLClientMessages(path, lang) {\n        var dfd = WLJQ.Deferred();\n\n        var url = 'lib/messages/' + lang + '/messages.json';\n        if (lang === null || typeof lang === 'undefined' || lang.indexOf('en') === 0) {\n            url = 'lib/messages/messages.json';\n        }\n        loadJSON(path + url).then(function(data){\n            WL.ClientMessages = data;\n            dfd.resolve();\n        }, function(){\n            WL.Logger.error('error loading messages file: ' + url);\n            dfd.reject();\n        });\n        return dfd.promise();\n    }\n\n\n    var findSDKPath = (function () {\n            return function (sdk) {\n                var path = null;\n                // search mfp sdk path using script tag\n                var scripts = document.getElementsByTagName('script');\n                var term = '/' + sdk + '.js';\n                for (var n = scripts.length-1; n>-1; n--) {\n                    var src = scripts[n].src.replace(/\\?.*$/, ''); // Strip any query param (CB-6007).\n                    if (src.indexOf(term) === (src.length - term.length)) {\n                        path = src.substring(0, src.length - term.length) + '/';\n                        break;\n                    }\n                }\n                return path;\n            }\n        }\n    )();\n\n    function loadJSON(path) {\n        var dfd = WLJQ.Deferred();\n        var xobj = new XMLHttpRequest();\n        if (xobj.overrideMimeType)\n            xobj.overrideMimeType(\"application/json\");\n        xobj.open('GET', path, true);\n        xobj.onreadystatechange = function () {\n            if (xobj.readyState == 4) {\n                if(xobj.status == \"200\") {\n                    dfd.resolve(JSON.parse(xobj.responseText));\n                } else {\n                    dfd.reject();\n                }\n            }\n        };\n        xobj.send(null);\n        return dfd.promise();\n    }\n\n\t//Helper function to check if file is present in the given location or not\n    function checkForFile(path) {\n        var dfd = WLJQ.Deferred();\n        var xobj = new XMLHttpRequest();\n        xobj.open('GET', path, true);\n        xobj.onreadystatechange = function () {\n            if (xobj.readyState == 4) {\n                if(xobj.status == \"200\") {\n                    dfd.resolve();\n                } else {\n                    dfd.reject();\n                }\n            }\n        };\n        xobj.send(null);\n        return dfd.promise();\n    }\n\n    function addScript(url) {\n        var sdkPath = findSDKPath(IBMMFPF_SDK_NAME);\n        var script   = document.createElement(\"script\");\n        script.src   = sdkPath + url;\n        document.head.appendChild(script);\n\n        // remove from the dom\n        //document.head.removeChild(document.head.lastChild);\n        return true;\n    }\n\n    this.wlReachableCallback = function () {};\n\n    // .................... Public methods ...........................\n\n    this.__networkCheckTimeout = function () {\n        if (!window.connectivityCheckDone) {\n            WL.Logger.debug('Connectivity check has timed out');\n            window.connectivityCheckDone = true;\n        }\n    };\n\n    /**\n     * @param {Object}\n     *            value\n     * @return value if defined or null otherwise.\n     */\n    this.safeGetValue = function (value) {\n        if (!WLJSX.Object.isUndefined(value)) {\n            return value;\n        } else {\n            return null;\n        }\n    };\n\n\n    this.formatString = function () {\n        var resStr = arguments[0];\n        for (var i = 1; i < arguments.length; i++) {\n            var re = new RegExp('\\\\{' + (i - 1) + '\\\\}', 'g');\n            resStr = resStr.replace(re, arguments[i]);\n        }\n        return resStr;\n    };\n\n    this.loadLibrary = function(libPath, amdCallback){\n        var sdkPath = findSDKPath(IBMMFPF_SDK_NAME);\n\n        var path = sdkPath+libPath;\n        /*For wi 119215 - dependent plugins jssha,sjcl and promiz are being installed into a web app's node_modues folder with newer node versions. \n\tOur build systems though still use older node versions hence the check to see if the dependencies are present in the  \n\t<web-app/node_modules/ibm-mfp-web-sdk/node_modules> folder(for older node versions), if not then load the files from the <web-app/node_modules> \n\tfolder*/\n        checkForFile(sdkPath+libPath.replace(\"node_modules\",\"..\"))\n        .then(function(msg){\n            libPath = libPath.replace(\"node_modules\",\"..\");\n            path = sdkPath+libPath; \n            if (('function' === typeof define) && (define['amd'])){\n                require([path], amdCallback); \n            } else {\n                addScript(libPath);\n            }\n        },function(error){\n        \tif (('function' === typeof define) && (define['amd'])){\n\t\t\t    require([path], amdCallback); \n\t\t} else {\n                \taddScript(libPath);\n\t\t}\n        });\n    }\n\n    var __deviceLocale;\n    this.setLocalization = function () {\n        var dfd = WLJQ.Deferred();\n\n        var deviceLocale = WL.App.__getDeviceLocale();\n        //The json containing user facing messages needs to be loaded and assigned only once.\n        //Check if the object has already been assigned.Else re-use the existing object\n        if (typeof WL.ClientMessages === 'undefined' || __deviceLocale !== deviceLocale) {\n            __deviceLocale = deviceLocale;\n            WL.ClientMessages = undefined;\n            // In web (mobile web and desktop web), we inject the proper WL.ClientMessages in the HTML file at the server,\n            // so we would never get into this conditional code block.  This is a good thing!  No extra round trips to the\n            // server to pick up language files.  We trust the web browser's Accept-Language header in those environments.\n            // Ensure that the messages.json files are placed in lang folders or lang-COUNTRYCODE folders.\n            // Ensure that the separator is '-' and not '_' as the RPX tool places translated files into folders with '-'.\n            var lang = deviceLocale.substring(0, 2);\n            var region = deviceLocale.substring(3);\n            deviceLocale = lang.toLowerCase();\n            if (region) {\n                deviceLocale += '-' + region.toUpperCase();\n            }\n\n            // special fallback for zh languages (see 41026)\n            if (deviceLocale.indexOf('zh-HANS') !== -1) {\n                deviceLocale = 'zh';\n            } else if (deviceLocale.indexOf('zh-HANT') !== -1 || deviceLocale.indexOf('zh-HK') !== -1) {\n                deviceLocale = 'zh-TW';\n            }\n\n            try {\n                // Get the file from which to pickup the user visible messages.\n                if (typeof WL.ClientMessages === 'undefined') {\n                    // find sdk path first, because messages.json is relative to it.\n                    var ibmmfpsdk = findSDKPath(IBMMFPF_SDK_NAME);\n                    if (!ibmmfpsdk) {\n                        WL.Logger.error('could not find ' + IBMMFPF_SDK_NAME + '.js, please rename MobileFirst SDK name to: ' + IBMMFPF_SDK_NAME + '.js');\n                        return dfd.reject()\n                    }\n                    // prefer deviceLocale, then deviceLanguage, then English, in that order\n                    loadWLClientMessages(ibmmfpsdk, deviceLocale).always(function() {\n                        // we don't have a deviceLanguage translation file, try deviceLanguage\n                        if (typeof WL.ClientMessages === 'undefined') {\n                            loadWLClientMessages(ibmmfpsdk, lang).always(function() {\n                                // fall back to English\n                                if (typeof WL.ClientMessages === 'undefined') {\n                                    loadWLClientMessages(ibmmfpsdk, 'en').always(function(){dfd.resolve()});\n                                } else {\n                                    dfd.resolve();\n                                }\n                            });\n                        } else {\n                            dfd.resolve();\n                        }\n                    });\n                } else {\n                    dfd.resolve();\n                }\n            } catch (e) {\n                WL.Logger.error(e);\n            }\n        }\n        return dfd.promise();\n    };\n\n    this.getLanguageDirectionality = function (lang) {\n        if (typeof lang !== 'string') {\n            lang = WL.App.__getDeviceLanguage();\n        }\n        for (var i = 0; i < WL.Language.LANGUAGES_RTL.length; i++) {\n            if (lang.indexOf(WL.Language.LANGUAGES_RTL[i]) !== -1) {\n                return WL.Language.DIRECTION_RTL;\n            }\n        }\n        return WL.Language.DIRECTION_LTR;\n    };\n\n    /*\n     * Adds the URL prefix to the URL if not already added and\n     * WL.StaticAppProps.WORKLIGHT_ROOT_URL is set This is used when working\n     * with desktop gadget and we need a static URL\n     */\n    this.createAPIRequestURL = function (path) {\n        return path;\n    };\n\n    /*\n     * Extends the target object with the source object only with fields and\n     * methods that do not already exist on the target.\n     */\n    this.extend = function (target, source) {\n        target = WLJSX.Object.extend(WLJSX.Object.clone(source), target);\n        return target;\n    };\n\n    /*\n     * extracts the host part of a url. For example, for the input\n     * url=\"https://212.10.0.15:8888/application/service/?arg=blue\", the result\n     * would be \"212.10.0.15\".\n     */\n    this.getHostname = function (url) {\n        var re = new RegExp('^(?:f|ht)tp(?:s)?://([^/:]+)', 'im');\n        return url.match(re)[1].toString();\n    };\n\n    this.dispatchWLEvent = function (eventName, data) {\n        // ie (WP7/VISTA) support custom event\n        if (typeof document.createEvent === 'undefined') {\n            WLJSX.trigger(document, eventName);\n        } else {\n            var e = document.createEvent('Events');\n            e.initEvent(eventName, false, false);\n            if (data !== null) {\n                e.data = data;\n            }\n            document.dispatchEvent(e);\n        }\n    };\n\n\n    /**\n     * Version compares 2 version numbers in strings to the length of the maxLength parameter\n     * @param {string} x\n     * @param {string} y\n     * @param {string} maxLength\n     * @return -1 if x>y, 1 if x<y, or 0 if equal\n     */\n    this.versionCompare = function (x, y, maxLength) {\n        var i = 0,\n        /*jshint camelcase:false*/\n            x_components = x.split('.'),\n            y_components = y.split('.'),\n            len = Math.min(x_components.length, y_components.length),\n            maxLng = maxLength || 5;\n\n        if (x === y) {\n            return 0;\n        }\n\n        for (i = 0; i < len; i += 1) {\n\n            // x > y\n            if (parseInt(x_components[i], 10) > parseInt(y_components[i], 10)) {\n                return 1;\n            }\n\n            // y > x\n            if (parseInt(x_components[i], 10) < parseInt(y_components[i], 10)) {\n                return -1;\n            }\n\n            if (i >= maxLng) {\n                break; //check only up to maxLength+1 parts\n            }\n\n            // If one's a prefix of the other, the longer one is greater.\n            if (x_components.length > y_components.length) {\n                return 1;\n            }\n\n            if (x_components.length < y_components.length) {\n                return -1;\n            }\n\n\n        }\n\n        return 0; //same\n    };\n}; // End WL.Utils\n\n\n/*jshint newcap:false*/\n__WL.prototype.Utils = new __WLUtils();\nWL.Utils = new __WLUtils();\n\n// Load promiz.js script\nif ( typeof Promise !== 'function' ) {\n\tWL.Utils.loadLibrary('node_modules/promiz/promiz.min.js', function(promiz){});\n}\n\n// Load indexedDB shim (and force)\n//WL.Utils.loadIndexedDBShim();\n// Load SHA library\nWL.Utils.loadLibrary('node_modules/sjcl/sjcl.js', function(sjcl){});\nWL.Utils.loadLibrary('node_modules/jssha/src/sha.js', function(sha){window.jsSHA = sha;});\n\n\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlrequest.web.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*globals WLJSX, WL, WLAuthorizationManager, WL_*/\n\n// Overwriting the prototype.js isSameOrigin method -\n// Updated the original method by wrapping the return statement with try/catch\n// because it does not work properly in desktop applications such as Vista\n// (document.domain is undefined).\nWLJSX.Ajax.Request.prototype.isSameOrigin = function () {\n\n    /*jshint strict:false*/\n\n    var m = this.url.match(/^\\s*https?:\\/\\/[^\\/]*/);\n    try {\n        var url = location.protocol + '//' + document.domain;\n        if (location.port) {\n            url += ':' + location.port;\n        }\n        return (!m || (m[0] === url));\n    } catch (e) {\n        return true;\n    }\n};\n\n\nWL.Response = WLJSX.Class.create({\n    invocationContext: null,\n    status: -1,\n    errorCode: null,\n    errorMsg: null,\n    responseText: '',\n    responseJSON: '',\n    initialize: function (transport, invocationContext) {\n\n        /*jshint strict:false*/\n        this.responseHeaders = {};\n        if (transport !== null && typeof transport.status !== 'undefined') {\n            this.status = (transport.status || 200);\n            this.responseHeaders = {};\n\n            try {\n                this.responseText = WLJSX.String.interpret(transport.responseText);\n            } catch (e) {\n\n            }\n\n            try {\n                this.responseJSON = WLJSX.String.evalJSON(transport.responseText, true);\n            } catch (e) {\n\n            }\n\n            if (typeof (transport.responseJSON) !== 'undefined' && transport.responseJSON !== null) {\n                this.errorCode = transport.responseJSON.errorCode;\n                if (typeof (transport.responseJSON.error) !== 'undefined' && transport.responseJSON.error !== null) {\n                    this.errorMsg = transport.responseJSON.error;\n                } else {\n                    this.errorMsg = transport.responseJSON.errorMsg;\n                }\n            }\n\n            if (typeof (transport.getAllResponseHeaders) === 'function') {\n                var responseHeadersString = transport.getAllResponseHeaders();\n                this.responseHeaders = WLJSX.String.parseResponseHeaders(responseHeadersString);\n            }\n        }\n        this.invocationContext = invocationContext;\n    },\n\n    getHeaderNames: function () {\n\n        /*jshint strict:false*/\n\n        var headerNames = [];\n        for (var headerName in this.responseHeaders) {\n            if (true) { // thanks jshint\n                headerNames.push(headerName);\n            }\n        }\n        return headerNames;\n    },\n\n    getAllHeaders: function () {\n\n        /*jshint strict:false*/\n\n        return this.responseHeaders;\n    },\n\n    getHeader: function (name) {\n        /*jshint strict:false*/\n        if (name === null || typeof (name) === 'undefined') {\n            return null;\n        }\n\n        return this.responseHeaders[name];\n    }\n});\n\nWL.FailResponse = WLJSX.Class.create({\n    invocationContext: null,\n    status: -1,\n    errorCode: null,\n    errorMsg: null,\n    initialize: function (transport, invocationContext) {\n        /*jshint strict:false*/\n        if (transport !== null && typeof transport.status !== 'undefined') {\n            this.status = (transport.status || 200);\n            if (transport.responseJSON !== null && typeof (transport.responseJSON) !== 'undefined') {\n                this.errorCode = transport.responseJSON.errorCode;\n                this.errorMsg = transport.responseJSON.errorMsg;\n            }\n        }\n        this.invocationContext = invocationContext;\n    }\n});\n\n\n/*\n * Piggybackers should have the following optional properties:\n *  - a function called processOptions(options) (called before the request is sent)\n *  - a function called onSuccess(transport, options)\n *  - a function called onFailure(transport, options)\n */\nwindow.WLJSX.Ajax.WlRequestPiggyBackers = [];\n\n/*\n * A wrapper for the prototype Ajax.Request. The wrapper is responsible for: 1.\n * Add double-cookie headers to the request. 2. Parse cookies from the response.\n * 3. Invoke the authenticator on demand.\n */\nwindow.WLJSX.Ajax.WLRequest = WLJSX.Class.create({\n    instanceId: null,\n    wlAnswers: {},\n    postAnswerRealm: '',\n    MAX_AUTH_HEADER_SIZE: 900,\n    MAX_TOTAL_HEADER_SIZE: 3000,\n    MAX_CONFLICT_ATTEMPTS: 7,\n\n    initialize: function (url, options) {\n        /*jshint strict:false*/\n        this.options = WLJSX.Object.clone(WLJSX.Ajax.WLRequest.options);\n\n        WLJSX.Object.extend(this.options, options || {});\n        this.url = url;\n        this.callerOptions = options;\n        this.isTimeout = false;\n        this.timeoutTimer = null;\n        this.conflictCounter = 0;\n\n        // this.stopPolling = false;\n        this.options.onSuccess = this.onWlSuccess.bind(this);\n        this.options.onFailure = this.onWlFailure.bind(this);\n\n        // Handle Exceptions\n        this.options.onException = this.onException.bind(this);\n\n        // 0 is the response status when the host is unresponsive\n        // (server is\n        // down)\n        this.options.on0 = this.onUnresponsiveHost.bind(this);\n\n        // Appending the cookie headers to possibly existing ones.\n        // If you pass additional headers make sure to use objects of\n        // name-value\n        // pairs (and not arrays).\n        // this.options.requestHeaders =\n        // Object.extend(CookieManager.createCookieHeaders(),\n        // this.options.requestHeaders || {});\n       // this.options.requestHeaders = WL.CookieManager.createCookieHeaders();\n\n        // For GET requests - preventing Vista from returning cached GET\n        // ajax\n        // responses.\n        // For POST requests - preventing Air from sending a GET request\n        // if the\n        // request has no body (even if\n        // it's declared as a POST request).\n        if (WLJSX.Object.isUndefined(this.options.parameters) || this.options.parameters === null || this.options.parameters === '') {\n            this.options.parameters = {};\n        }\n\n        // call piggybackers to modify options\n        for (var i = 0; i < WLJSX.Ajax.WlRequestPiggyBackers.length; i++) {\n            var piggybacker = WLJSX.Ajax.WlRequestPiggyBackers[i];\n            if (typeof (piggybacker.processOptions) === 'function') {\n                piggybacker.processOptions(this.options, url);\n            }\n        }\n        this.wlAnswers = {};\n        this.sendRequest();\n    },\n\n    /*\n     * We need to know ahead of time, for challenge processing if extra work needs to be done if we try and send\n     * a message which headers are too big.\n     */\n    createRequestHeaders: function () {\n        /*jshint strict:false*/\n        var requestHeaders = {};\n        // requestHeaders = WL.CookieManager.createCookieHeaders();\n        // requestHeaders['x-wl-app-version'] = WL.StaticAppProps.APP_VERSION;\n\n        // add Authorization header from wlAnswres\n        if (typeof this.wlAnswers !== 'undefined') {\n            var authJson = {};\n            var shouldSendAuthHeader = false;\n            for (var realm in this.wlAnswers) {\n                if (Object.prototype.hasOwnProperty.call(this.wlAnswers, realm)) {\n                    var answer = '';\n                    /*jshint maxdepth:4*/\n                    try {\n                        answer = JSON.parse(this.wlAnswers[realm]);\n                    } catch (e) {\n                        answer = this.wlAnswers[realm];\n                    }\n                    // Validate we are working with standrad JSON\n                    if (typeof answer === 'string' && typeof JSON === 'undefined') {\n                        authJson[realm] = answer.indexOf('\"') === 0 ? answer : '\"' + answer + '\"';\n                    } else {\n                        authJson[realm] = answer;\n                    }\n                    shouldSendAuthHeader = true;\n                }\n            }\n            if (shouldSendAuthHeader === true) {\n                this.options.parameters.challengeResponse = authJson;\n            }\n        }\n\n        // add headers from WL.Client.globalHeaders in case the Single (native) HTTP Client is disabled;\n        // otherwise the headers will be added in native code\n        this.__addGlobalHeaders(requestHeaders);\n\n        var optionalHeaders = this.options.optionalHeaders;\n        if (typeof optionalHeaders !== 'undefined' && optionalHeaders !== null) {\n            for (var headerName in optionalHeaders) {\n                if (Object.prototype.hasOwnProperty.call(optionalHeaders, headerName)) {\n                    requestHeaders[headerName] = optionalHeaders[headerName];\n                }\n            }\n        }\n        return requestHeaders;\n    },\n\n    // automaticResend is to be used when comming from submitAnswer or removeExpectedAnswer, we need to know if we should handle the\n    // request differently (add it to the challangeHandler wiating list).\n    sendRequest: function (requestHeaders) {\n        /*jshint strict:false*/\n        var shouldPostAnswers = false;\n\n        console.log('Request [' + this.url + ']');\n\n        //add headers\n        if (typeof (requestHeaders) === 'undefined') {\n            this.options.requestHeaders = this.createRequestHeaders();\n        } else {\n            this.options.requestHeaders = requestHeaders;\n        }\n\n        var postAnswersOptions = {};\n\n        //check if we need to send the auth header in the body, becuase it is too large or the total header size is too large\n        var allHeadersSize = WLJSX.Object.toJSON(this.options.requestHeaders).length;\n        var authHeaderSize = typeof (this.options.requestHeaders.Authorization) === 'undefined' ? -1 :\n            WLJSX.Object.toJSON(this.options.requestHeaders.Authorization).length;\n\n        if ((allHeadersSize > this.MAX_TOTAL_HEADER_SIZE || authHeaderSize > this.MAX_AUTH_HEADER_SIZE) && authHeaderSize > -1) {\n\n            postAnswersOptions = WL.Utils.extend(postAnswersOptions, this.options);\n            postAnswersOptions.requestHeaders = this.options.requestHeaders;\n            postAnswersOptions.onSuccess = this.onPostAnswersSuccess.bind(this);\n            postAnswersOptions.onFailure = this.onPostAnswersFailure.bind(this);\n\n            postAnswersOptions.postBody = this.options.requestHeaders.Authorization;\n            postAnswersOptions.requestHeaders.Authorization = 'wl-authorization-in-body';\n            // Get HTTP request cannot hold a body\n            postAnswersOptions.method = 'post';\n\n            this.wlAnswers = {};\n        }\n\n        if (typeof (this.options.requestHeaders.Authorization) !== 'undefined') {\n            //init the wlAnswer map...\n            this.wlAnswers = {};\n        }\n\n        if (this.options.timeout > 0) {\n            this.timeoutTimer = window.setTimeout(this.handleTimeout.bind(this), this.options.timeout);\n        }\n\n        var thisRequest = this;\n        __sendRequest();\n        /*jshint latedef: false */\n        function __sendRequest() {\n            new WLJSX.Ajax.Request(thisRequest.url, thisRequest.options);\n        }\n\n    },\n\n    __addGlobalHeaders: function (requestHeaders) {\n        /*jshint strict:false*/\n            if ((typeof WL.Client.__globalHeaders !== 'undefined') && (WL.Client.__globalHeaders !== null)) {\n                for (var headerName in WL.Client.__globalHeaders) {\n                    /*jshint maxdepth:4*/\n                    if (Object.prototype.hasOwnProperty.call(WL.Client.__globalHeaders, headerName)) {\n                        requestHeaders[headerName] = WL.Client.__globalHeaders[headerName];\n                    }\n                }\n            }\n    },\n\n    onSuccessParent: function (transport, par) {\n        /*jshint strict:false*/\n        if (this.isTimeout) {\n            return;\n        }\n        this.cancelTimeout();\n        var containsChallenges = WL.Client.checkResponseForChallenges(this, transport, par);\n\n        return containsChallenges;\n    },\n\n    /*\n     * Custom success handelr for PostAnswer Request, it will not send the onSuccess to the application code,\n     * because this is not a resend but a swpecial request, and the user should not be informed about it.\n     */\n    onPostAnswersSuccess: function (transport) {\n        /*jshint strict:false*/\n        this.onSuccessParent(transport, this.postAnswerRealm);\n        this.postAnswerRealm = '';\n    },\n\n    /**\n     * when a onWlSuccess arrives but it came from an response to a\n     * postAnsweresRequest then we should not continue the onSucess any\n     * further\n     *\n     * @param transport\n     * @param responseToPostAnswers\n     */\n    onWlSuccess: function (transport) {\n        /*jshint strict:false*/\n        if (this.isTimeout) {\n            return;\n        }\n        var containsChallenges = this.onSuccessParent(transport);\n\n        if (!containsChallenges) {\n            this.onSuccess(transport);\n        }\n    },\n\n    onSuccess: function (transport) {\n        /*jshint strict:false*/\n        if (transport.getAllHeaders() !== null) {\n            // Handle Cookies:\n            var headers = transport.getAllHeaders().split('\\n');\n            WL.CookieManager.handleResponseHeaders(headers);\n        }\n\n        for (var i = 0; i < WLJSX.Ajax.WlRequestPiggyBackers.length; i++) {\n            var piggybacker = WLJSX.Ajax.WlRequestPiggyBackers[i];\n            if (typeof (piggybacker.onSuccess) === 'function') {\n                piggybacker.onSuccess(transport, this.options);\n            }\n        }\n\n\n        if (typeof (this.callerOptions.onSuccess) === 'function') {\n            this.callerOptions.onSuccess(transport);\n        }\n    },\n\n    /*\n     * Custom failure handelr for PostAnswer Request, it will remove the original request from waiting list, and not send the onFailure to the application code,\n     * because this is not a resend but a special request, and the user should not be informed about it.\n     *\n     * When a message arrives from a postAnswerRequert ('authenticate') and it is a 401,403, we need to remove it from the waitinglist so there wont be any resend on it,\n     * because if has accepts in it, it will trigger the resend.\n     */\n    onPostAnswersFailure: function (transport) {\n        /*jshint strict:false*/\n        if (this.isTimeout) {\n            return;\n        }\n        this.cancelTimeout();\n        WL.Client.removeFromWaitingListOnPostAnsweresWlReponse(transport, this, this.postAnswerRealm);\n        WL.Client.checkResponseForChallenges(this, transport, this.postAnswerRealm);\n        this.postAnswerRealm = '';\n    },\n\n    onWlFailure: function (transport) {\n        /*jshint strict:false*/\n        if (this.isTimeout) {\n            return;\n        }\n        this.cancelTimeout();\n            if (transport && transport.getAllHeaders && transport.getAllHeaders() !== null) {\n                var allHeaders = transport.getAllHeaders();\n                if (WLJSX.Object.isString(allHeaders)) {\n                    var headers = allHeaders.split('\\n');\n                    WL.CookieManager.handleResponseHeaders(headers);\n                }\n            }\n        if (transport.status === 409 && WLAuthorizationManager.isAuthorizationRequired(transport.status, transport.getAllResponseHeaders()) && this.conflictCounter++ < this.MAX_CONFLICT_ATTEMPTS) {\n            this.sendRequest();\n        } else {\n            var containsChallenges = WL.Client.checkResponseForChallenges(this, transport);\n            if (!containsChallenges) {\n                this.onFailure(transport);\n            }\n        }\n    },\n\n    onFailure: function (transport) {\n        /*jshint strict:false*/\n        // sometimes onFailure is called with a dummy transport object\n        // for example when an authentication timeout occurs.\n        if (transport && transport.getAllHeaders && transport.getAllHeaders() !== null) {\n            var allHeaders = transport.getAllHeaders();\n            if (WLJSX.Object.isString(allHeaders)) {\n                var headers = allHeaders.split('\\n');\n                WL.CookieManager.handleResponseHeaders(headers);\n            }\n        }\n\n        if (transport.responseJSON === null) {\n            try {\n                transport.responseJSON = WLJSX.String.evalJSON(transport.responseText, true);\n            } catch (e) {\n                transport.responseJSON = {\n                    errorCode: WL.ErrorCode.UNEXPECTED_ERROR,\n                    errorMsg:'unexpected error'\n                };\n            }\n        }\n\n\n        var callbackHandler = this.getCallbackForErrorCode(transport.responseJSON.errorCode);\n\n        if (callbackHandler) {\n            callbackHandler(this, transport);\n        }\n\n        if (transport.responseJSON.errorCode === WL.ErrorCode.USER_INSTANCE_ACCESS_VIOLATION) {\n            WLJSX.Ajax.WLRequest.options.onAuthentication(this, transport);\n            return;\n        }\n        console.log('[' + this.url + '] failure. state: ' + transport.status + ', response: ' + transport.responseJSON.errorMsg);\n\n        for (var i = 0; i < WLJSX.Ajax.WlRequestPiggyBackers.length; i++) {\n            var piggybacker = WLJSX.Ajax.WlRequestPiggyBackers[i];\n            if (typeof (piggybacker.onFailure) === 'function') {\n                piggybacker.onFailure(transport, this.options);\n            }\n        }\n\n\n        if (typeof (this.callerOptions.onFailure) === 'function') {\n            this.callerOptions.onFailure(transport);\n        }\n    },\n\n    getCallbackForErrorCode: function (errorCode) {\n        /*jshint strict:false*/\n        return this.options['on' + errorCode];\n    },\n\n    onException: function (request, ex) {\n        /*jshint strict:false*/\n        if (this.isTimeout) {\n            return;\n        }\n        this.cancelTimeout();\n\n        if (typeof (this.options.onAuthException) === 'function') {\n            this.options.onAuthException(request, ex);\n        }\n\n        console.log('[' + this.url + '] exception.', ex);\n        // Workaround for prototype's known behavior of swallowing\n        // exceptions.\n        /*jshint -W068*/\n        (function () {\n            throw ex;\n        }).defer();\n    },\n\n    onUnresponsiveHost: function () {\n        /*jshint strict:false*/\n        if (this.isTimeout) {\n            return;\n        }\n        this.cancelTimeout();\n\n        console.log('[' + this.url + '] Host is not responsive.');\n        var transport = {};\n        transport.status = 0;\n        transport.responseJSON = {\n            errorCode: WL.ErrorCode.UNRESPONSIVE_HOST,\n            errorMsg: 'unresponsive host'\n        };\n\n        if (typeof (this.callerOptions.onFailure) === 'function') {\n            this.callerOptions.onFailure(transport);\n        }\n    },\n\n    handleTimeout: function () {\n        /*jshint strict:false*/\n        console.log('Request timeout for [' + this.url + ']');\n        this.cancelTimeout(); // cancel all other timers (if there are\n        // any)\n        this.isTimeout = true;\n\n        var transport = {};\n\n        //changes made\n\n        /*transport.responseJSON = {\n         errorCode : WL.ErrorCode.REQUEST_TIMEOUT,\n         errorMsg : WL.Utils\n         .formatString(\n         'Request timed out for {0}. Make sure the host address is available to the app (especially relevant for Android and iPhone apps).',\n         this.url)\n         };*/\n        transport.responseJSON = {\n            errorCode: WL.ErrorCode.REQUEST_TIMEOUT,\n            errorMsg: WL.Utils\n                .formatString(\n                    'timeout',\n                    this.url)\n        };\n        if (typeof (this.callerOptions.onFailure) === 'function') {\n            this.callerOptions.onFailure(transport);\n        }\n    },\n\n    cancelTimeout: function () {\n        /*jshint strict:false*/\n        if (this.timeoutTimer !== null) {\n            window.clearTimeout(this.timeoutTimer);\n            this.timeoutTimer = null;\n            this.isTimeout = false;\n        }\n    },\n\n    checkIfCanResend: function () {\n        /*jshint strict:false*/\n        if (typeof this.wlAnswers === 'undefined') {\n            return true;\n        }\n\n        for (var realm in this.wlAnswers) {\n            if (Object.prototype.hasOwnProperty.call(this.wlAnswers, realm)) {\n                if (this.wlAnswers[realm] === null) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    },\n\n    // initialize the wlAnswer table with realm = null values\n    setExpectedAnswers: function (realms) {\n        /*jshint strict:false*/\n        for (var realm in realms) {\n            if (Object.prototype.hasOwnProperty.call(realms, realm)) {\n                this.wlAnswers[realm] = null;\n            }\n        }\n    },\n\n    submitAnswer: function (realm, answer) {\n        /*jshint strict:false*/\n        this.wlAnswers[realm] = answer;\n        if (this.checkIfCanResend()) {\n            this.handleResendOrSendPostAnswers(realm);\n        }\n    },\n\n    removeExpectedAnswer: function (realm) {\n        /*jshint strict:false*/\n        delete this.wlAnswers[realm];\n        if (this.checkIfCanResend()) {\n            this.handleResendOrSendPostAnswers(realm);\n        }\n    },\n\n    /*\n     * If the total header size is larger than MAX_TOTAL_HEADER_SIZE or the auth header is larger than MAX_AUTH_HEADER_SIZE\n     * we need to put the original request into the waiting list, because we will send a special \"authenticate\" request that will have the\n     * Autherization header in the body.\n     *\n     */\n    handleResendOrSendPostAnswers: function (realm) {\n        /*jshint strict:false*/\n        var headers = this.createRequestHeaders();\n\n        var moveToWaitingList = false;\n        var allHeadersSize = WLJSX.Object.toJSON(headers).length;\n        var authHeaderSize = typeof (headers.Authorization) === 'undefined' ? -1 :\n            WLJSX.Object.toJSON(headers.Authorization).length;\n\n        if ((allHeadersSize > this.MAX_TOTAL_HEADER_SIZE || authHeaderSize > this.MAX_AUTH_HEADER_SIZE) && authHeaderSize > -1) {\n            moveToWaitingList = true;\n        }\n\n        if (moveToWaitingList) {\n            //iterate over all the challageHandlers\n            this.postAnswerRealm = realm;\n            var handler = WL.Client.__chMap[realm];\n            if (typeof (handler) !== 'undefined') {\n                handler.moveToWaitingList(this);\n            }\n        }\n        this.sendRequest(headers);\n    }\n\n\n});\n\n// WLRequest default options:\nWLJSX.Ajax.WLRequest.options = {\n    method: 'post',\n    asynchronous: true,\n    encoding: 'UTF-8',\n    parameters: '',\n    evalJSON: true,\n    timeout: 60 * 1000,\n    onAuthentication: null,\n    isAuthResponse: null\n};\n\n/**\n * ================================================================= \n * Source file taken from :: wlauthorizationmanager.web.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*globals WL, WLJQ, WLJSX, cordova, WLAuthorizationManager, WLIndexDB, WLConfig, WLBrowserManager, WLCrypto, WLDAO */\n\nWLAuthorizationManager = (function () {\n\n    /*jshint strict:false, maxparams:4*/\n\n    var WL_AUTHORIZATION_HEADER = 'Authorization';\n    var PARAM_CLIENT_ID_KEY = 'client_id';\n    var PARAM_DEVICE_ID_KEY = 'device_id';\n    var PARAM_SCOPE_KEY = 'scope';\n    var INVALID_CLIENT_ERROR = 'INVALID_CLIENT_ID';\n    var CHALLENGE_RESPONSE_KEY = 'challengeResponse';\n    var WWW_AUTHENTICATE_HEADER = 'WWW-Authenticate';\n    var MFP_CONFLICT_HEADER = 'MFP-Conflict';\n    var LOGOUT_ERROR_MSG = 'Cannot logout while authorization request is in progress.';\n    var LOGIN_ALREADY_IN_PROCESS = 'Login already in process.';\n    var AZ_REDIRECT_URI = '/az/v1/authorization/redirect';\n    var JWT_ASSERTION_TYPE = 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer';\n    var DEFAULT_SCOPE = 'RegisteredClient';\n    var loginTimeout;\n    var MIN_LOGIN_TIMEOUT = 5*1000;\n\n    // Store the server clock to be synchronize with the server time\n    var SERVER_RELATIVE_TIME = 0;\n    var authorizationAlreadyInProgress = false;\n\n\n    // The options for storing in the WL.DAO\n    var scopeToTokenMappingKey = 'com.mfp.scope.token.mapping';\n    var resourceToScopeMappingKey = 'com.mfp.resource.scope.mapping';\n    var clientApplicationDataKey = 'com.mfp.oauth.application.data';\n    var clientIdKey = 'com.mfp.oauth.clientid';\n    var analyticsURLKey = 'com.worklight.oauth.analytics.url';\n    var analyticsApiKey = 'com.worklight.oauth.analytics.api.key';\n    var analyticsUserNameKey = 'com.worklight.oauth.analytics.username';\n    var analyticsUserPasswordKey = 'com.worklight.oauth.analytics.password';\n    var mappingOptions = {'session' : true};\n\n    var __logAndThrowError = function(msg, callerName) {\n        if (WL.Logger) {\n            if (callerName) {\n                msg = 'Invalid invocation of method ' + callerName + '; ' + msg;\n            }\n            WL.Logger.error(msg);\n        }\n\n        throw new Error(msg);\n    };\n\n    /*\n    Adds an item to a specific mapping (ResourceScope/ScopeToken)\n     */\n    function addItemToMap(mapId, key, value) {\n        var map = WL.DAO.getItem(mapId, mappingOptions) || {};\n        map[key] = value;\n        WL.DAO.setItem(mapId, map, mappingOptions);\n    }\n\n    /*\n     Gets an item to a specific mapping (ResourceScope/ScopeToken)\n     */\n    function getItemFromMap(mapId, key) {\n        var map = WL.DAO.getItem(mapId, mappingOptions) || {};\n        return map[key];\n    }\n\n    /*\n     Removes an item to a specific mapping (ResourceScope/ScopeToken)\n     */\n    function removeItemFromMap(mapId, key) {\n        addItemToMap(mapId, key, null);\n    }\n\n    /*\n     Clears the Mappings\n     */\n    function clearMappings() {\n       WL.DAO.removeItem(scopeToTokenMappingKey, mappingOptions);\n       WL.DAO.removeItem(resourceToScopeMappingKey, mappingOptions);\n       //delete messageId that was received during remote disable notify challenge\n       WL.DAO.removeItem(WL.Client.getMessageID());\n    }\n\n    function getAccessTokenForScope(scope) {\n        var sortedScope = sortScopeAlphabetically(scope);\n        var accessToken = getItemFromMap(scopeToTokenMappingKey, sortedScope);\n\n        if(!__isUndefinedOrNull(accessToken) && isAccessTokenExpired(accessToken)) {\n            // Remove\n            removeItemFromMap(scopeToTokenMappingKey, sortedScope);\n            accessToken = null;\n        }\n        return accessToken;\n    }\n\n    function isAccessTokenExpired(accessToken) {\n        var currentTime = new Date().getTime();\n        return currentTime >= accessToken.expiration;\n    }\n\n    function saveAccessToken(scope, accessToken) {\n        var sortedScope = sortScopeAlphabetically(scope);\n        addItemToMap(scopeToTokenMappingKey, sortedScope, accessToken);\n    }\n\n    var __getCachedScopeByResource = function (request) {\n        var url = request.requestOptions.url;\n        var method = request.requestOptions.method;\n        var key = url + '_' + method;\n        return getItemFromMap(resourceToScopeMappingKey, key);\n    };\n\n    var __getCachedAccessToken = function (scope) {\n        if(__isUndefinedOrNull(scope)) {\n            return null;\n        }\n        return getAccessTokenForScope(scope);\n    };\n\n    var clearAccessToken = function (accessToken) {\n        var scope = accessToken.scope;\n        saveAccessToken(scope, null);\n    };\n\n    var __getAuthorizationScope = function (responseAuthenticationHeader) {\n        if (!__isUndefinedOrNull(responseAuthenticationHeader)) {\n            var headerParts = responseAuthenticationHeader.split(',');\n            for (var i = 0; i < headerParts.length; i++) {\n                var headerElement = headerParts[i];\n                if (headerElement.indexOf('scope=') >= 0) {\n                    var scope = headerElement.split('=')[1].replace(/\\\"/g, '');\n                    return scope;\n                }\n            }\n        }\n\n        return null;\n    };\n\n    var obtainAuthHeaderCallbacks = [];\n    /**\n     * Obtains authorization header for specified scope.\n     * @param scope Specifies the scope to obtain an authorization header for. Can be null or undefined.\n     * @returns A promise object that should be used to receive the authorization header asynchronously. The header is send as a string\n     * Example:\n     * WLAuthorizationManager.obtainAccessToken(scope)\n     * .then (\n     *    function(header) {\n   *      // success flow with the header\n   *    },\n     *    function(error) {\n   *      // failure flow\n   *    }\n     *   )\n     * };\n     */\n    var obtainAccessToken = function (scope) {\n        var dfd = WLJQ.Deferred();\n        if (__isUndefinedOrNull(scope)) {\n            scope = DEFAULT_SCOPE;\n        }\n        scope = sortScopeAlphabetically(scope);\n        try {\n            var accessToken = __getCachedAccessToken(scope);\n            if (!__isUndefinedOrNull(accessToken)) {\n                dfd.resolve(accessToken);\n            } else {\n\n                // obtainAuthHeaderCallbacks is an array of this kind objects; \"clientId\" will be updated in case of \"unknown client\" error\n                // the \"scope\" identifies the current \"deferred\" object\n                var callbackObj = {\n                    clientId: null,\n                    scope: scope,\n                    deferred: dfd\n                };\n\n                obtainAuthHeaderCallbacks.push(callbackObj);\n\n                // If there is authorization process in progress, put incoming requests to queue\n                if (isAuthorizationInProgress()) {\n                    return dfd.promise();\n                }\n\n                if(!shouldRegister()) {\n                    startAuthorizationProcess(scope);\n                } else {\n                    __invokeInstanceRegistration().then(\n                        function(){\n                            startAuthorizationProcess(scope);\n                        },\n                        function(error) {\n                            __deleteAuthData();\n                            rejectAllCallbacks(error);\n                        });\n                }\n            }\n        } catch (e) {\n            WL.Logger.error('failed obtaining token, reason: ' + JSON.stringify(e));\n            processObtainAccessTokenCallbacks(null, scope, JSON.stringify(e), false);\n        }\n        return dfd.promise();\n    };\n\n    // this flag tells whether we have handled the invalid client error to prevent infinite loop\n    var invalidClientReceived = false;\n\n    function startAuthorizationProcess(scope) {\n        // invoke authorization request with specified scope\n        invokePreAuthorizationRequest(scope, null)\n            .then(\n                function () {\n                    // On preAuth success continue to authorization endpoint\n                    __invokeAuthorizationRequestForScope(scope)\n                        .then(\n                            function (code) {\n                                // authorization request succeeded, send to token endpoint with grant-code\n                                invokeTokenRequest(code)\n                                    .then(\n                                        function(accessToken) {\n                                            // We have the access token, save it and call next in the queue\n                                            saveAccessToken(scope, accessToken);\n                                            processObtainAccessTokenCallbacks(__getClientId(), scope, accessToken, true);\n\n                                        },\n                                        function(error) {\n                                            onAuthorizationProcessFailure(error, scope, __getClientId(), {\n                                                retryFunction: startAuthorizationProcess\n                                            });\n                                        });\n                            },\n                            function(error) {\n                                onAuthorizationProcessFailure(error, scope, __getClientId(), {\n                                    retryFunction: startAuthorizationProcess\n                                });\n                            });\n\n                },\n                function(error) {\n                    onAuthorizationProcessFailure(error, scope, __getClientId(), {\n                        retryFunction: startAuthorizationProcess\n                    });\n                });\n    }\n\n    function isUnknownClientError(error) {\n        if (!__isUndefinedOrNull(error) && typeof (error.status) !== 'undefined' &&\n            error.status === 400 && !__isUndefinedOrNull(error.responseJSON) &&\n            /*jshint camelcase:false*/\n            error.responseJSON.errorCode === INVALID_CLIENT_ERROR) {\n            return true;\n        }\n\n        return false;\n    }\n\n    function processObtainAccessTokenCallbacks(clientId, scope, response, isSuccess) {\n        var indexesToRemove = [];\n        var objectsToNotify = [];\n\n        // loop over callbacks in queue and notify those with specified scope; store appropriate indexes for later removal\n        for (var i = 0; i < obtainAuthHeaderCallbacks.length; i++) {\n            var callbackObj = obtainAuthHeaderCallbacks[i];\n            if (scope === callbackObj.scope) {\n                objectsToNotify.push(callbackObj);\n                indexesToRemove.push(i);\n            }\n        }\n\n        // remove processed callbacks\n        for (var j = indexesToRemove.length - 1; j >= 0; j--) {\n            obtainAuthHeaderCallbacks.splice(indexesToRemove[j], 1);\n        }\n\n        // if there is at least one object in the queue, send auth request for its scope\n        if (obtainAuthHeaderCallbacks.length > 0) {\n            startAuthorizationProcess(obtainAuthHeaderCallbacks[0].scope);\n        }\n\n        // notify objects. This must be done after splice, because it could be that the code being notified\n        // is supposed to send other requests requiring authorization. It means that the callback array\n        // must be cleared before notifications are sent.\n        for (var k = 0; k < objectsToNotify.length; k++) {\n            isSuccess ? objectsToNotify[k].deferred.resolve(response) : objectsToNotify[k].deferred.reject(response);\n        }\n    }\n\n    function rejectAllCallbacks(error) {\n        var objectsToNotify = obtainAuthHeaderCallbacks.slice();\n        obtainAuthHeaderCallbacks = [];\n        authorizationAlreadyInProgress = false;\n        // this method is called upon unrecoverable error; reject all and clear the queue\n        for (var n = 0; n < objectsToNotify.length; n++) {\n            objectsToNotify[n].deferred.reject(error);\n        }\n    }\n\n    function updateClientIds(newClientId) {\n        // update all callback objects with the new client id; called after processing of \"unknown client', when the new\n        // client id has been received\n        for (var i = 0; i < obtainAuthHeaderCallbacks.length; i++) {\n            obtainAuthHeaderCallbacks[i].clientId = newClientId;\n        }\n    }\n\n    var clientInstanceIdCallbacks = [];\n\n    function processClientInstanceCallbacks(wlresponse, isSuccess) {\n        var objectsToNotify = clientInstanceIdCallbacks.slice();\n        clientInstanceIdCallbacks = [];\n\n        for (var i = 0; i < objectsToNotify.length; i++) {\n            isSuccess ? objectsToNotify[i].resolve(wlresponse) : objectsToNotify[i].reject(wlresponse);\n        }\n\n    }\n\n    var __deleteCachedScopeByResource = function (request) {\n        var url = request.requestOptions.url;\n        var method = request.requestOptions.method;\n        var key = url + '_' + method;\n        removeItemFromMap(resourceToScopeMappingKey, key);\n    };\n\n    // send a request using WL.Request to preAuthorization end point with specified clientId and scope\n    function invokePreAuthorizationRequest(scope, credentials) {\n        var dfd = WLJQ.Deferred();\n        var requestOptions = createCallbacksForPreAuth(dfd);\n        requestOptions.parameters[PARAM_CLIENT_ID_KEY] = __getClientId();\n\n        if (!__isUndefinedOrNull(scope)) {\n            requestOptions.parameters[PARAM_SCOPE_KEY] = scope;\n        }\n        // For login requests\n        if (!__isUndefinedOrNull(credentials)) {\n            var challengeResponse = {};\n            challengeResponse[scope] = credentials;\n            requestOptions.parameters[CHALLENGE_RESPONSE_KEY] = challengeResponse;\n                \n        if (!__isUndefinedOrNull(loginTimeout)) {\n            requestOptions.timeout = loginTimeout;\n        }\n        \n        }\n\n        if(WL.Config.__getSDKProtocolVersion().sdk_protocol_version >= 2 && WL.Crypto.cryptoFlag == true){\n            WL.CertManager.getEncryptedDeviceID().then(function (data) {\n                requestOptions.parameters[PARAM_DEVICE_ID_KEY] = data;\n                makeRequest('preauth/v1/preauthorize', requestOptions, true);\n            }, function (e) {\n                console.error(e);\n            });\n        } else{\n            makeRequest('preauth/v1/preauthorize', requestOptions, true);\n        }\n\n        return dfd.promise();\n    }\n\n    var AUTHENTICATION_SERVER_VERSION_KEY = \"server_version\";\n    var MINIMUM_SERVER_SUPPORTED = \"8.0.2017020513\";\n    var GREATER_THAN_IFIX = \"8.0.0.0-IF201701250919\";\n\n    // Validate that version was sent and it is newer than minimal version. If version is not set - return false.\n    var matchMinimumServerFromResponse = function(response){\n        if (WL.Client.isGatewayResponse(response)){\n            return true;\n        }\n        if (response.responseJSON!=null && (AUTHENTICATION_SERVER_VERSION_KEY in response.responseJSON)){//did server sent version\n            var version = response.responseJSON[\"server_version\"];\n            var versionParts = version.split(\".\");\n            if (__compareVersions(versionParts,MINIMUM_SERVER_SUPPORTED.split(\".\"))<1){\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // compares the first 3 parts of the version.\n    // returns:\n    //      -1 if a > b\n    //      0  if a = b\n    //      1  if a < b\n    var __compareVersions = function(a,b){\n            for (var i=0;i<3;i++){\n                if (!a[i]){ //add '0' if version part is missing\n                    a.push(\"0\");\n                }\n                if (!b[i]){ //add '0' if version part is missing\n                    b.push(\"0\");\n                }\n                a[i] = addLeadingZeros(a[i]);//add leading zeros to verify string size is equal\n                b[i] = addLeadingZeros(b[i]);//add leading zeros to verify string size is equal\n            }\n            var aStr = a.slice(0,3).join(\"\");//create a string from the first 3 parts of the version\n            var bStr = b.slice(0,3).join(\"\");//create a string from the first 3 parts of the version\n            if (aStr<bStr){\n                return 1;\n            }\n            return aStr>bStr ? -1 : 0;\n\n    }\n\n    var VERSION_PART_LENGTH = 20;\n    function addLeadingZeros(s) {\n        while (s.length < VERSION_PART_LENGTH) s = \"0\" + s;\n        return s;\n    };\n\n    var createCallbacksForRegistration = function(registrationCallbackDfd, params) {\n        var requestOptions = {\n            method: 'POST',\n            parameters: params,\n            onSuccess: function (response) {\n                if (matchMinimumServerFromResponse(response)){\n                    if(response.status == 200) {\n                        registrationCallbackDfd.resolve(response);\n                    }\n                    // Get the clientId from the response\n                    var locationHeader = response.getHeader(\"Location\");\n                    if(__isUndefinedOrNull(locationHeader)) {\n                        // If we get an error, we reject the promise\n                        processClientInstanceCallbacks(new WL.Response(response), false);\n                        return;\n                    }\n                    // Extract clientID\n                    var split = locationHeader.split('/');\n                    var clientId = split[split.length -1];\n                    __setClientId(clientId);\n                    __setClientRegisteredData(WL.BrowserManager.getDeviceData());\n\n                    // Get Analytics information from response\n                    var responseJson = response._getResponseJSON();\n                    var analyticsURL = responseJson.AnalyticsURL;\n                    __setAnalyticsURL(analyticsURL);\n                    processClientInstanceCallbacks(response, true);\n                }\n                else{\n                    var errorString = \"This version of the MobileFirst client SDK requires a minimal server version greater than IFIX \" + GREATER_THAN_IFIX;\n                    var responseData = {\n                        status: 505, //Represent version not supported\n                        responseJSON: {\n                            errorCode: WL.ErrorCode.MINIMUM_SERVER,\n                            errorMsg: errorString\n                        }\n                    };\n                    var failResponse = new WL.Response(responseData, null);\n                    WL.Logger.error(errorString);\n                    processClientInstanceCallbacks(failResponse, false);\n                }\n            },\n            onFailure: function (response) {\n                var failResponse = new WL.Response(response);\n                if (!__isUndefinedOrNull(response)) {\n                    if (!matchMinimumServerFromResponse(response)\n                    && response.responseJSON.errorCode != WL.ErrorCode.UNRESPONSIVE_HOST){\n                    //if the version is older then minial version and host is actually responsive\n                        var errorString = \"This version of the MobileFirst client SDK requires a minimal server version greater than IFIX \" + GREATER_THAN_IFIX;\n                        var responseData = {\n                            status: 505, //Represent version not supported\n                            responseJSON: {\n                                errorCode: WL.ErrorCode.MINIMUM_SERVER,\n                                errorMsg: errorString\n                            }\n                        };\n                        failResponse = new WL.Response(responseData);\n                    }\n                    WL.Logger.debug('Authorization request failed with response: ' + response.responseText);\n                }\n                processClientInstanceCallbacks(failResponse, false);\n\n            },\n            onAuthRequestFailure: function (response) {\n                processClientInstanceCallbacks(new WL.Response(response), false);\n            },\n            onAuthException: function (response, ex) {\n                var transport = {\n                    status: 500,\n                    responseJSON: {\n                        errorCode: WL.ErrorCode.API_INVOCATION_FAILURE,\n                        errorMsg: ex.message\n                    }\n                };\n                var failResponse = new WL.Response(transport, null);\n                processClientInstanceCallbacks(response, false);\n            },\n            optionalHeaders: {}\n        };\n        return requestOptions;\n    };\n\n    var createCallbacksForLogoutRequest = function (callbackDfd, params) {\n        var requestOptions = {\n            method: 'POST',\n            contentType : 'application/x-www-form-urlencoded',\n            parameters: params,\n            onSuccess: function (response) {\n                // Clear scope to token mappings\n                WL.DAO.setItem(scopeToTokenMappingKey,{}, mappingOptions);\n\n                callbackDfd.resolve();\n            },\n            onFailure: function (response) {\n                if (!__isUndefinedOrNull(response)) {\n                    WL.Logger.debug('Logout request failed with response: ' + response.responseText);\n                }\n                callbackDfd.reject(new WL.Response(response));\n            },\n            onAuthRequestFailure: function (response) {\n                callbackDfd.reject(response);\n            },\n            onAuthException: function (response, ex) {\n                var transport = {\n                    status: 500,\n                    responseJSON: {\n                        errorCode: WL.ErrorCode.API_INVOCATION_FAILURE,\n                        errorMsg: ex.message\n                    }\n                };\n                var failResponse = new WL.Response(transport, null);\n                callbackDfd.reject(failResponse);\n            },\n            optionalHeaders: {}\n        };\n        return requestOptions;\n    };\n\n    var createCallbacksForAuthorization = function (AuthCallbackDfd, params) {\n        var requestOptions = {\n            method: 'GET',\n            parameters: params,\n            onSuccess: function (response) {\n                // Get the grant-code from the response\n                var responseJSON = response.responseJSON;\n                var code = responseJSON['code'];\n                var error = responseJSON['error'];\n                if(!__isUndefinedOrNull(error) || __isUndefinedOrNull(code)) {\n                    // If we get an error, we reject the promise\n                    AuthCallbackDfd.reject(new WL.Response(response));\n                    return;\n                }\n                // resolve the promise with the grantcode\n                AuthCallbackDfd.resolve(code);\n            },\n            onFailure: function (response) {\n                if (!__isUndefinedOrNull(response)) {\n                    WL.Logger.debug('Authorization request failed with response: ' + response.responseText);\n                }\n                AuthCallbackDfd.reject(new WL.Response(response));\n            },\n            onAuthRequestFailure: function (response) {\n                AuthCallbackDfd.reject(response);\n            },\n            onAuthException: function (response, ex) {\n                var transport = {\n                    status: 500,\n                    responseJSON: {\n                        errorCode: WL.ErrorCode.API_INVOCATION_FAILURE,\n                        errorMsg: ex.message\n                    }\n                };\n                var failResponse = new WL.Response(transport, null);\n                AuthCallbackDfd.reject(failResponse);\n            },\n            optionalHeaders: {}\n        };\n        return requestOptions;\n    };\n\n    /*\n     TODO : Make sure request is send as FORM params\n     */\n    var createCallbacksForTokenRequest = function (tokenCallbackDfd, params) {\n        var requestOptions = {\n            method: 'POST',\n            parameters: params,\n            contentType : 'application/x-www-form-urlencoded',\n            onSuccess: function (response) {\n                var responseJSON = response.responseJSON;\n                var accessTokenValue = responseJSON['access_token'];\n                if(__isUndefinedOrNull(accessTokenValue)) {\n                    tokenCallbackDfd.reject(new WL.Response(response));\n                    return;\n                }\n                var scope = responseJSON['scope'];\n                var exp = responseJSON['expires_in'];\n                var accessToken = new WL.AccessToken(accessTokenValue, exp, scope);\n                tokenCallbackDfd.resolve(accessToken);\n            },\n            onFailure: function (response) {\n                if (!__isUndefinedOrNull(response)) {\n                    WL.Logger.debug('Token request failed with response: ' + response.responseText);\n                }\n                tokenCallbackDfd.reject(new WL.Response(response));\n            },\n            onAuthRequestFailure: function (response) {\n                tokenCallbackDfd.reject(response);\n            },\n            onAuthException: function (response, ex) {\n                var transport = {\n                    status: 500,\n                    responseJSON: {\n                        errorCode: WL.ErrorCode.API_INVOCATION_FAILURE,\n                        errorMsg: ex.message\n                    }\n                };\n                var failResponse = new WL.Response(transport, null);\n                tokenCallbackDfd.reject(failResponse);\n            }\n        };\n        return requestOptions;\n    };\n\n\n    var createCallbacksForPreAuth = function (preAuthCallbackDfd) {\n        var requestOptions = {\n            method: 'POST',\n            parameters: {},\n            onSuccess: function (response) {\n                preAuthCallbackDfd.resolve(response);\n            },\n            onFailure: function (response) {\n                if (!__isUndefinedOrNull(response)) {\n                    WL.Logger.debug('Authorization request failed with response: ' + response.responseText);\n                }\n                preAuthCallbackDfd.reject(new WL.Response(response));\n            },\n            onAuthRequestFailure: function (response) {\n                preAuthCallbackDfd.reject(response);\n            },\n            onAuthException: function (response, ex) {\n                var transport = {\n                    status: 500,\n                    responseJSON: {\n                        errorCode: WL.ErrorCode.API_INVOCATION_FAILURE,\n                        errorMsg: ex.message\n                    }\n                };\n                var failResponse = new WL.Response(transport, null);\n                preAuthCallbackDfd.reject(failResponse);\n            },\n            optionalHeaders: {}\n        };\n        return requestOptions;\n    };\n\n\n\n    var __getClientId = function () {\n        return WL.DAO.getItem(clientIdKey);\n    };\n\n    var __setClientId = function (id) {\n        if(!id) {\n            WL.DAO.removeItem(clientIdKey);\n            wlanalytics._setClientId(\"\");\n        }\n        WL.DAO.setItem(clientIdKey, id);\n        wlanalytics._setClientId(id);\n    };\n\n    var __setAnalyticsURL = function (id) {\n        if(!id) {\n            WL.DAO.removeItem(analyticsURLKey);\n        }\n        WL.DAO.setItem(analyticsURLKey, id);\n    };\n\n    var __setAnalyticsApiKey = function (id) {\n        if(!id) {\n            WL.DAO.removeItem(analyticsApiKey);\n        }\n        WL.DAO.setItem(analyticsApiKey, id);\n    };\n\n    var __invokeInstanceRegistration = function() {\n        var dfd = WLJQ.Deferred();\n\n        // put all incoming calls to queue\n        clientInstanceIdCallbacks.push(dfd);\n\n        if (clientInstanceIdCallbacks.length > 1) {\n            return dfd.promise();\n        }\n\n        var path = 'registration/v1/self';\n        paramsForRegistrationRequest().then(function(params){\n            var requestOptions = createCallbacksForRegistration(dfd, params);\n            if(!__isUndefinedOrNull(__getClientId())) {\n                // ClientID exists, this is re-registration\n                requestOptions.method = 'PUT';\n                path = path + '/' + __getClientId();\n            }\n            makeRequest(path, requestOptions, false);\n\n        });\n\n        return dfd.promise();\n    };\n\n    var __deleteAuthData = function () {\n        var dfd = WLJQ.Deferred();\n\n        // Remove mappings\n        clearMappings();\n\n        // Remove ClientID and Client Registration Data\n        __setClientId(null);\n        __setClientRegisteredData(null);\n\n        //Remove Analytics data\n        __setAnalyticsURL(null);\n        __setAnalyticsApiKey(null);\n\n        // Remove keypair\n        WL.CertManager.deleteKeyPair().then(function(){\n            dfd.resolve();\n        });\n\n        // WL.IndexDB.clearDB().then(function(){\n        //     dfd.resolve();\n        // });\n        return dfd.promise();\n    };\n\n    var __invokeAuthorizationRequestForScope = function (scope) {\n        var dfd = WLJQ.Deferred();\n        var params = paramsForAuthorizationRequest(scope);\n        var requestOptions = createCallbacksForAuthorization(dfd, params);\n\n        makeRequest('az/v1/authorization', requestOptions, true);\n        return dfd.promise();\n    };\n\n    /**\n     * Invokes a request to the token endpoint\n     * @param grantcode\n     */\n    function invokeTokenRequest(grantcode) {\n        var dfd = WLJQ.Deferred();\n        paramsForTokenRequest(grantcode).then(function(params){\n            var requestOptions = createCallbacksForTokenRequest(dfd, params);\n            makeRequest('az/v1/token', requestOptions, true);\n        });\n        return dfd.promise();\n    }\n\n    var __cacheScopeByResource = function (resource, scope) {\n        var method = resource.requestOptions.method;\n        var path = resource.requestOptions.url;\n        var key = path + \"_\" + method;\n        var sortedScope = sortScopeAlphabetically(scope);\n        addItemToMap(resourceToScopeMappingKey, key, sortedScope);\n    };\n\n    var setAuthorizationServerUrl = function (url) {\n        WL.Validators.validateURLOrNull(url, 'setAuthorizationServerUrl');\n        WL.DAO.setItem('com.mfp.authorization.url', url);\n    };\n\n    var getAuthorizationServerUrl = function () {\n        var url = WL.DAO.getItem('com.mfp.authorization.url');\n        if(__isUndefinedOrNull(url)) {\n            url = WL.Config.__getBaseURL();\n        }\n        return url;\n    };\n\n    /**\n     *\n     * @param isAZRequest\n     * @returns The serverURL, which could be with the AZ or the MFP depending on the argument\n     * @private\n     */\n    var __getServerUrl = function (isAZRequest) {\n        return isAZRequest ? getAuthorizationServerUrl() : WL.Config.__getBaseURL();\n    };\n\n    var __getParameterByName = function (url, name) {\n        var parts = url.split('?');\n        if (parts.length < 2) {\n            return null;\n        }\n\n        // there should be exactly two elements in the finalParts array. If we have more than two elements in the 'parts' array,\n        // then the redirect url contains some other '?'\n        var finalParts = [parts[0]];\n        parts.splice(0, 1);\n        // join extra parts back and push them to the second element of 'finalParts'\n        finalParts.push(parts.join('?'));\n\n        var results = finalParts[1].split('&');\n        for (var i = 0; i < results.length; i++) {\n            var pair = results[i].split('=');\n            if (pair[0] === name) {\n                return decodeURIComponent(pair[1].replace(/\\+/g, ' '));\n            }\n        }\n        return null;\n    };\n\n    var isAuthorizationRequired = function (responseStatus, responseHeadersString) {\n        if (__isUndefinedOrNull(responseStatus) || __isUndefinedOrNull(responseHeadersString)) {\n            return false;\n        }\n        var headersMap = WLJSX.String.parseResponseHeaders(responseHeadersString);\n        var mfpConflictHeader = WLJSX.String.getHeaderByKey(headersMap, MFP_CONFLICT_HEADER);\n        if (responseStatus === 409 && !__isUndefinedOrNull(mfpConflictHeader)) {\n            return true;\n        }\n        var authenticationHeader = WLJSX.String.getHeaderByKey(headersMap, WWW_AUTHENTICATE_HEADER);\n        if ((responseStatus !== 401 && responseStatus !== 403) || __isUndefinedOrNull(authenticationHeader) || __isUndefinedOrNull(authenticationHeader[WWW_AUTHENTICATE_HEADER])) {\n            return false;\n        }\n        return (authenticationHeader[WWW_AUTHENTICATE_HEADER].indexOf('Bearer') >= 0);\n    };\n\n    var getResourceScope = function (responseHeadersString) {\n        if (__isUndefinedOrNull(responseHeadersString)) {\n            return null;\n        }\n        var headersMap = WLJSX.String.parseResponseHeaders(responseHeadersString);\n        var authenticationHeader = WLJSX.String.getHeaderByKey(headersMap, WWW_AUTHENTICATE_HEADER);\n        if (__isUndefinedOrNull(authenticationHeader)) {\n            return null;\n        }\n        return WLAuthorizationManager.__getAuthorizationScope(authenticationHeader[WWW_AUTHENTICATE_HEADER]);\n    };\n\n    var __isInvalidToken = function (transport) {\n        var responseAuthenticationHeader = transport.getResponseHeader(WWW_AUTHENTICATE_HEADER);\n        return responseAuthenticationHeader.indexOf('invalid_token') >= 0;\n    };\n\n    var __sendHeartBeat = function (intervalInSecs) {\n        setInterval(__HeartBeatTask, intervalInSecs);\n    };\n\n    var __HeartBeatTask = function () {\n        var id = __getClientId();\n        if (__isUndefinedOrNull(id)) {\n            WL.Logger.warn('Could not send heartbeat, heartbeat is sent only after client is registered');\n        }\n        else {\n            var jwt = new WL.JWT();\n            WL.CertManager.signJWS(jwt, {'kid' : __getClientId()}).then(function(signedData){\n                var params = {\n                    'client_assertion' : signedData,\n                    'client_assertion_type' : JWT_ASSERTION_TYPE\n                };\n                var options = {\n                    method: 'POST',\n                    contentType : 'application/x-www-form-urlencoded',\n                    parameters: params,\n                    onSuccess: function (response) {\n                        WL.Logger.debug('Heartbeat sent successfully');\n                    },\n                    onFailure: function (error) {\n                        WL.Logger.debug('Failed to send heartbeat. Response:  ' + JSON.stringify(error));\n                    }\n                };\n                makeRequest('preauth/v1/heartbeat', options, false);\n            },\n            function(error){\n                WL.Logger.debug('Failed to send heartbeat. Response:  ' + JSON.stringify(error));\n            });\n        }\n    };\n\n    var __invokeGetRegistrationData = function() {\n        var dfd = WLJQ.Deferred();\n\n        var id = __getClientId();\n        if (__isUndefinedOrNull(id)) {\n            WL.Logger.warn('Could not get registration data, client is not registered');\n            return dfd.reject();\n        }\n        else {\n            var jwt = new WL.JWT();\n            WL.CertManager.signJWS(jwt, {'kid' : id}).then(function(signedData){\n                    var params = {\n                        'client_assertion' : signedData,\n                        'client_assertion_type' : JWT_ASSERTION_TYPE\n                    };\n                    var options = {\n                        method: 'GET',\n                        contentType : 'application/x-www-form-urlencoded',\n                        parameters: params,\n                        onSuccess: function (response) {\n                            dfd.resolve(response);\n                        },\n                        onFailure: function (error) {\n                            dfd.reject(error);\n                        }\n                    };\n                    makeRequest('registration/v1/self/' + id, options, false);\n                },\n                function(error){\n                    WL.Logger.debug('Failed to send heartbeat. Response:  ' + JSON.stringify(error));\n                });\n        }\n        return dfd.promise();\n    };\n\n    var __isUndefinedOrNull = function (object) {\n        return typeof (object) === 'undefined' || object === null;\n    };\n\n    function __login(securityCheck, credentials, userCallbackDfd) {\n        if(!shouldRegister()) {\n            sendLoginRequest(securityCheck, credentials, __getClientId(), userCallbackDfd);\n        } else {\n            __invokeInstanceRegistration().then(function(){\n                sendLoginRequest(securityCheck, credentials, __getClientId(), userCallbackDfd);\n            }, function(error) {\n                // In case of an error on registration, reject all waiting requests.\n                rejectAllCallbacks(error);\n                userCallbackDfd.reject(error);\n                __deleteAuthData();\n\n            })\n        }\n    }\n\n    function sendLoginRequest(securityCheck, credentials, clientId, userCallbackDfd) {\n        invokePreAuthorizationRequest(securityCheck, credentials).then(\n            function (transport) {\n                // No need to continue to authorization end point.\n                WL.Logger.debug('Successfully logged in to security check: ' + securityCheck);\n                authorizationAlreadyInProgress = false;\n                processObtainAccessTokenCallbacks(clientId, securityCheck, transport, true);\n                userCallbackDfd.resolve();\n            },\n            function (error) {\n                var loginRetryObject = {\n                    retryFunction: loginRetry,\n                    userCallbackDfd: userCallbackDfd,\n                    credentials: credentials\n                };\n                onAuthorizationProcessFailure(error, securityCheck, clientId, loginRetryObject);\n            });\n    }\n\n\n    var setLoginTimeout = function(timeout) {\n        if (timeout < MIN_LOGIN_TIMEOUT) {\n             WL.Logger.debug('Login timeout has to be a minimum of 5 seconds. Resetting to 5 seconds');\n             loginTimeout = MIN_LOGIN_TIMEOUT;\n           } else {\n            loginTimeout = timeout;\n        }  \n    };\n\n    function login(securityCheck, credentials) {\n        var dfd = WLJQ.Deferred();\n        // make sure there is only one authorization request in progress\n        if (isAuthorizationInProgress()) {\n            var failResponse = createErrorResponse(500, WL.ErrorCode.AUTHORIZATION_FAILURE, LOGIN_ALREADY_IN_PROCESS);\n            dfd.reject(failResponse);\n        } else {\n            if (__isUndefinedOrNull(securityCheck)) {\n                securityCheck = DEFAULT_SCOPE;\n            }\n            authorizationAlreadyInProgress = true;\n            __login(securityCheck, credentials, dfd);\n        }\n        return dfd.promise();\n    }\n\n    var loginRetry = function (scope, loginRetryObject) {\n        __login(scope, loginRetryObject.credentials, loginRetryObject.userCallbackDfd);\n    };\n\n    var isAuthorizationInProgress = function () {\n        return obtainAuthHeaderCallbacks.length > 1 || authorizationAlreadyInProgress;\n    };\n\n    var onAuthorizationProcessFailure = function (error, scope, clientId, tryAgainObject) {\n            // in case of unknown client error do not process the callbacks; call the registration part instead\n            var shouldProcessCallbacksOnError = true;\n            var registerWithProtocolOne = false;\n            registerWithProtocolOne = error.errorCode == \"INVALID_REQUEST\" && WL.Config.__getSDKProtocolVersion().sdk_protocol_version >= 2 && WL.Crypto.cryptoFlag == false;\n            if ((isUnknownClientError(error) && !invalidClientReceived) || registerWithProtocolOne) {\n                // request failed with unknown client\n                invalidClientReceived = true; // set a flag that prevents infinite loop\n                shouldProcessCallbacksOnError = false; // do not process callbacks, because request will be sent again\n                // call the native to delete the old authentication data\n                WLAuthorizationManager.__deleteAuthData()\n                    .then(\n                        function () {\n                            // register the client again\n                            __invokeInstanceRegistration()\n                                .then(\n                                    function () {\n                                        // the registration returns the new client id.\n                                        // update all callbacks in queue with the new client id\n                                        updateClientIds(__getClientId());\n                                        // resend the request\n                                        tryAgainObject.retryFunction(scope, tryAgainObject);\n                                    },\n                                    function (error) {\n                                        rejectAllCallbacks(error);\n                                        __deleteAuthData();\n                                    }\n                                );\n                        },\n                        function (error) {\n                            // unable to delete the old auth data, reject all callbacks and do not re-send the request\n                            rejectAllCallbacks(error);\n                        }\n                    );\n            }\n            // notify the callers about error if it is not the 'unknown client' error thrown on the first time\n            if (shouldProcessCallbacksOnError) {\n                authorizationAlreadyInProgress = false;\n                processObtainAccessTokenCallbacks(clientId, scope, error, false);\n                if (!__isUndefinedOrNull(tryAgainObject.userCallbackDfd)) {\n                    tryAgainObject.userCallbackDfd.reject(error);\n                }\n            }\n        };\n\n\t/**\n         * Sorts the space separated scope alphabetically and ensures the default scope exists.\n         *\n         * Examples: when this flag is set to true, these will be the input and output values of\n         * the method:\n         * \"RegisteredClient\" --> \"RegisteredClient\"\n         * null --> \"RegisteredClient\"\n         * \"RegisteredClient sc1 sc2\" --> \"RegisteredClient sc1 sc2\"\n         * \"sc2 sc1\" --> \"RegisteredClient sc1 sc2\"\n         *\n         * @param scope The given raw scope\n         * @return The sorted scope minus the default scope\n         */\n        function sortScopeAlphabetically(scope) {\n            if (scope == null || scope === DEFAULT_SCOPE) {\n                return DEFAULT_SCOPE;\n            }\n            if (scope.indexOf(DEFAULT_SCOPE)<0){\n                scope += \" \" + DEFAULT_SCOPE;\n            }\n            // Replace multiple spaces with a single space\n            scope = scope.replace(/  +/g, ' ').trim();\n            var scopeArray = scope.match(/\\S+/g);\n            scopeArray.sort();\n            return scopeArray.join(' ');\n        }\n\n    function logout(securityCheck) {\n        var dfd = WLJQ.Deferred();\n        var id = __getClientId();\n        if (isAuthorizationInProgress() || __isUndefinedOrNull(id)) {\n            return dfd.reject(createErrorResponse(500, WL.ErrorCode.AUTHORIZATION_FAILURE, LOGOUT_ERROR_MSG));\n        }\n        if (__isUndefinedOrNull(securityCheck)) {\n            securityCheck = DEFAULT_SCOPE;\n        }\n        authorizationAlreadyInProgress = true;\n        __sendLogoutRequest(securityCheck).then(\n            function () {\n                authorizationAlreadyInProgress = false;\n                processObtainAccessTokenCallbacks(null, securityCheck, null, true);\n                dfd.resolve();\n            },\n            function (error) {\n                authorizationAlreadyInProgress = false;\n                processObtainAccessTokenCallbacks(null, securityCheck, null, false);\n                dfd.reject(error);\n            });\n\n        return dfd.promise();\n    }\n\n    function __setClientRegisteredData(data) {\n        if(!data) {\n            WL.DAO.removeItem(clientApplicationDataKey);\n        }\n        return WL.DAO.setItem(clientApplicationDataKey, data);\n    }\n\n    function __getClientRegisteredData() {\n        return WL.DAO.getItem(clientApplicationDataKey);\n    }\n\n    function __sendLogoutRequest(securityCheck) {\n        var dfd = WLJQ.Deferred();\n        paramsForLogoutRequest(securityCheck).then(function(params){\n            var requestOptions = createCallbacksForLogoutRequest(dfd, params);\n            makeRequest('preauth/v1/logout', requestOptions, false);\n        });\n        return dfd.promise();\n    }\n\n    /* Determines if the client needs to register/reregister, or not */\n    function shouldRegister() {\n        var id = __getClientId();\n        if(__isUndefinedOrNull(id)) {\n            return true;\n        }\n        var registeredData = __getClientRegisteredData();\n        var currentData = WL.BrowserManager.getDeviceData();\n        return JSON.stringify(registeredData) !== JSON.stringify(currentData);\n    }\n\n    /* Makes a request to MFP or AZ (based on arg) */\n    function makeRequest(path, requestOptions, isAZRequest) {\n        var serverURL = __getServerUrl(isAZRequest);\n        return new WLJSX.Ajax.WLRequest(serverURL + '/' + path, requestOptions);\n    }\n\n    function paramsForAuthorizationRequest(scope) {\n        var params = {};\n        params['response_type'] = 'code';\n        params[PARAM_CLIENT_ID_KEY] = __getClientId();\n        params['scope'] = __isUndefinedOrNull(scope) ? '' : scope;\n        params['redirect_uri'] = buildRedirectURI() ;\n\n        return params;\n    }\n\n    function paramsForLogoutRequest(securityCheck) {\n        var dfd = WLJQ.Deferred();\n        var jwt = new WL.JWT();\n\n        WL.CertManager.signJWS(jwt, {'kid' : __getClientId()}).then(function(signedData){\n            var params = {\n                'client_assertion' : signedData,\n                'security_check' : securityCheck,\n                'client_assertion_type' : JWT_ASSERTION_TYPE\n            };\n            dfd.resolve(params);\n        });\n        return dfd.promise();\n    }\n\n    function paramsForRegistrationRequest() {\n        var dfd = WLJQ.Deferred();\n        var params = {};\n        var registrationData = {\n            'device' : WL.BrowserManager.getDeviceData(),\n            'application' : WL.Config.__getApplicationData()\n        };\n       if(WL.Config.__getSDKProtocolVersion().sdk_protocol_version >= 2 && WL.Crypto.cryptoFlag == true){\n            registrationData['attributes'] = WL.Config.__getSDKProtocolVersion();\n        }\n        WL.CertManager.signJWS(registrationData).then(function(signedData){\n            params['signedRegistrationData'] = decomponentJWS(signedData);\n            dfd.resolve(params);\n        },\n        function(error){\n            dfd.reject(error);\n        });\n        return dfd.promise();\n    }\n\n    function paramsForTokenRequest(code) {\n        var dfd = WLJQ.Deferred();\n        var jwt = new WL.JWT(code, 'az/v1/token');\n        WL.CertManager.signJWS(jwt, {'kid' : __getClientId()}).then(function(signedData){\n            var params = {\n                'client_assertion' : signedData,\n                'code' : code,\n                'grant_type' : 'authorization_code',\n                'redirect_uri' : buildRedirectURI(),\n                'client_assertion_type' : JWT_ASSERTION_TYPE\n            };\n            dfd.resolve(params);\n        },\n        function(error){\n            dfd.reject(error);\n        });\n        return dfd.promise();\n    }\n\n    function buildRedirectURI() {\n        return WL.Config.__getBaseURL() + AZ_REDIRECT_URI + '/' + __getClientId();\n    }\n\n    function decomponentJWS(signedData){\n        var splitData = signedData.split('.');\n        return {\n            'header' : splitData[0],\n            'payload' : splitData[1],\n            'signature' : splitData[2]\n        }\n\n    }\n\n    function createErrorResponse(status, errorCode, errorMsg) {\n        var transport = {\n            status: status,\n            responseJSON: {\n                errorCode: errorCode,\n                errorMsg: errorMsg\n            }\n        };\n        return new WL.Response(transport, null);\n    }\n\n    return {\n        isAuthorizationRequired: isAuthorizationRequired,\n        obtainAccessToken: obtainAccessToken,\n        getResourceScope: getResourceScope,\n        clearAccessToken: clearAccessToken,\n        setAuthorizationServerUrl: setAuthorizationServerUrl,\n        getAuthorizationServerUrl: getAuthorizationServerUrl,\n        login: login,\n        setLoginTimeout:setLoginTimeout,\n        logout: logout,\n        __invokeGetRegistrationData : __invokeGetRegistrationData,\n        __invokeInstanceRegistration : __invokeInstanceRegistration,\n        __logAndThrowError : __logAndThrowError,\n        __getAuthorizationScope: __getAuthorizationScope,\n        __getClientId: __getClientId,\n        __getCachedScopeByResource: __getCachedScopeByResource,\n        __deleteAuthData: __deleteAuthData,\n        __deleteCachedScopeByResource : __deleteCachedScopeByResource,\n        __getWlServerUrl: __getServerUrl,\n        __getParameterByName: __getParameterByName,\n        __invokeAuthorizationRequestForScope: __invokeAuthorizationRequestForScope,\n        __cacheScopeByResource: __cacheScopeByResource,\n        __getCachedAccessToken: __getCachedAccessToken,\n        __isInvalidToken: __isInvalidToken,\n        __sendHeartBeat: __sendHeartBeat,\n        __sendLogoutRequest: __sendLogoutRequest,\n        __serverRelativeTime: SERVER_RELATIVE_TIME,\n        WL_AUTHORIZATION_HEADER: WL_AUTHORIZATION_HEADER,\n        WWW_AUTHENTICATE_HEADER: WWW_AUTHENTICATE_HEADER,\n        DEFAULT_SCOPE: DEFAULT_SCOPE,\n        MFP_CONFLICT_HEADER: MFP_CONFLICT_HEADER\n    };\n\n}());\n\n\n/**\n * ================================================================= \n * Source file taken from :: deviceAuthentication.web.js\n * ================================================================= \n */\n\n/**\n * @license\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2015 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n */\n\n/**\n * Object which handle the device authentication\n */\n__WLDeviceAuth = function() {\n    this.__requestToResend = null, this.__deviceChallengeToken = null,\n\n    /**\n     * Default implementation for WL.Client.init's options\n     * onGetCustomDeviceProperties. Our default implementation actually does\n     * nothing. If overriding this method, the user must call\n     * resumeDeviceAuthProcess with the payload\n     * \n     * @param resumeDeviceAuthProcess\n     *            function to call when done with getting extra data\n     */\n    this.__defaultOnGetCustomDeviceProperties = function(resumeDeviceAuthProcess) {\n        resumeDeviceAuthProcess({});\n    },\n\n    \n    /**\n     * get device friendly name\n     * \n     * @param successCallback\n     * @param failureCallback\n     */\n    this.__getDeviceDisplayName = function(successCallback, failureCallback) {\n       WLAuthorizationManager.__invokeGetRegistrationData().then(\n           function(response){\n               var responseJSON = response.responseJSON;\n               var regData = responseJSON['registration'];\n               var device = regData['device'];\n               var displayName = device['deviceDisplayName'];\n               if(!displayName) {\n                   displayName = null;\n               }\n               successCallback(displayName);\n       },\n           function(error){\n               failureCallback(error);\n           });\n    },\n    \n    /**\n     * set device friendly name\n     * \n     * @param successCallback\n     * @param failureCallback\n     */\n    this.__setDeviceDisplayName = function(deviceDisplayName, successCallback, failureCallback) {\n        var id = WLAuthorizationManager.__getClientId();\n        if(!id) {\n            failureCallback('Can not set display name until device is registered');\n        } else {\n            WL.BrowserManager.__setLocalDeviceDisplayName(deviceDisplayName);\n\n            // After we set the deviceDisplayName locally, we invoke re-registration to set the param in the server\n            WLAuthorizationManager.__invokeInstanceRegistration().then(\n                function() {\n                    WL.BrowserManager.__setLocalDeviceDisplayName(null);\n                    successCallback(null);\n            },\n                function(error) {\n                    WL.BrowserManager.__setLocalDeviceDisplayName(null);\n                    failureCallback(error);\n            });\n        }\n    };\n};\n__WL.prototype.DeviceAuth = new __WLDeviceAuth;\nWL.DeviceAuth = new __WLDeviceAuth;\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlcookiemanager.web.js\n * ================================================================= \n */\n\n/*\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2015 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n/*globals WL, WLJSX, __WL,device*/\n\n/**\n * Cookie manager singleton\n */\nWL.CookieManager = (function() {\n\n  /*jshint strict:false, quotmark:double*/\n\n  var COOKIE_JSESSION_ID = \"JSESSIONID\";\n  var COOKIE_WLSESSION_ID = \"WLSESSIONID\";\n\n  // WARN: This constant is also accessed in the iOS native code\n  // (WLCookieExtractor.m)\n  var PERSISTED_COOKIES_NAME = \"cookies\";\n\n  var cookies = null;\n  var cookiePersister = null;\n  var gadgetName = null;\n  var gadgetEnvironment = null;\n  var gadgetIID = null;\n\n  var CookiePersister = WLJSX.Class.create({\n    init: function() {},\n    storeCookies: function() {},\n    readCookies: function() {}, // throws exception on failure.\n    clearCookies: function() {}\n  });\n  \n  //\n  // Windows Phone Persister\n  //\n//  var WPCookiePersister = WLJSX.Class.create(CookiePersister, {\n//    storeCookies: function() {\n//      try {\n//        var JSONCookies = WLJSX.Object.toJSON(cookies);\n//        window.localStorage.setItem(PERSISTED_COOKIES_NAME, JSONCookies);\n//        WL.Logger.debug(\"Storing cookies: (\" + JSONCookies + \")\");\n//        this.readCookies();\n//      } catch (e) {\n//        WL.Logger.error(\"Error storing cookie: \" + e.message);\n//      }\n//    },\n//\n//    readCookies: function() {\n//      try {\n//        var JSONCookies = window.localStorage.getItem(PERSISTED_COOKIES_NAME);\n//\n//        if (JSONCookies !== null) {\n//          var cookiesObj = WLJSX.String.evalJSON(JSONCookies);\n//          /*jshint forin:false*/\n//          for (var key in cookiesObj) {\n//            cookies[key] = cookiesObj[key];\n//          }\n//        }\n//      } catch (e) {\n//        WL.Logger.error(\"Error reading cookies: \" + e.message);\n//      }\n//    },\n//\n//    clearCookies: function() {\n//      try {\n//        var JSONCookies = window.localStorage.getItem(PERSISTED_COOKIES_NAME);\n//        window.localStorage.removeItem(PERSISTED_COOKIES_NAME);\n//        WL.Logger.debug(\"Delete cookies: \" + JSONCookies);\n//      } catch (e) {\n//        WL.Logger.error(\"Error deleting cookies: \" + e.message);\n//      }\n//    }\n//  });\n\n  var LocalStorageCookiePersister = WLJSX.Class.create(CookiePersister, {\n    storeCookies: function() {\n      try {\n        var JSONCookies = WLJSX.Object.toJSON(cookies);\n        WL.Logger.debug(\"Storing cookies: (\" + JSONCookies + \")\");\n        __WL.LocalStorage.setValue(PERSISTED_COOKIES_NAME, JSONCookies);\n      } catch (e) {\n        WL.Logger.error(\"Error storing cookie: \" + e.message);\n      }\n    },\n\n    readCookies: function() {\n      try {\n        var JSONCookies = __WL.LocalStorage.getValue(PERSISTED_COOKIES_NAME);\n        if (JSONCookies === \"\") {\n          return;\n        }\n        WL.Logger.debug(\"Read cookies: \" + JSONCookies);\n        if (JSONCookies !== null) {\n          var cookiesObj = WLJSX.String.evalJSON(JSONCookies);\n          /*jshint forin:false*/\n          for (var key in cookiesObj) {\n            cookies[key] = cookiesObj[key];\n          }\n        }\n      } catch (e) {\n        WL.Logger.error(\"Error reading cookies: \" + e.message);\n      }\n    },\n\n    clearCookies: function() {\n      try {\n        var JSONCookies = WLJSX.Object.toJSON(cookies);\n        __WL.LocalStorage.clear(PERSISTED_COOKIES_NAME);\n        WL.Logger.debug(\"Delete cookies: \" + JSONCookies);\n      } catch (e) {\n        WL.Logger.error(\"Error deleting cookies: \" + e.message);\n      }\n    }\n  });\n\n  // \n  // Android\n  //\n  var AndroidCookiePersister = LocalStorageCookiePersister;\n\n  //\n  // iPhone\n  //  \n  var IPhoneCookiePersister = LocalStorageCookiePersister;\n\n  // Private methods of the cookie manager:\n\n  // Create the cookie persister according to the environment\n  var createCookiePersister = function() {\n    switch (gadgetEnvironment) {\n      case WL.Env.IPHONE:\n        cookiePersister = new IPhoneCookiePersister();\n        break;\n      case WL.Env.IPAD:\n        cookiePersister = new IPhoneCookiePersister();\n        break;\n      case WL.Env.ANDROID:\n        cookiePersister = new AndroidCookiePersister();\n        break;\n//      case WL.Env.WINDOWSPHONE8:\n//        cookiePersister = new WPCookiePersister();\n//        break;\n      default:\n        cookiePersister = null;\n        break;\n    }\n  };\n\n  var parseCookiesFromHeader = function(header) {\n    var resultCookies = [];\n    var headerValue = header.substr(header.indexOf(\":\") + 1);\n\n    var cookieParts = headerValue.split(\",\");\n    for (var i = 0; i < cookieParts.length; i++) {\n      var cookiePart = cookieParts[i];\n      // WL.Logger.debug(\"CookiePart: \" + cookiePart);\n      var cookieSubparts = cookiePart.split(\"=\");\n      if (cookieSubparts.length < 2) {\n        WL.Logger.error(\"invalid cookie header: \" + header);\n      } else {\n        var cookie = {\n          name: WLJSX.String.strip(cookieSubparts[0]),\n          value: WLJSX.String.strip(cookieSubparts[1].split(\";\")[0])\n        };\n        resultCookies.push(cookie);\n      }\n    }\n    return resultCookies;\n  };\n\n  var getCookie = function(cookieName) {\n    var cookieValue = \"\";\n    if (isCookieManagementRequired()) {\n      cookieValue = cookies[cookieName];\n    } else {\n      if (document.cookie.length > 0) {\n        var cookieStart = document.cookie.indexOf(cookieName + \"=\");\n        if (cookieStart !== -1) {\n          cookieStart = cookieStart + cookieName.length + 1;\n          var cookieEnd = document.cookie.indexOf(\";\", cookieStart);\n          /*jshint maxdepth:4*/\n          if (cookieEnd === -1) {\n            cookieEnd = document.cookie.length;\n          }\n          cookieValue = decodeURI(document.cookie.substring(cookieStart, cookieEnd));\n        }\n      }\n    }\n    if (typeof cookieValue === \"undefined\") {\n      cookieValue = null;\n    }\n    // WL.Logger.debug(\"getCookieValue: \" + cookieName + \"=\" + cookieValue);\n    return {\n      name: cookieName,\n      value: cookieValue\n    };\n  };\n\n  var isCookieManagementRequired = function() {\n    return false;\n  };\n\n  // Public API methods\n  return {\n    init: function(gadgetDisplayName, gadgetEnv, gadgetInstanceID) {\n      gadgetName = gadgetDisplayName;\n      gadgetEnvironment = gadgetEnv;\n      gadgetIID = gadgetInstanceID;\n\n      cookies = {};\n      createCookiePersister();\n\n      if (cookiePersister !== null) {\n        cookiePersister.init();\n        try {\n          cookiePersister.readCookies();\n        } catch (e) {\n          WL.Logger.error(\"error read cookies: \" + e.message);\n          cookiePersister.clearCookies();\n        }\n        WL.Logger.debug(\"CookieMgr read cookies: \" + WLJSX.Object.toJSON(cookies));\n      }\n    },\n\n    // Called by WP7 native code after call readCookies\n    updateCookies: function(JSONCookies) {\n      try {\n        var cookiesObj = WLJSX.String.evalJSON(JSONCookies);\n        /*jshint forin:false*/\n        for (var key in cookiesObj) {\n          cookies[key] = cookiesObj[key];\n        }\n      } catch (e) {\n        WL.Logger.error(\"Problems to update cookies \" + e + \" \" + JSONCookies);\n      }\n    },\n\n    clearCookies: function() {\n      cookies = {};\n      if (cookiePersister !== null) {\n        cookiePersister.clearCookies();\n      }\n    },\n\n    createCookieHeaders: function() {\n      var headers = {};\n      if (isCookieManagementRequired()) {\n        var cookieHeaderValue = \"\";\n        /*jshint forin:false*/\n        for (var key in cookies) {\n          cookieHeaderValue += key + \"=\" + cookies[key] + \";\";\n        }\n\n        if (cookieHeaderValue !== \"\") {\n          headers.Cookie = cookieHeaderValue;\n        }\n      }\n\n\t    var deviceId =  WL.BrowserManager.getDeviceData();\n\t    deviceId.environment = WL.Client.getEnvironment();\n\t    headers.deviceId = WLJSX.Object.toJSON(deviceId);\n      return headers;\n    },\n\n    handleResponseHeaders: function(headers) {\n      if (!isCookieManagementRequired()) {\n        return;\n      }\n      var sessionCookies = {};\n      for (var i = 0; i < headers.length; i++) {\n        var header = headers[i];\n        if (header.toLowerCase().indexOf(\"set-cookie\") > -1) {\n          var parsedCookies = parseCookiesFromHeader(header);\n          for (var j = 0; j < parsedCookies.length; j++) {\n            var cookie = parsedCookies[j];\n            // Persist only the non session cookies\n            /*jshint maxdepth:4, eqeqeq:false*/\n            if (cookie.name != COOKIE_JSESSION_ID && cookie.name != COOKIE_WLSESSION_ID) {\n              cookies[cookie.name] = cookie.value;\n            } else {\n              sessionCookies[cookie.name] = cookie.value;\n            }\n\n            if (cookiePersister !== null) {\n              /*jshint maxdepth:5*/\n              if (cookies !== null && WLJSX.Object.objectSize(cookies) > 0) {\n                // in case there is two requests immediate after\n                // login we need\n                // to ensure session cookies is not persist\n                delete cookies[COOKIE_WLSESSION_ID];\n                delete cookies[COOKIE_JSESSION_ID];\n                cookiePersister.storeCookies();\n              }\n            }\n          }\n        }\n      }\n\n      // Add the session cookies into the memory cookies\n      if (isCookieManagementRequired()) {\n        /*jshint forin:false*/\n        for (var key in sessionCookies) {\n          cookies[key] = sessionCookies[key];\n        }\n      }\n\n    },\n\n    getJSessionID: function() {\n      var jsessionidCookie = getCookie(COOKIE_JSESSION_ID);\n      return (jsessionidCookie === null) ? null : jsessionidCookie.value;\n    },\n\n    areCookiesEnabled: function() {\n      var enabled = true;\n      if (WL.EnvProfile.isEnabled(WL.EPField.WEB)) {\n        var date = new Date();\n        date.setTime(date.getTime() + (24 * 60 * 60 * 1000));\n        document.cookie = \"testcookie=oreo; expires=\" + date.toGMTString() + \"; path=/\";\n        var cookie = getCookie(\"testcookie\");\n        enabled = (cookie.value === \"oreo\");\n      }\n      return enabled;\n    }\n  };\n}());\n/* End CookieManager */\n\n/**\n * ================================================================= \n * Source file taken from :: worklight.js\n * ================================================================= \n */\n\n/*\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2015 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n */\n\n/*globals WL, __WL, WLJSX*/\n\n/*jshint strict:false*/\n\n/**\n * EnvironmentProfile\n */\nWL.EnvProfile = (function() {\n\n  var profile = null;\n\n  return {\n    initialize: function(env) {\n      if (typeof WL[env + 'ProfileData'] !== 'undefined') {\n        profile = WL[env + 'ProfileData'];\n      } else {\n        profile = WL.DefaultProfileData;\n      }\n    },\n\n    getValue: function(field) {\n      return profile[field];\n    },\n\n    isEnabled: function(field) {\n      return !!(field in profile && profile[field]);\n    },\n\n    disable: function(field) {\n      if (field in profile) {\n        profile[field] = false;\n      }\n    }\n  };\n})();\n\n__WL.MultiEventListener = WLJSX.Class.create({\n  isEventComplete: false,\n  onEventsComplete: null,\n  events: null,\n\n  initialize: function() {\n    this.events = {};\n  },\n\n  __onEvent: function(e) {\n    this.events[e.type] = true;\n    for (var x in this.events) {\n      if (!this.events[x]) {\n        return;\n      }\n    }\n    this.onEventsComplete();\n  },\n\n  registerEvent: function(e) {\n    document.addEventListener(e, this.__onEvent.bind(this), false);\n    this.events[e] = false;\n  }\n});\n\nvar __WLEvents = {\n  WORKLIGHT_IS_CONNECTED: 'WL:WORKLIGHT_IS_CONNECTED',\n  WORKLIGHT_IS_DISCONNECTED: 'WL:WORKLIGHT_IS_DISCONNECTED'\n};\n\n__WL.prototype.Events = __WLEvents;\nWL.Events = __WLEvents;\n\n/*jshint undef:false*/\n__WLLocalStorage = function() {\n  var isSupportLocalStorage = (typeof localStorage !== 'undefined');\n  var HTML5_NOT_SUPPORT_MSG = '. HTML5 localStorage not supported on current browser.';\n\n  function deviceReadyCallback() {\n    isSupportLocalStorage = (typeof localStorage !== 'undefined');\n    preventClearSpecialValues();\n  }\n\n  if (typeof document.addEventListener !== 'undefined') {\n    document.addEventListener('deviceready', deviceReadyCallback, false);\n  } else {\n    document.attachEvent('ondeviceready', deviceReadyCallback);\n  }\n\n  function preventClearSpecialValues() {\n    // prevent from clear MobileFirst Platform special values\n    if (typeof Storage !== 'undefined' && isSupportLocalStorage) {\n      Storage.prototype.clear = function() {\n        for (var item in localStorage) {\n          if (item !== 'cookies' && item !== 'userName') {\n            localStorage.removeItem(item);\n          }\n        }\n      };\n    }\n  }\n\n  this.getValue = function(key) {\n      var value = null;\n      if (isSupportLocalStorage) {\n        value = localStorage.getItem(key);\n      } else {\n        WL.Logger.debug('Can\\'t retrive value for key ' + key + HTML5_NOT_SUPPORT_MSG);\n      }\n      return value;\n    },\n\n    this.setValue = function(key, value) {\n      if (isSupportLocalStorage) {\n        localStorage.setItem(key, value);\n      } else {\n        WL.Logger.debug('Can\\'t set value ' + value + ' for key' + key + HTML5_NOT_SUPPORT_MSG);\n      }\n    },\n\n    this.clear = function(key) {\n      if (isSupportLocalStorage) {\n        localStorage.removeItem(key);\n      } else {\n        WL.Logger.debug('Can\\'t clear key ' + key + HTML5_NOT_SUPPORT_MSG);\n      }\n    },\n\n    this.clearAll = function() {\n      if (isSupportLocalStorage) {\n        localStorage.clear();\n      } else {\n        WL.Logger.debug('Can\\'t clear storage ' + HTML5_NOT_SUPPORT_MSG);\n      }\n    };\n};\n\n/*jshint newcap:false*/\n__WL.LocalStorage = new __WLLocalStorage();\n\n__WLDevice = function() {\n  /**\n   * Supported environments: Android, iOS\n   *\n   * @param callback -\n   *            the callback function\n   * @return network info from device in JSON format The returned object\n   *         consist from the following properties: isNetworkConnected,\n   *         isAirplaneMode, isRoaming, networkConnectionType, wifiName,\n   *         telephonyNetworkType, carrierName, ipAddress,\n   */\n  this.getNetworkInfo = function(callback) {\n    callback({});\n  };\n};\n__WL.prototype.Device = new __WLDevice();\nWL.Device = new __WLDevice();\n\n/**\n * ================================================================= \n * Source file taken from :: wlresourcerequest.web.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*globals WL, WL_, WLJQ, WLAuthorizationManager*/\n/*jshint maxparams:4*/\nWLResourceRequest = function (_url, _method, _options) {\n    /*jshint strict:false*/\n\n    function logAndThrowError(msg, callerName) {\n        if (WL.Logger) {\n            if (callerName) {\n                msg = 'Invalid invocation of method ' + callerName + '; ' + msg;\n            }\n            WL.Logger.error(msg);\n        }\n\n        throw new Error(msg);\n    }\n\n    var queryParameters = {};\n\n    function extractQueryParamFromUrl(_url) {\n        var vars = _url.split('?');\n        if (vars.length > 1) {\n            var tempParamaters = vars[1].split('&');\n            for (var i = 0; i < tempParamaters.length; i++) {\n                if (true) { // thanks jshint\n                    var pair = tempParamaters[i].split('=');\n                    var values = queryParameters[pair[0]];\n                    /*jshint maxdepth:5*/\n                    if (values === null || typeof (values) === 'undefined') {\n                        values = [];\n                        queryParameters[pair[0]] = values;\n                    }\n                    values[values.length] = pair[1];\n                }\n            }\n        }\n        return vars[0];\n    }\n\n    function isValidRequestMethod(method) {\n        return (method === WLResourceRequest.GET || method === WLResourceRequest.POST || method === WLResourceRequest.PUT ||\n        method === WLResourceRequest.DELETE || method === WLResourceRequest.HEAD || method === WLResourceRequest.OPTIONS ||\n        method === WLResourceRequest.TRACE);\n    }\n\n    function isUndefinedOrNull(value) {\n        return (typeof(value) === 'undefined' || value === null);\n    }\n    var url = (_url === null || typeof (_url) === 'undefined') ? logAndThrowError('Request URL must be specified.', 'WLResourceRequest') : extractQueryParamFromUrl(_url.trim());\n    var method = (typeof (_method) === 'undefined' || !isValidRequestMethod(_method)) ? logAndThrowError('Request method is invalid or not specified.', 'WLResourceRequest') : _method;\n    var timeout;\n    var headers = {};\n    var currentResourceRequest = this;\n    currentResourceRequest.scope = null;\n    var MAX_CONFLICT_ATTEMPTS = 7;\n    var backendServiceName = null;\n    var BACKEND_SERVICE = '/backendservice/';\n\n\n    /* support timeout given as 3rd parameter for backward compatibility */\n    if (typeof(_options) === 'number') {\n        timeout = _options;\n    } else {\n        if (!isUndefinedOrNull(_options) && !isUndefinedOrNull(_options.timeout)) { timeout = _options.timeout;}\n        if (!isUndefinedOrNull(_options) && !isUndefinedOrNull(_options.scope)) { currentResourceRequest.scope = _options.scope;}\n        if (!isUndefinedOrNull(_options) && !isUndefinedOrNull(_options.backendServiceName)) {\n            backendServiceName = _options.backendServiceName;\n        }\n    }\n\n    /**\n     * Returns request URL. The URL must have been passed to constructor.\n     */\n    this.getUrl = function () {\n        return url;\n    };\n\n    /**\n     * Returns current request method. A valid request method must have been passed to constructor.\n     */\n    this.getMethod = function () {\n        return method;\n    };\n\n    /**\n     * Returns query parameters as a JSON object with key-value pairs.\n     */\n    this.getQueryParameters = function () {\n        var tempQueryParameters = {};\n        for (var paramKey in queryParameters) {\n            if (true) { // thanks jshint\n                var value = queryParameters[paramKey][0];\n                tempQueryParameters[paramKey] = value;\n            }\n        }\n        return tempQueryParameters;\n    };\n\n    /**\n     * Returns query parameters as string.\n     */\n    this.getQueryString = function () {\n        return buildQueryString();\n    };\n\n    /**\n     * Sets query parameters.\n     * @param {parameters} A JSON object with key-value pairs.\n     */\n    this.setQueryParameters = function (parameters) {\n        queryParameters = {};\n\n        if (typeof (parameters) !== 'undefined' && parameters !== null) {\n            for (var paramKey in parameters) {\n                if (true) { // thanks jshint\n                    this.setQueryParameter(paramKey, parameters[paramKey]);\n                }\n            }\n        }\n    };\n\n    /**\n     * Sets a new query parameter. If a parameter with the same name already exists, it will be replaced.\n     * @param {name} Parameter name\n     * @param {value} Parameter value. Should be string, number or boolean.\n     */\n    this.setQueryParameter = function (name, value) {\n        if (typeof (name) !== 'undefined' && name !== null && typeof (value) !== 'undefined' && value !== null) {\n            queryParameters[name] = [value];\n        }\n    };\n\n    // receives string, returns array of header values (even if only 1). if name==undefined returns all headers\n    /**\n     * Returns array of header values.\n     * @param {name} Header name. If header name is specified, this function returns an array of header values\n     * stored with this header, or undefined, if specified header name is not found. If <i>name</i> is null, or undefined,\n     * this function returns all headers.\n     */\n    this.getHeaders = function (name) {\n        if (name === null || typeof (name) === 'undefined') {\n            return headers;\n        }\n\n        var headerValue = headers[name];\n\n        if (typeof (headerValue) === 'undefined') {\n            // try case insensitive search\n            headerValue = __getFirstHeaderByNameNoCase(name).value;\n        }\n\n        if (headerValue !== null) {\n            if (WL.Validators.isArray(headerValue)) {\n                return headerValue;\n            } else {\n                return [headerValue];\n            }\n        }\n\n    };\n\n    /**\n     * Returns array of header names. It can be empty if no headers has been added.\n     */\n    this.getHeaderNames = function () {\n        var headerNames = [];\n        for (var headerName in headers) {\n            if (true) { // thanks jshint\n                headerNames.push(headerName);\n            }\n        }\n        return headerNames;\n    };\n\n    // receives string, returns string. if multiple headers with same name - return first one\n    /**\n     * Returns a first header value stored with the specified header name. The value is returned as a string.\n     * Can be undefined if a header with specified name does not exist.\n     * @param {name} Header name.\n     */\n    this.getHeader = function (name) {\n        if (name === null || typeof (name) === 'undefined') {\n            logAndThrowError('Header name should be defined.', 'WLResourceRequest.getHeader');\n        }\n\n        var headerValue = headers[name];\n        if (typeof (headerValue) === 'undefined') {\n            // try case insensitive search\n            headerValue = __getFirstHeaderByNameNoCase(name).value;\n        }\n\n        if (WL.Validators.isArray(headerValue)) {\n            return headerValue[0];\n        }\n        return headerValue;\n    };\n\n    //receives JSON object similar to what getHeaders returns\n    /**\n     * Sets request headers. The existing headers are replaced.\n     * @param {requestHeaders} JSON object with request headers. Each header value should be either string, or array of strings. This function will\n     * throw error if one of specified header values is not valid.\n     */\n    this.setHeaders = function (requestHeaders) {\n        if (requestHeaders === null || typeof (requestHeaders) === 'undefined') {\n            headers = {};\n            return;\n        }\n\n        // verify that each key contains array of values or simple object\n        for (var headerName in requestHeaders) {\n            if (true) { // thanks jshint\n                var headerValue = requestHeaders[headerName];\n\n                if (WL.Validators.isArray(headerValue)) {\n                    /*jshint maxdepth:4*/\n                    if (headerValue.length > 0 && !isArrayOfSimpleTypes(headerValue)) {\n                        // complex type detected within array of values - throw error\n                        logAndThrowError('Header value should be a simple type.', 'WLResourceRequest.setHeaders');\n                    }\n                } else if (!isSimpleType(headerValue)) {\n                    logAndThrowError('Header value should be a simple type.', 'WLResourceRequest.setHeaders');\n                }\n            }\n        }\n\n        headers = {};\n        for (var key in requestHeaders) {\n            if (true) { // thanks jshint\n                var headerValueTemp = requestHeaders[key];\n                if (WL.Validators.isArray(headerValueTemp)) {\n                    for (var item in headerValueTemp) {\n                        /*jshint maxdepth:5*/\n                        if (true) { // thanks jshint\n                            this.addHeader(key, headerValueTemp[item]);\n                        }\n                    }\n                } else {\n                    this.addHeader(key, headerValueTemp);\n                }\n            }\n        }\n    };\n\n    /**\n     * Sets a new header or replaces an existing header with the same name.\n     * @param {name} Header name\n     * @param value Header value. The value must be of simple type (string, boolean or value).\n     */\n    this.setHeader = function (name, value) {\n        if (!isSimpleType(value)) {\n            // complex type detected instead of string - throw error\n            logAndThrowError('Header value should be a simple type.', 'WLResourceRequest.setHeader');\n        }\n\n        for (var headerName in headers) {\n            if (headerName.toLowerCase() === name.toLowerCase()) {\n                delete headers[headerName];\n            }\n        }\n\n        headers[name] = value;\n    };\n\n    /**\n     * Adds a new header. If a header with the same name already exists, the header value will be added to the existing header. The name is\n     * case insensitive.\n     * @param {name} Header name\n     * @param {value} Header value. The value must be of simple type (string, number or boolean).\n     */\n    this.addHeader = function (name, value) {\n        if (typeof (value) === 'undefined' || value === null) {\n            logAndThrowError('Header value should not be null or undefined.', 'WLResourceRequest.addHeader');\n        }\n        if (!isSimpleType(value)) {\n            // complex type detected instead of string - throw error\n            logAndThrowError('Header value should be a simple type.', 'WLResourceRequest.addHeader');\n        }\n\n        var header = __getFirstHeaderByNameNoCase(name);\n        var existingHeaderName = header.name;\n        var existingHeaderValue = header.value;\n        if (existingHeaderValue === null) {\n            headers[name] = value;\n        } else {\n            if (WL.Validators.isArray(existingHeaderValue)) {\n                for (var idx in existingHeaderValue) {\n                    /*jshint maxdepth:4*/\n                    if (existingHeaderValue[idx].toString() === value.toString()) {\n                        return;\n                    }\n                }\n                existingHeaderValue.push(value);\n            } else {\n                var array = [];\n                array.push(existingHeaderValue);\n                array.push(value);\n                headers[existingHeaderName] = array;\n            }\n        }\n    };\n\n    function __getFirstHeaderByNameNoCase(name) {\n        for (var headerName in headers) {\n            if (headerName.toLowerCase() === name.toLowerCase()) {\n                return {\n                    name: headerName,\n                    value: headers[headerName]\n                };\n            }\n        }\n\n        return {\n            name: null,\n            value: null\n        };\n    }\n\n    /**\n     * Returns request time out in milliseconds.\n     */\n    this.getTimeout = function () {\n        return timeout;\n    };\n\n    /**\n     * Sets request timeout. If timeout is not specified, then a default timeout will be used.\n     * @param {requestTimeout} Request timeout in milliseconds.\n     */\n    this.setTimeout = function (requestTimeout) {\n        timeout = requestTimeout;\n    };\n\n    /**\n     * Sends the request to a server.\n     * @param {content} Body content. It can be of simple type (like string), or object.\n     * @returns Returns promise. Sample usage: <br>\n     * var request = WLResourceRequest(url, method, timeout);<br>\n     * request.send(content).then(<br>\n     *  function(response) {// success flow}, <br>\n     *  function(error) {// fail flow} <br>\n     * );\n     */\n    this.send = function (content) {\n        var contentString = '';\n        if (typeof (content) !== 'undefined' && content !== null) {\n            contentString = isSimpleType(content) ? content.toString() : JSON.stringify(content);\n        }\n\n        return sendRequestAsync(contentString, 0, 0);\n    };\n\n    /**\n     * Sends the request to a server.\n     * @param {json} Body content as JSON object or string as a form data. The content type will be set to 'application/x-www-form-urlencoded'.\n     * @returns Returns promise. Sample usage: <br>\n     * var request = WLResourceRequest(url, method, timeout);<br>\n     * request.send(json).then(<br>\n     *  function(response) {// success flow}, <br>\n     *  function(error) {// fail flow} <br>\n     * );\n     */\n    this.sendFormParameters = function (json) {\n        var contentString = encodeFormParameters(json);\n        this.addHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n        return sendRequestAsync(contentString, 0, 0);\n    };\n\n    function encodeFormParameters(json) {\n        if (json === null || typeof (json) === 'undefined') {\n            return '';\n        }\n\n        var result = '';\n\n        if (isSimpleType(json)) {\n            var params = json.split('&');\n            for (var i = 0; i < params.length; i++) {\n                var kv = params[i].split('=');\n                if (kv.length === 0) {\n                    continue;\n                }\n\n                if (kv.length === 1) {\n                    result += encodeURIComponent(kv[0]);\n                } else {\n                    result += encodeURIComponent(kv[0]) + '=' + encodeURIComponent(kv[1]);\n                }\n\n                if (i < params.length - 1) {\n                    result += '&';\n                }\n            }\n            return result;\n        } else {\n            for (var key in json) {\n                if (true) { // thanks jshint\n                    var value = json[key];\n                    /*jshint maxdepth:4*/\n                    if (!isSimpleType(value)) {\n                        logAndThrowError('Form value must be a simple type.', 'WLResourceRequest.sendFormParameters');\n                    }\n\n                    result += encodeURIComponent(key) + '=' + encodeURIComponent(value);\n                    result += '&';\n                }\n            }\n\n            if (result.length > 0 && result[result.length - 1] === '&') {\n                result = result.substring(0, result.length - 1);\n            }\n\n            return result;\n        }\n    }\n\n    function sendRequestAsync(contentString, attempt, conflictAttemptCounter) {\n        var dfd = WLJQ.Deferred();\n        var builtUrl = buildRequestUrl();\n        \n        \n        \n        __send(builtUrl, contentString, attempt, conflictAttemptCounter).then(\n            function (response) {\n            \twlanalytics.send(true);\n                dfd.resolve(response);\n            },\n            function (error) {\n                dfd.reject(error);\n            }\n        );\n\n        return dfd.promise();\n    }\n\n    var maxRequestAttempts = 4;\n\n    function __send(serverUrl, contentString, attempt, conflictAttemptCounter) {\n        var dfd = WLJQ.Deferred();\n\n        // create WLNativeXHR or XMLHttpRequest\n        var xhr = window.WLJSX.Ajax.getTransport();\n\n        var queryString = buildQueryString();\n        var finalUrl = queryString === null ? serverUrl : serverUrl + '?' + queryString;\n\n        //TODO - ask Yuri, why we need this?\n        xhr.requestOptions = {'url' : finalUrl, 'method' : method};\n\n        xhr.open(method, finalUrl, true);\n\n        if (typeof (timeout) !== 'undefined') {\n            xhr.timeout = timeout;\n        }\n\n        addRequestHeaders(xhr);\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (this.readyState === 4) {\n\t\t\t\tvar transport = this;\n\t\t\t\tif (this.status === 0) {\n\t\t\t\t\tvar errorCode = this.wlFailureStatus !== 'undefined' ? this.wlFailureStatus : WL.ErrorCode.UNEXPECTED_ERROR;\n\t\t\t\t\t// handle errors - timeout, unresponsive host and unexpected error\n\t\t\t\t\ttransport.status = 0;\n\t\t\t\t\ttransport.responseJSON = {\n\t\t\t\t\t\t\terrorCode: errorCode,\n\t\t\t\t\t\t\terrorMsg: this.statusText //WL.Utils.formatString(WL.ClientMessages.handleTimeOut, finalUrl)\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tvar wlResponse = new WL.Response(this, null);\n\n\t\t\t\t// WL.Response sets status to 200 if transport.status is 0 - set it back to 0.\n\t\t\t\tif (this.status === 0) {\n\t\t\t\t\twlResponse.status = 0;\n\t\t\t\t}\n\n\t\t\t\tif (typeof (WLAuthorizationManager) !== 'undefined' && isAuthorizationRequired(transport) && (transport.status !== 409 && attempt < maxRequestAttempts || transport.status === 409 && conflictAttemptCounter < MAX_CONFLICT_ATTEMPTS)) {\n\t\t\t\t\tprocessResponse(transport);\n\t\t\t\t} else if(WL.Client.isGatewayResponse(wlResponse)){\n                    WLAuthorizationManager.clearAccessToken({\n\t                    scope: (currentResourceRequest.scope ? currentResourceRequest.scope : '')\n\t                });\n\t\t\t\t\tobtainAccessTokenAndSendRequest(currentResourceRequest.scope ? currentResourceRequest.scope : '');\n\t\t\t\t} else if (this.status >= 200 && this.status <= 299) {\n\t\t\t\t\t// any status in the 2xx range is considered a success\n\t\t\t\t\tdfd.resolve(wlResponse);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// it's not OAuth error or number of attempts is exceeded; fail the request with last error, which will be propagated up\n\t\t\t\t\tdfd.reject(wlResponse);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n        var isAuthorizationRequired = function(transport) {\n            if (isUndefinedOrNull(transport)) {\n                return false;\n            }\n            return WLAuthorizationManager.isAuthorizationRequired(transport.status, transport.getAllResponseHeaders());\n        };\n\n        var processResponse = function(transport) {\n            // if status is 409 resend request and increment conflictAttemptCounter\n            if (transport.status === 409) {\n                resendRequest(attempt, ++conflictAttemptCounter);\n            } else if (transport.status === 403) {\n                currentResourceRequest.scope = WLAuthorizationManager.getResourceScope(transport.getAllResponseHeaders());\n                if (!WL.Validators.isNullOrUndefined(currentResourceRequest.scope)) {\n                    WLAuthorizationManager.__cacheScopeByResource(transport, currentResourceRequest.scope);\n                    resendRequest(++attempt, conflictAttemptCounter);\n                }\n            } else if (WLAuthorizationManager.__isInvalidToken(transport)) {\n                WLAuthorizationManager.clearAccessToken({\n                    scope: currentResourceRequest.scope\n                });\n                resendRequest(++attempt, conflictAttemptCounter);\n            } else {\n                // We got 401 we need cache the resource to default scope so that next time the request will be sent with default access token.\n                WLAuthorizationManager.__cacheScopeByResource(transport, WLAuthorizationManager.DEFAULT_SCOPE);\n                resendRequest(++attempt, conflictAttemptCounter);\n            }\n        };\n\n        var resendRequest = function (attemptNumber, conflictAttemptCounterNumber) {\n            sendRequestAsync(contentString, attemptNumber, conflictAttemptCounterNumber).then(\n                function (response) {\n                    dfd.resolve(response);\n                },\n                function (error) {\n                    dfd.reject(error);\n                });\n        };\n\n        if (typeof (WLAuthorizationManager) !== 'undefined') {\n            // If user provided scope for this resource use it, else get scope from cache.\n            if (!WL.Validators.isNullOrUndefined(currentResourceRequest.scope)) {\n                obtainAccessTokenAndSendRequest(currentResourceRequest.scope);\n            } else {\n                var cachedScope = WLAuthorizationManager.__getCachedScopeByResource(xhr);\n                currentResourceRequest.scope = cachedScope;\n                obtainAccessTokenAndSendRequest(cachedScope);\n            }\n        } else {\n            sendRequest();\n        }\n        /*jshint latedef:false*/\n        function obtainAccessTokenAndSendRequest(scope) {\n            if (!WL.Validators.isNullOrUndefined(scope)) {\n                WLAuthorizationManager.obtainAccessToken(scope).then(\n                    function (accessToken) {\n                        // Send request with accessToken as authorization header.\n                        if (!WL.Validators.isNullOrUndefined(accessToken)) {\n                            if(xhr.readyState == 4){\n                              xhr.open(xhr.requestOptions.method,xhr.requestOptions.url,true);\n                            }\n                            xhr.setRequestHeader(WLAuthorizationManager.WL_AUTHORIZATION_HEADER, accessToken.asAuthorizationRequestHeader);\n                        }\n                        sendRequest();\n                    },\n                    function (error) {\n                        if (error.status === 500) {\n                            // if error status is 500 then it is necessary to delete resource to scope mapping.\n                            // Because the scope mapping for this resource might have changed.\n                            WLAuthorizationManager.__deleteCachedScopeByResource(xhr);\n                                    // Unable to retrieve accessToken, fail the request; the failure will be propagated up the chain\n                                    currentResourceRequest.scope = null;\n                                    dfd.reject(error);\n                        } else {\n                            dfd.reject(error);\n                        }\n                    });\n            } else {\n                sendRequest();\n            }\n        }\n        /*jshint latedef:false*/\n        function sendRequest() {\n            xhr.send(method === 'GET' ? null : contentString, true);\n        }\n\n        return dfd.promise();\n    }\n\n    function buildRequestUrl() {\n        if (url.indexOf('http:') >= 0 || url.indexOf('https:') >= 0) {\n            /* Absolute URL - the backendServiceName needs a relative URL */\n            if ( backendServiceName !== null){\n                dfd.reject('The backendServiceName option can only be used with a relative URL ');\n            }\n            return url;\n        } else {\n            var serverUrl = WL.Config.__getBaseURL();\n            if (backendServiceName !== null){\n                if (backendServiceName.startsWith(\"/\")){\n                    backendServiceName = backendServiceName.slice(1,backendServiceName.length);\n                }\n                serverUrl = serverUrl+ BACKEND_SERVICE + backendServiceName;\n            }\n            return __buildUrl(serverUrl);\n        }\n\n        function __buildUrl(serverUrl) {\n            if (serverUrl[serverUrl.length - 1] !== '/' && url[0] !== '/' && url.length!==0) {\n                serverUrl += '/';\n            } else if (serverUrl[serverUrl.length - 1] === '/' && (url[0] === '/' || url.length===0)) {\n                serverUrl = serverUrl.substring(0, serverUrl.length - 1);\n            }\n            return serverUrl + url;\n        }\n    }\n\n    function addRequestHeaders(xhr) {\n        for (var headerName in headers) {\n            if (true) { // thanks jshint\n                var headerValue = headers[headerName];\n                if (isSimpleType(headerValue)) {\n                    xhr.setRequestHeader(headerName, headerValue.toString());\n                } else {\n                    var commaSeparatedHeader = headerValue[0];\n                    /*jshint maxdepth:4*/\n                    for (var i = 1; i < headerValue.length; i++) {\n                        commaSeparatedHeader += ', ' + headerValue[i];\n                    }\n                    xhr.setRequestHeader(headerName, commaSeparatedHeader);\n                }\n            }\n        }\n    }\n\n    function buildQueryString() {\n        if (queryParameters === null || typeof (queryParameters) === 'undefined' || WLJQ.isEmptyObject(queryParameters)) {\n            return null;\n        }\n\n        var queryString = '';\n        for (var paramKey in queryParameters) {\n            if (true) { // thanks jshint\n                var values = queryParameters[paramKey];\n                if (values === null || typeof (values) === 'undefined' || values.length === 0) {\n                    queryString += '&' + paramKey;\n                } else {\n                    /*jshint maxdepth:6*/\n                    for (var i = 0; i < values.length; i++) {\n                        var paramValue = isSimpleType(values[i]) ? values[i] : JSON.stringify(values[i]);\n                        if (paramValue === null || typeof (paramValue) === 'undefined') {\n                            queryString += '&' + paramKey;\n                        } else {\n                            queryString += '&' + paramKey + '=' + encodeURIComponent(paramValue);\n                        }\n                    }\n                }\n            }\n        }\n\n        return queryString.substr(1);\n    }\n\n    function isSimpleType(value) {\n        return (WL.Validators.isString(value) || WL.Validators.isNumber(value) || WL.Validators.isBoolean(value));\n    }\n\n    function isArrayOfSimpleTypes(object) {\n        for (var i = 0; i < object.length; i++) {\n            if (!isSimpleType(object[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nWLResourceRequest.GET = 'GET';\nWLResourceRequest.POST = 'POST';\nWLResourceRequest.PUT = 'PUT';\nWLResourceRequest.DELETE = 'DELETE';\nWLResourceRequest.HEAD = 'HEAD';\nWLResourceRequest.OPTIONS = 'OPTIONS';\nWLResourceRequest.TRACE = 'TRACE';\nWLResourceRequest.CONNECT = 'CONNECT';\n\n\n/**\n * ================================================================= \n * Source file taken from :: clockSyncChallengeHandler.web.js\n * ================================================================= \n */\n\n/**\n * @license\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2016 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n */\n\nvar clockSyncChallengeHandler = WL.Client.createSecurityCheckChallengeHandler(\"clockSynchronization\");\n\nclockSyncChallengeHandler.handleSuccess = function(identity) {\n\tvar date = new Date();\n\tWL.Config.__setServerRelativeTime(identity.serverTimeStamp - date.getTime());\n};\n\n\n/**\n * ================================================================= \n * Source file taken from :: remoteDisableChallengeHandler.web.js\n * ================================================================= \n */\n\n/**\n * @license\n   Licensed Materials - Property of IBM\n\n   (C) Copyright 2015 IBM Corp.\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n */\n\nvar wl_remoteDisableChallengeHandler = WL.Client.createSecurityCheckChallengeHandler(\"wl_remoteDisableRealm\");\n\nwl_remoteDisableChallengeHandler.handleChallenge = function(obj) {\n\n\t// get new message params\n\tvar message = obj.message;\n    var messageId = obj.messageId;\n    var messageType = obj.messageType;\n\n    // get value of previously stored message id\n\tvar storedMessageId = WL.DAO.getItem(WL.Client.getMessageID());\n\n\tvar challengeAnswer = { messageId : messageId };\n\n\tif (isDisplayMessageDialogue(storedMessageId, messageId, messageType)) {\n        addRemoteDisableHTML();\n\n        setDirectionToRemoteDisableMsg();\n\n        document.getElementById('remoteDisableHeaderId').innerHTML = WL.ClientMessages.notificationTitle;\n        document.getElementById('remoteDisableTextId').innerHTML = message;\n\n        var remoteDisableModal = document.getElementById('remoteDisableModalId');\n        remoteDisableModal.style.display = 'block';\n\n        var remoteDisableCloseBtn = document.getElementById('remoteDisableCloseBtnId');\n        remoteDisableCloseBtn.onclick = function() {\n           remoteDisableModal.style.display = \"none\";\n           wl_remoteDisableChallengeHandler.submitChallengeAnswer(challengeAnswer);\n        }\n\t\t// keep the message id in the local storage\n\t\tWL.DAO.setItem(WL.Client.getMessageID(), messageId);\n\t} else {\n\t\t// don't show dialogue\n\t\twl_remoteDisableChallengeHandler.submitChallengeAnswer(challengeAnswer);\n\t}\n\n};\n\n\n/**\n * determine whether or not to display message dialogue\n * @param storedMessageId\n * @param messageId\n * @param messageType\n * @returns {Boolean}\n */\nfunction isDisplayMessageDialogue(storedMessageId,messageId, messageType)\n{\n\t// restrictions apply only to notify messages\n\tif (messageType != \"NOTIFY\") {\n\t\treturn true;\n\t}\n\t// display only new messages - the first time they are received\n\tif (typeof storedMessageId == \"undefined\" || storedMessageId != messageId) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\nfunction getEnv() {\n    return WL.StaticAppProps.ENVIRONMENT;\n}\n\nwl_remoteDisableChallengeHandler.handleFailure = function(err) {\n\tvar message;\n\n\tif (typeof err == \"undefined\" || err == null)\n\t{\n\t\tmessage = \"unknown error occurred.\"\n\t    WL.Logger.debug(\">>> wl_remoteDisableChallengeHandler.handleFailure invoked with a missing err argument\");\n\t}\n\telse if(err.message) {\n    \tmessage = err.message;\n    } else if (err.reason) {\n    \tmessage = err.reason;\n    } else {\n    \tWL.Logger.debug(\">>> wl_remoteDisableChallengeHandler.handleFailure invoked with unexpected err format: \" + JSON.stringify(err, null, 4));\n    \tmessage = \"unknown error occurred.\"\n    };\n    var downloadLink = err.downloadLink;\n\n    /*\n     * Processor default handler for failure (display message and close App).\n     */\n    function defaultRemoteDisableDenialHandler(that, msg, downloadLink) {\n\n        addRemoteDisableHTML();\n\n        setDirectionToRemoteDisableMsg();\n\n        document.getElementById('remoteDisableHeaderId').innerHTML = WL.ClientMessages.applicationDenied;\n        document.getElementById('remoteDisableTextId').innerHTML = msg;\n\n        var remoteDisableRedirectBtn = document.getElementById('remoteDisableRedirectBtnId');\n\n        if (downloadLink) {\n            //make button visible\n            remoteDisableRedirectBtn.style.display = 'block';\n            remoteDisableRedirectBtn.onclick = function() {\n                WL.App.__openURL(downloadLink, '_new', null);\n            }\n        } else {\n            remoteDisableRedirectBtn.style.display = 'none';\n        }\n\n        //make remoteDisableModal visible\n        var remoteDisableModal = document.getElementById('remoteDisableModalId');\n        remoteDisableModal.style.display = 'block';\n\n        var remoteDisableCloseBtn = document.getElementById('remoteDisableCloseBtnId');\n        remoteDisableCloseBtn.onclick = function() {\n           remoteDisableModal.style.display = \"none\";\n        }\n\n    }\n\n    WL.Client.__handleOnRemoteDisableDenial(defaultRemoteDisableDenialHandler, this, message, downloadLink);\n};\n\nvar addRemoteDisableHTML = (function () {\n    var isHtmlAlreadyAdded = false;\n\n    return function () {\n        if (!isHtmlAlreadyAdded) {\n            isHtmlAlreadyAdded = true;\n            var remoteDisableModel = document.createElement('div');\n            remoteDisableModel.className = 'remoteDisableModalClass';\n            remoteDisableModel.id = 'remoteDisableModalId';\n            remoteDisableModel.innerHTML = ''\n                + '<div class=\"remoteDisableHeaderContent\">'\n                +   '<h2 id=\"remoteDisableHeaderId\" class=\"remoteDisableHeader\"></h2>'\n                +   '<div>'\n                +       '<p id=remoteDisableTextId class=\"remoteDisableText\"></p>'\n                +   '</div>'\n                +   '<div class=removeDisableButtons>'\n                +       '<button id=\"remoteDisableCloseBtnId\" class=\"closeBtn\">' + WL.ClientMessages.close + '</button>'\n                +       '<button id=\"remoteDisableRedirectBtnId\" class=\"remoteDisableRedirectBtn\">' + (WL.ClientMessages.redirect ? WL.ClientMessages.redirect : 'Redirect') + '</button>'\n                +   '</div>'\n                + '</div>';\n\n            var remoteDisableCss = document.createElement('style');\n            remoteDisableCss.innerHTML = ''\n                + '.remoteDisableModalClass {'\n                +   'display: none; /* Hidden by default */'\n                +   'position: fixed; /* Stay in place */'\n                +   'z-index: 1; /* Sit on top */'\n                +   'padding-top: 100px; /* Location of the box */'\n                +   'left: 0;'\n                +   'top: 0;'\n                +   'width: 100%; /* Full width */'\n                +   'height: 100%; /* Full height */'\n                +   'overflow: auto; /* Enable scroll if needed */'\n                +   'background-color: rgb(0,0,0); /* Fallback color */'\n                +   'background-color: rgba(0,0,0,0.4); /* Black w/ opacity */'\n                + '}'\n\n                + '.remoteDisableHeaderContent {'\n                +   'background-color: #fefefe;'\n                +   'margin: auto;'\n                +   'padding: 20px;'\n                +   'border: 1px solid #888;'\n                +   'width: 70%;'\n                +   'min-width: 40%;'\n                + '}'\n\n                + '.remoteDisableHeader {'\n                +   'margin: 0 0 5px 0;'\n                + '}'\n\n                + '.remoteDisableText {'\n                +   'margin: 0;'\n                +   'word-wrap: break-word;'\n                + '}'\n\n                + '.removeDisableButtons {'\n                +   'margin: 15px 0 33px 0;'\n                +   'font-family: sans-serif'\n                + '}'\n\n                + '.closeBtn {'\n                +   'float: right;'\n                +   'font-size: 15px;'\n                + '}'\n                \n                + '.remoteDisableModalClass[dir=\"rtl\"] .closeBtn {'\n                +   'float: left;'\n                + '}'\n\n                + '.remoteDisableRedirectBtn {'\n                +   'display: none;'\n                +   'float: left;'\n                +   'font-size: 15px;'\n                + '}'\n\n                + '.remoteDisableRedirectBtn:hover {'\n                +   'background-color: #555555;'\n                +   'color: white;'\n                +   'cursor: pointer;'\n                + '}'\n\n                + '.closeBtn:hover {'\n                +   'background-color: #555555;'\n                +   'color: white;'\n                +   'cursor: pointer;'\n                + '}';\n\n            document.getElementsByTagName('head')[0].appendChild(remoteDisableCss);\n\n            document.body.appendChild(remoteDisableModel);\n        }\n    }\n})();\n\nvar setDirectionToRemoteDisableMsg = function() {\n    var langDirection = WL.Utils.getLanguageDirectionality(WL.ClientMessages.lang);\n\n        if (langDirection === WL.Language.DIRECTION_RTL) {\n            document.getElementById('remoteDisableModalId').dir = 'rtl';\n        }\n}\n\n\n/**\n * ================================================================= \n * Source file taken from :: webcrypto-shim.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2016 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\nisCryptoShim = false;\n/**\n * @file Web Cryptography API shim\n * @author Artem S Vybornov <vybornov@gmail.com>\n * @license MIT\n */\n!function ( global ) {\n    'use strict';\n    \n\tvar userOSversion = false;\n        //If it is iOS\n\n        if(/(iPhone|iPod|iPad)/i.test(navigator.userAgent)) {\n            var match = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/),\n                    version;\n              \n            if (match !== undefined && match !== null) {\n              version = [\n                parseInt(match[1], 10),\n                parseInt(match[2], 10),\n                parseInt(match[3] || 0, 10)\n                  ];            \n                userOSversion=parseFloat(version.join('.'));\n            }\n        }\n    \n\n\t\n    var _crypto = global.crypto || global.msCrypto;\n    if ( !_crypto ) return;\n\t\n    var _subtle = _crypto.subtle || _crypto.webkitSubtle;\n\t\n    if ( !_subtle ) return;\n\n    var _Crypto     = global.Crypto || _crypto.constructor || Object,\n        _SubtleCrypto = global.SubtleCrypto || _subtle.constructor || Object,\n        _CryptoKey  = global.CryptoKey || global.Key || Object;\n\t\n\t//If it is iOS and version>=11 or Safari version >=11\n\t/*Below changes are to accommodate apple implementing WebCrypto SubtleCrypto \n\trather than WebKitSubtleCrypto and to maintain backward compatibility*/\n\tif ((userOSversion  >= 11) || (navigator.userAgent.indexOf('Version/11.') > -1 && navigator.userAgent.indexOf(\"Safari\") > -1 ))\n    \t{\n        \tvar isIE    = !!global.msCrypto,\n        \tisWebkit = !!_crypto.subtle;\n\t}\n\telse\n\t{\n\t\tvar isIE    = !!global.msCrypto,\n        \tisWebkit = !!_crypto.webkitSubtle;\n\t}\n\n        if ( !isIE && !isWebkit ){\n            return;\n        }\n\n    //if using crypto-shim the crypto key has to be set as extractable\n\tisCryptoShim = true;\n\n    function s2a ( s ) {\n        return btoa(s).replace(/\\=+$/, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n    }\n\n    function a2s ( s ) {\n        s += '===', s = s.slice( 0, -s.length % 4 );\n        return atob( s.replace(/-/g, '+').replace(/_/g, '/') );\n    }\n\n    function s2b ( s ) {\n        var b = new Uint8Array(s.length);\n        for ( var i = 0; i < s.length; i++ ) b[i] = s.charCodeAt(i);\n        return b;\n    }\n\n    function b2s ( b ) {\n        if ( b instanceof ArrayBuffer ) b = new Uint8Array(b);\n        return String.fromCharCode.apply( String, b );\n    }\n\n    function alg ( a ) {\n        var r = { 'name': (a.name || a || '').toUpperCase().replace('V','v') };\n        switch ( r.name ) {\n            case 'SHA-1':\n            case 'SHA-256':\n            case 'SHA-384':\n            case 'SHA-512':\n                break;\n            case 'AES-CBC':\n            case 'AES-GCM':\n            case 'AES-KW':\n                if ( a.length ) r['length'] = a.length;\n                break;\n            case 'HMAC':\n                if ( a.hash ) r['hash'] = alg(a.hash);\n                if ( a.length ) r['length'] = a.length;\n                break;\n            case 'RSAES-PKCS1-v1_5':\n                if ( a.publicExponent ) r['publicExponent'] = new Uint8Array(a.publicExponent);\n                if ( a.modulusLength ) r['modulusLength'] = a.modulusLength;\n                break;\n            case 'RSASSA-PKCS1-v1_5':\n            case 'RSA-OAEP':\n                if ( a.hash ) r['hash'] = alg(a.hash);\n                if ( a.publicExponent ) r['publicExponent'] = new Uint8Array(a.publicExponent);\n                if ( a.modulusLength ) r['modulusLength'] = a.modulusLength;\n                break;\n            default:\n                throw new SyntaxError(\"Bad algorithm name\");\n        }\n        return r;\n    };\n\n    function jwkAlg ( a ) {\n        return {\n            'HMAC': {\n                'SHA-1': 'HS1',\n                'SHA-256': 'HS256',\n                'SHA-384': 'HS384',\n                'SHA-512': 'HS512'\n            },\n            'RSASSA-PKCS1-v1_5': {\n                'SHA-1': 'RS1',\n                'SHA-256': 'RS256',\n                'SHA-384': 'RS384',\n                'SHA-512': 'RS512'\n            },\n            'RSAES-PKCS1-v1_5': {\n                '': 'RSA1_5'\n            },\n            'RSA-OAEP': {\n                'SHA-1': 'RSA-OAEP',\n                'SHA-256': 'RSA-OAEP-256'\n            },\n            'AES-KW': {\n                '128': 'A128KW',\n                '192': 'A192KW',\n                '256': 'A256KW'\n            },\n            'AES-GCM': {\n                '128': 'A128GCM',\n                '192': 'A192GCM',\n                '256': 'A256GCM'\n            },\n            'AES-CBC': {\n                '128': 'A128CBC',\n                '192': 'A192CBC',\n                '256': 'A256CBC'\n            }\n        }[a.name][ ( a.hash || {} ).name || a.length || '' ];\n    }\n\n    function b2jwk ( k ) {\n        if ( k instanceof ArrayBuffer || k instanceof Uint8Array ) k = JSON.parse( decodeURIComponent( escape( b2s(k) ) ) );\n        var jwk = { 'kty': k.kty, 'alg': k.alg, 'ext': k.ext || k.extractable };\n        switch ( jwk.kty ) {\n            case 'oct':\n                jwk.k = k.k;\n            case 'RSA':\n                [ 'n', 'e', 'd', 'p', 'q', 'dp', 'dq', 'qi', 'oth' ].forEach( function ( x ) { if ( x in k ) jwk[x] = k[x] } );\n                break;\n            default:\n                throw new TypeError(\"Unsupported key type\");\n        }\n        return jwk;\n    }\n\n    function jwk2b ( k ) {\n        var jwk = b2jwk(k);\n        if ( isIE ) jwk['extractable'] = jwk.ext, delete jwk.ext;\n\t\n\t//If it is iOS and version>=11 or Safari version >=11\n\t/*Below changes are to accommodate apple implementing WebCrypto SubtleCrypto \n\trather than WebKitSubtleCrypto and to maintain backward compatibility*/\n\tif ((userOSversion  >= 11) || (navigator.userAgent.indexOf('Version/11.') > -1 && navigator.userAgent.indexOf(\"Safari\") > -1 ))\n    \t{\n        \treturn jwk;\n\t}\n\telse\n\t{\n\t\treturn s2b( unescape( encodeURIComponent( JSON.stringify(jwk) ) ) ).buffer;\n\t}\n    }\n\n    function pkcs2jwk ( k ) {\n        var info = b2der(k), prv = false;\n        if ( info.length > 2 ) prv = true, info.shift(); // remove version from PKCS#8 PrivateKeyInfo structure\n        var jwk = { 'ext': true };\n        switch ( info[0][0] ) {\n            case '1.2.840.113549.1.1.1':\n                var rsaComp = [ 'n', 'e', 'd', 'p', 'q', 'dp', 'dq', 'qi' ],\n                    rsaKey  = b2der( info[1] );\n                if ( prv ) rsaKey.shift(); // remove version from PKCS#1 RSAPrivateKey structure\n                for ( var i = 0; i < rsaKey.length; i++ ) {\n                    if ( !rsaKey[i][0] ) rsaKey[i] = rsaKey[i].subarray(1);\n                    jwk[ rsaComp[i] ] = s2a( b2s( rsaKey[i] ) );\n                }\n                jwk['kty'] = 'RSA';\n                break;\n            default:\n                throw new TypeError(\"Unsupported key type\");\n        }\n        return jwk;\n    }\n\n    function jwk2pkcs ( k ) {\n        var key, info = [ [ '', null ] ], prv = false;\n        switch ( k.kty ) {\n            case 'RSA':\n                var rsaComp = [ 'n', 'e', 'd', 'p', 'q', 'dp', 'dq', 'qi' ],\n                    rsaKey = [];\n                for ( var i = 0; i < rsaComp.length; i++ ) {\n                    if ( !( rsaComp[i] in k ) ) break;\n                    var b = rsaKey[i] = s2b( a2s( k[ rsaComp[i] ] ) );\n                    if ( b[0] & 0x80 ) rsaKey[i] = new Uint8Array(b.length + 1), rsaKey[i].set( b, 1 );\n                }\n                if ( rsaKey.length > 2 ) prv = true, rsaKey.unshift( new Uint8Array([0]) ); // add version to PKCS#1 RSAPrivateKey structure\n                info[0][0] = '1.2.840.113549.1.1.1';\n                key = rsaKey;\n                break;\n            default:\n                throw new TypeError(\"Unsupported key type\");\n        }\n        info.push( new Uint8Array( der2b(key) ).buffer );\n        if ( !prv ) info[1] = { 'tag': 0x03, 'value': info[1] };\n        else info.unshift( new Uint8Array([0]) ); // add version to PKCS#8 PrivateKeyInfo structure\n        return new Uint8Array( der2b(info) ).buffer;\n    }\n\n    var oid2str = { 'KoZIhvcNAQEB': '1.2.840.113549.1.1.1' },\n        str2oid = { '1.2.840.113549.1.1.1': 'KoZIhvcNAQEB' };\n\n    function b2der ( buf, ctx ) {\n        if ( buf instanceof ArrayBuffer ) buf = new Uint8Array(buf);\n        if ( !ctx ) ctx = { pos: 0, end: buf.length };\n\n        if ( ctx.end - ctx.pos < 2 || ctx.end > buf.length ) throw new RangeError(\"Malformed DER\");\n\n        var tag = buf[ctx.pos++],\n            len = buf[ctx.pos++];\n\n        if ( len >= 0x80 ) {\n            len &= 0x7f;\n            if ( ctx.end - ctx.pos < len ) throw new RangeError(\"Malformed DER\");\n            for ( var xlen = 0; len--; ) xlen <<= 8, xlen |= buf[ctx.pos++];\n            len = xlen;\n        }\n\n        if ( ctx.end - ctx.pos < len ) throw new RangeError(\"Malformed DER\");\n\n        var rv;\n\n        switch ( tag ) {\n            case 0x02: // Universal Primitive INTEGER\n                rv = buf.subarray( ctx.pos, ctx.pos += len );\n                break;\n            case 0x03: // Universal Primitive BIT STRING\n                if ( buf[ctx.pos++] ) throw new Error( \"Unsupported bit string\" );\n                len--;\n            case 0x04: // Universal Primitive OCTET STRING\n                rv = new Uint8Array( buf.subarray( ctx.pos, ctx.pos += len ) ).buffer;\n                break;\n            case 0x05: // Universal Primitive NULL\n                rv = null;\n                break;\n            case 0x06: // Universal Primitive OBJECT IDENTIFIER\n                var oid = btoa( b2s( buf.subarray( ctx.pos, ctx.pos += len ) ) );\n                if ( !( oid in oid2str ) ) throw new Error( \"Unsupported OBJECT ID \" + oid );\n                rv = oid2str[oid];\n                break;\n            case 0x30: // Universal Constructed SEQUENCE\n                rv = [];\n                for ( var end = ctx.pos + len; ctx.pos < end; ) rv.push( b2der( buf, ctx ) );\n                break;\n            default:\n                throw new Error( \"Unsupported DER tag 0x\" + tag.toString(16) );\n        }\n\n        return rv;\n    }\n\n    function der2b ( val, buf ) {\n        if ( !buf ) buf = [];\n\n        var tag = 0, len = 0,\n            pos = buf.length + 2;\n\n        buf.push( 0, 0 ); // placeholder\n\n        if ( val instanceof Uint8Array ) {  // Universal Primitive INTEGER\n            tag = 0x02, len = val.length;\n            for ( var i = 0; i < len; i++ ) buf.push( val[i] );\n        }\n        else if ( val instanceof ArrayBuffer ) { // Universal Primitive OCTET STRING\n            tag = 0x04, len = val.byteLength, val = new Uint8Array(val);\n            for ( var i = 0; i < len; i++ ) buf.push( val[i] );\n        }\n        else if ( val === null ) { // Universal Primitive NULL\n            tag = 0x05, len = 0;\n        }\n        else if ( typeof val === 'string' && val in str2oid ) { // Universal Primitive OBJECT IDENTIFIER\n            var oid = s2b( atob( str2oid[val] ) );\n            tag = 0x06, len = oid.length;\n            for ( var i = 0; i < len; i++ ) buf.push( oid[i] );\n        }\n        else if ( val instanceof Array ) { // Universal Constructed SEQUENCE\n            for ( var i = 0; i < val.length; i++ ) der2b( val[i], buf );\n            tag = 0x30, len = buf.length - pos;\n        }\n        else if ( typeof val === 'object' && val.tag === 0x03 && val.value instanceof ArrayBuffer ) { // Tag hint\n            val = new Uint8Array(val.value), tag = 0x03, len = val.byteLength;\n            buf.push(0); for ( var i = 0; i < len; i++ ) buf.push( val[i] );\n            len++;\n        }\n        else {\n            throw new Error( \"Unsupported DER value \" + val );\n        }\n\n        if ( len >= 0x80 ) {\n            var xlen = len, len = 4;\n            buf.splice( pos, 0, (xlen >> 24) & 0xff, (xlen >> 16) & 0xff, (xlen >> 8) & 0xff, xlen & 0xff );\n            while ( len > 1 && !(xlen >> 24) ) xlen <<= 8, len--;\n            if ( len < 4 ) buf.splice( pos, 4 - len );\n            len |= 0x80;\n        }\n\n        buf.splice( pos - 2, 2, tag, len );\n\n        return buf;\n    }\n\n    function CryptoKey ( key, alg, ext, use ) {\n        Object.defineProperties( this, {\n            _key: {\n                value: key\n            },\n            type: {\n                value: key.type,\n                enumerable: true\n            },\n            extractable: {\n                value: (ext === undefined) ? key.extractable : ext,\n                enumerable: true\n            },\n            algorithm: {\n                value: (alg === undefined) ? key.algorithm : alg,\n                enumerable: true\n            },\n            usages: {\n                value: (use === undefined) ? key.usages : use,\n                enumerable: true\n            }\n        });\n    }\n\n    function isPubKeyUse ( u ) {\n        return u === 'verify' || u === 'encrypt' || u === 'wrapKey';\n    }\n\n    function isPrvKeyUse ( u ) {\n        return u === 'sign' || u === 'decrypt' || u === 'unwrapKey';\n    }\n\n    [ 'generateKey', 'importKey', 'unwrapKey' ]\n        .forEach( function ( m ) {\n            var _fn = _subtle[m];\n\n            _subtle[m] = function ( a, b, c ) {\n                var args = [].slice.call(arguments),\n                    ka, kx, ku;\n\n                switch ( m ) {\n                    case 'generateKey':\n                        ka = alg(a), kx = b, ku = c;\n                        break;\n                    case 'importKey':\n                        ka = alg(c), kx = args[3], ku = args[4];\n                        if ( a === 'jwk' ) {\n                            b = b2jwk(b);\n                            if ( !b.alg ) b.alg = jwkAlg(ka);\n                            if ( !b.key_ops ) b.key_ops = ( b.kty !== 'oct' ) ? ( 'd' in b ) ? ku.filter(isPrvKeyUse) : ku.filter(isPubKeyUse) : ku.slice();\n                            args[1] = jwk2b(b);\n                        }\n                        break;\n                    case 'unwrapKey':\n                        ka = args[4], kx = args[5], ku = args[6];\n                        args[2] = c._key;\n                        break;\n                }\n\n                if ( m === 'generateKey' && ka.name === 'HMAC' && ka.hash ) {\n                    ka.length = ka.length || { 'SHA-1': 512, 'SHA-256': 512, 'SHA-384': 1024, 'SHA-512': 1024 }[ka.hash.name];\n                    return _subtle.importKey( 'raw', _crypto.getRandomValues( new Uint8Array( (ka.length+7)>>3 ) ), ka, kx, ku );\n                }\n\n                if ( isWebkit && m === 'generateKey' && ka.name === 'RSASSA-PKCS1-v1_5' && ( !ka.modulusLength || ka.modulusLength >= 2048 ) ) {\n                    a = alg(a), a.name = 'RSAES-PKCS1-v1_5', delete a.hash;\n                    return _subtle.generateKey( a, true, [ 'encrypt', 'decrypt' ] )\n                        .then( function ( k ) {\n                            return Promise.all([\n                                _subtle.exportKey( 'jwk', k.publicKey ),\n                                _subtle.exportKey( 'jwk', k.privateKey )\n                            ]);\n                        })\n                        .then( function ( keys ) {\n                            keys[0].alg = keys[1].alg = jwkAlg(ka);\n                            keys[0].key_ops = ku.filter(isPubKeyUse), keys[1].key_ops = ku.filter(isPrvKeyUse);\n                            return Promise.all([\n                                _subtle.importKey( 'jwk', keys[0], ka, kx, keys[0].key_ops ),\n                                _subtle.importKey( 'jwk', keys[1], ka, kx, keys[1].key_ops )\n                            ]);\n                        })\n                        .then( function ( keys ) {\n                            return {\n                                publicKey: keys[0],\n                                privateKey: keys[1]\n                            };\n                        });\n                }\n\n                if ( ( isWebkit || ( isIE && ( ka.hash || {} ).name === 'SHA-1' ) )\n                        && m === 'importKey' && a === 'jwk' && ka.name === 'HMAC' && b.kty === 'oct' ) {\n                    return _subtle.importKey( 'raw', s2b( a2s(b.k) ), c, args[3], args[4] );\n                }\n\n                if ( isWebkit && m === 'importKey' && ( a === 'spki' || a === 'pkcs8' ) ) {\n                    return _subtle.importKey( 'jwk', pkcs2jwk(b), c, args[3], args[4] );\n                }\n\n                if ( isIE && m === 'unwrapKey' ) {\n                    return _subtle.decrypt( args[3], c, b )\n                        .then( function ( k ) {\n                            return _subtle.importKey( a, k, args[4], args[5], args[6] );\n                        });\n                }\n\n                var op;\n                try {\n                    op = _fn.apply( _subtle, args );\n                }\n                catch ( e ) {\n                    return Promise.reject(e);\n                }\n\n                if ( isIE ) {\n                    op = new Promise( function ( res, rej ) {\n                        op.onabort =\n                        op.onerror =    function ( e ) { rej(e)               };\n                        op.oncomplete = function ( r ) { res(r.target.result) };\n                    });\n                }\n\n                op = op.then( function ( k ) {\n                    if ( ka.name === 'HMAC' ) {\n                        if ( !ka.length ) ka.length = 8 * k.algorithm.length;\n                    }\n                    if ( ka.name.search('RSA') == 0 ) {\n                        if ( !ka.modulusLength ) ka.modulusLength = (k.publicKey || k).algorithm.modulusLength;\n                        if ( !ka.publicExponent ) ka.publicExponent = (k.publicKey || k).algorithm.publicExponent;\n                    }\n                    if ( k.publicKey && k.privateKey ) {\n                        k = {\n                            publicKey: new CryptoKey( k.publicKey, ka, kx, ku.filter(isPubKeyUse) ),\n                            privateKey: new CryptoKey( k.privateKey, ka, kx, ku.filter(isPrvKeyUse) )\n                        };\n                    }\n                    else {\n                        k = new CryptoKey( k, ka, kx, ku );\n                    }\n                    return k;\n                });\n\n                return op;\n            }\n        });\n\n    [ 'exportKey', 'wrapKey' ]\n        .forEach( function ( m ) {\n            var _fn = _subtle[m];\n\n            _subtle[m] = function ( a, b, c ) {\n                var args = [].slice.call(arguments);\n\n                switch ( m ) {\n                    case 'exportKey':\n                        args[1] = b._key;\n                        break;\n                    case 'wrapKey':\n                        args[1] = b._key, args[2] = c._key;\n                        break;\n                }\n\n                if ( ( isWebkit || ( isIE && ( b.algorithm.hash || {} ).name === 'SHA-1' ) )\n                        && m === 'exportKey' && a === 'jwk' && b.algorithm.name === 'HMAC' ) {\n                    args[0] = 'raw';\n                }\n\n                if ( isWebkit && m === 'exportKey' && ( a === 'spki' || a === 'pkcs8' ) ) {\n                    args[0] = 'jwk';\n                }\n\n                if ( isIE && m === 'wrapKey' ) {\n                    return _subtle.exportKey( a, b )\n                        .then( function ( k ) {\n                            if ( a === 'jwk' ) k = s2b( unescape( encodeURIComponent( JSON.stringify( b2jwk(k) ) ) ) );\n                            return  _subtle.encrypt( args[3], c, k );\n                        });\n                }\n\n                var op;\n                try {\n                    op = _fn.apply( _subtle, args );\n                }\n                catch ( e ) {\n                    return Promise.reject(e);\n                }\n\n                if ( isIE ) {\n                    op = new Promise( function ( res, rej ) {\n                        op.onabort =\n                        op.onerror =    function ( e ) { rej(e)               };\n                        op.oncomplete = function ( r ) { res(r.target.result) };\n                    });\n                }\n\n                if ( m === 'exportKey' && a === 'jwk' ) {\n                    op = op.then( function ( k ) {\n                        if ( ( isWebkit || ( isIE && ( b.algorithm.hash || {} ).name === 'SHA-1' ) )\n                                && b.algorithm.name === 'HMAC') {\n                            return { 'kty': 'oct', 'alg': jwkAlg(b.algorithm), 'key_ops': b.usages.slice(), 'ext': true, 'k': s2a( b2s(k) ) };\n                        }\n                        k = b2jwk(k);\n                        if ( !k.alg ) k['alg'] = jwkAlg(b.algorithm);\n                        if ( !k.key_ops ) k['key_ops'] = ( b.type === 'public' ) ? b.usages.filter(isPubKeyUse) : ( b.type === 'private' ) ? b.usages.filter(isPrvKeyUse) : b.usages.slice();\n                        return k;\n                    });\n                }\n\n                if ( isWebkit && m === 'exportKey' && ( a === 'spki' || a === 'pkcs8' ) ) {\n                    op = op.then( function ( k ) {\n                        k = jwk2pkcs( b2jwk(k) );\n                        return k;\n                    });\n                }\n\n                return op;\n            }\n        });\n\n    [ 'encrypt', 'decrypt', 'sign', 'verify' ]\n        .forEach( function ( m ) {\n            var _fn = _subtle[m];\n\n            _subtle[m] = function ( a, b, c, d ) {\n                if ( isIE && ( !c.byteLength || ( d && !d.byteLength ) ) )\n                    throw new Error(\"Empy input is not allowed\");\n\n                var args = [].slice.call(arguments),\n                    ka = alg(a);\n\n                if ( isIE && m === 'decrypt' && ka.name === 'AES-GCM' ) {\n                    var tl = a.tagLength >> 3;\n                    args[2] = (c.buffer || c).slice( 0, c.byteLength - tl ),\n                    a.tag = (c.buffer || c).slice( c.byteLength - tl );\n                }\n\n                args[1] = b._key;\n\n                var op;\n                try {\n                    op = _fn.apply( _subtle, args );\n                }\n                catch ( e ) {\n                    return Promise.reject(e);\n                }\n\n                if ( isIE ) {\n                    op = new Promise( function ( res, rej ) {\n                        op.onabort =\n                        op.onerror = function ( e ) {\n                            rej(e);\n                        };\n\n                        op.oncomplete = function ( r ) {\n                            var r = r.target.result;\n\n                            if ( m === 'encrypt' && r instanceof AesGcmEncryptResult ) {\n                                var c = r.ciphertext, t = r.tag;\n                                r = new Uint8Array( c.byteLength + t.byteLength );\n                                r.set( new Uint8Array(c), 0 );\n                                r.set( new Uint8Array(t), c.byteLength );\n                                r = r.buffer;\n                            }\n\n                            res(r);\n                        };\n                    });\n                }\n\n                return op;\n            }\n        });\n\n    if ( isIE ) {\n        var _digest = _subtle.digest;\n\n        _subtle['digest'] = function ( a, b ) {\n            if ( !b.byteLength )\n                throw new Error(\"Empy input is not allowed\");\n\n            var op;\n            try {\n                op = _digest.call( _subtle, a, b );\n            }\n            catch ( e ) {\n                return Promise.reject(e);\n            }\n\n            op = new Promise( function ( res, rej ) {\n                op.onabort =\n                op.onerror =    function ( e ) { rej(e)               };\n                op.oncomplete = function ( r ) { res(r.target.result) };\n            });\n\n            return op;\n        };\n\n        global.crypto = Object.create( _crypto, {\n            getRandomValues: { value: function ( a ) { return _crypto.getRandomValues(a) } },\n            subtle:          { value: _subtle }\n        });\n\n        global.CryptoKey = CryptoKey;\n    }\n\n    if ( isWebkit ) {\n\t//If it is iOS and version>=11 or Safari version >=11\n\t/*Below changes are to accommodate apple implementing WebCrypto SubtleCrypto \n\trather than WebKitSubtleCrypto and to maintain backward compatibility*/\n\tif ((userOSversion  >= 11) || (navigator.userAgent.indexOf('Version/11.') > -1 && navigator.userAgent.indexOf(\"Safari\") > -1 ))\n    \t{\n            //Do nothing\n    \t}\n\telse\n    \t{\n        _crypto.subtle = _subtle;\n\t}\n\n        global.Crypto = _Crypto;\n        global.SubtleCrypto = _SubtleCrypto;\n        global.CryptoKey = CryptoKey;\n    }\n}(this);\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlcrypto.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/**\n * Handles the Crypto API\n * \n * @type {{signPayload, generateKeypair}}\n */\n__WLCrypto = \n\t\n\tfunction CreateCryptoObject () {\n\n    /* ############## Asymmetric Native Crypto ############## */\n\tvar dfd = WLJQ.Deferred();\n\ttry{\n      var crypto = window.crypto.subtle || window.crypto.webkitSubtle;\n    }catch(e){\n      WL.Logger.info('No Crypto Object in this browser! '+JSON.stringify(e));\n    }\n\n    var generateAsymmetricKeyPair = function () {\n        var dfd = WLJQ.Deferred();\n        var algorithmKeyGen = {\n            name: 'RSASSA-PKCS1-v1_5',\n            modulusLength: 2048,\n            publicExponent: new Uint8Array([0x01, 0x00, 0x01]),  // Equivalent\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// to 65537\n            hash: {\n                name: 'SHA-256'\n            }\n        };\n        // When using IndexedDB AND native crypto we can set the key as\n\t\t// non-extractable. We want it 'extractable' to be TRUE when we are\n\t\t// using Crypto-Shim OR when we do NOT have IndexedDB available\n        var isExtractable = !WL.AsyncDAO.isIndexedDB() || isCryptoShim;\n        // changed 2nd parameter to true to accommodate extraction of keys\n        crypto.generateKey(algorithmKeyGen, true, ['sign']).then(\n            function (keyPair) {\n                dfd.resolve(keyPair);\n            },\n            function (error) {\n                WL.Logger.error('Failed to generate keypair ' + JSON.stringify(error));\n                dfd.reject(error);\n            }\n        );\n\n        return dfd.promise();\n    };\n\n    var signAsymmetricKeyPair = function (payload, kid, keyPair) {\n        var dfd = WLJQ.Deferred();\n\n        exportPublicKey(keyPair).then(\n            function (jwk) {\n                var alg = jwk.alg;\n                jwk.kid = !WL.Validators.isNullOrUndefined(kid) ? kid : undefined;\n                var header = {'alg' : alg, 'jwk' : jwk};\n                var jwsHeaderAsString = JSON.stringify(header);\n                var payloadAsString = JSON.stringify(payload);\n                // concatenate JWS Header and payload.\n                var csrHeaderAndPayload = encodeToBase64(jwsHeaderAsString) + '.' + encodeToBase64(payloadAsString);\n                signData(csrHeaderAndPayload, keyPair).then(\n                    function (signedData) {\n                        dfd.resolve(csrHeaderAndPayload + '.' + signedData);\n                    },\n                    function (error) {\n                        dfd.reject(error);\n                    });\n            },\n            function (error) {\n                dfd.reject(error);\n            });\n        return dfd.promise();\n    };\n\n    var signData = function (stringToSign, keyPair) {\n        var dfd = WLJQ.Deferred();\n\n        var algorithmSign = {\n            name: 'RSASSA-PKCS1-v1_5',\n            hash: 'SHA-256'\n        };\n        crypto.sign(algorithmSign, keyPair.privateKey, new Uint8Array(str2arrayBuffer(stringToSign))).then(\n            function (signedData) {\n                var base64sign = btoa(String.fromCharCode.apply(null, new Uint8Array(signedData)));\n                dfd.resolve(base64sign);\n            })\n            .catch(\n                function (error) {\n                    WL.Logger.error('error in signing data with keypair: ' + error.toString());\n                    dfd.reject(error);\n                });\n\n        return dfd.promise();\n    };\n\n    \n\n    var exportPublicKey = function (keyPair) {\n        var dfd = WLJQ.Deferred();\n\n        crypto.exportKey(\"jwk\", keyPair.publicKey).then(\n            function (jsonKey) {\n                dfd.resolve(jsonKey);\n            },\n            function (error) {\n                WL.Logger.error('Failed to extract public key from keypair ' + error.toString());\n                dfd.reject(error);\n            });\n\n        return dfd.promise();\n    };\n    /* ############### End Asymmetric Native Crypto ################ */\n    /* ################## Symmetric Key ####################### */\n\n        var signSymmetric = function (payload, kid, keyPair) {\n        var dfd = WLJQ.Deferred();\n  \t  \tvar jwk = createJWK(kid);\n        var alg = 'HS256';\n    \tvar header = {'alg' : alg, 'jwk' : jwk, 'key' : keyPair.publicKey};\n        var jwsHeaderAsString = JSON.stringify(header);\n        var payloadAsString = JSON.stringify(payload);\n        // concatenate JWS Header and payload.\n        var csrHeaderAndPayload = encodeToBase64(jwsHeaderAsString) + '.' + encodeToBase64(payloadAsString);\n        var shaObj = new jsSHA(\"SHA-256\", \"TEXT\");\n        shaObj.setHMACKey(keyPair.publicKey, \"TEXT\");\n        shaObj.update(csrHeaderAndPayload);\n        var signedData = shaObj.getHMAC(\"B64\");\n        dfd.resolve(csrHeaderAndPayload + '.' + signedData);\n        return dfd.promise();\n\n      }\n      \n      var generateSymmetricKey = function (){\n    \t  var dfd = WLJQ.Deferred();\n\t\t  try{\n\t\t\t  dfd.resolve(CreateSymmetricKey(7));\n\t\t  } catch(e) {\n\t\t\t  // for older browsers who need to self generate seed\n\t\t\t  var cont = function () {\n\t\t\t\t    sjcl.random.removeEventListener('seeded', cont);\n\t\t\t\t    // The collectors can be turned off if no more entropy is\n\t\t\t\t\t// needed.\n\t\t\t\t    sjcl.random.stopCollectors();\n\n\t\t\t\t\tdfd.resolve(CreateSymmetricKey(4));\n\t\t\t\t};\n\n\t\t\t\tsjcl.random.addEventListener('seeded', cont);\n\t\t\t\tsjcl.random.startCollectors();\n\t\t  }\n          return dfd.promise();\n      }\n      \n      // creates a random key for symmetric signing\n      function CreateSymmetricKey(entropy){\n    \tvar numbers = sjcl.random.randomWords(4, entropy);\n\t\tvar key = \"\";\n\t\tfor (var i=0;i<numbers.length;i++){\n\t\t\tkey+=btoa(numbers[i]);\n\t\t}\n\t\tkey = key.replace(/=/g,\"\");\n\t\tkey = key.substring(0,32);\n\t\tvar keyPair = {};\n        keyPair.privateKey = key;\n        keyPair.publicKey = key;\n        return keyPair;\n      }\n      \n      /* ################## End Symmetric Key ####################### */\n      /* ################## Utils ####################### */\n      \n      var createJWK = function(kid){\n    \t  var jwk = {};\n          jwk.kid = !WL.Validators.isNullOrUndefined(kid) ? kid : undefined;\n          jwk.use = 'enc';\n          jwk.kty = 'oct';\n          jwk.k = \"\";\n          return jwk;\n      }\n      \n      var encodeToBase64 = function (string) {\n          return btoa(String.fromCharCode.apply(null, new Uint8Array(str2arrayBuffer(string))));\n      };\n      \n      var str2arrayBuffer = function (str) {\n          var buf = new ArrayBuffer(str.length);\n          var bufView = new Uint8Array(buf);\n          for (var i = 0, strLen = str.length; i < strLen; i++) {\n              bufView[i] = str.charCodeAt(i);\n          }\n          return buf;\n      }\n      /* ################## End Utils ####################### */\n      \n      /*\n\t\t * return true if asymmetric encryption based on native or shimmed\n\t\t * capabilities false for symmetric encryption with key in local storage\n\t\t * (no shims)\n\t\t */\n      function isAsymmetricAvailable(){\n        var dfd = WLJQ.Deferred();\n        if ((window.crypto && window.crypto.subtle)// Normal Browsers\n            || (window.msCrypto && window.msCrypto.subtle) || // Supports\n            // IE\n            (window.crypto && window.crypto.webkitSubtle)) { // Supports\n            // Safari\n            console.log(\"Crypto Object is available...\");\n            generateAsymmetricKeyPair().then(function (keyPair) {\n                dfd.resolve(true);\n            }, function (err) {\n                dfd.resolve(false);\n            });\n        } else {\n            dfd.resolve(false);\n        }\n        return dfd.promise();\n     }\n      \n     isAsymmetricAvailable().then(function (result) {\n        console.log(\"isAsymmetricAvailable\", result);\n        // Checking for sdkProtocol version and if it is one then using the old algorithm for compatibility\n        if (result && WL.Config.__getSDKProtocolVersion().sdk_protocol_version >= 2) {\n            WL.Crypto = {\n                signJWS: signAsymmetricKeyPair,\n                generateKeyPair: generateAsymmetricKeyPair,\n                cryptoFlag: true, // wi 119013,\n                signData: signData\n            };\n        } else {\n            WL.Crypto = {\n                signJWS: signSymmetric,\n                generateKeyPair: generateSymmetricKey,\n                cryptoFlag: false // wi 119013\n            };\n        }\n        dfd.resolve();\n    });\n    \t  \n      return dfd.promise();\n};\n\n/**\n * ================================================================= \n * Source file taken from :: wlIndexDb.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2015 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*jshint strict:false, maxparams:4*/\n__WLIndexDB = function() {\n    var defaultCategory = 'default';\n\n    // This works on all devices/browsers, and uses IndexedDBShim as a final fallback\n    var indexedDB = null;\n\n\n\n    // Open (or create) the database, the database is always the appID\n    var dbName;\n\n    var db;\n\n    /**\n     * Initializes the DB and creates a default category, should be called on startup\n     * @returns {*}\n     */\n    this.init = function() {\n        var dfd = WLJQ.Deferred();\n\n        indexedDB = getIndexedDB();\n\n        // In the cases where we don't have indexedDB support\n        WL.Validators.validateDefined(indexedDB, 'init');\n\n        dbName = WL.Config.__getApplicationName();\n        var request = indexedDB.open(dbName, 1);\n        request.onupgradeneeded = function(event) {\n            var thisDB = event.target.result;\n            if(!thisDB.objectStoreNames.contains(defaultCategory)) {\n                thisDB.createObjectStore(defaultCategory, {keyPath: \"key\"});\n            }\n            var transaction = event.target.transaction;\n\n            transaction.oncomplete =\n                function() {\n                   db = event.target.result;\n                   dfd.resolve();\n                }\n        };\n\n        request.onerror = function (event) {\n            WL.Logger.error(JSON.stringify(event.target.error.message));\n            dfd.reject(event.target.error);\n        };\n\n        request.onsuccess = function(event) {\n            db = event.target.result;\n            dfd.resolve();\n        };\n        return dfd.promise();\n    };\n\n    /**\n     * Sets an item in the database\n     * @param key\n     * @param value\n     * @returns {*}\n     */\n    this.setItem = function(key, value) {\n        var dfd = WLJQ.Deferred();\n        var store = getObjectStore('readwrite');\n        var input = {'key' : key , 'value' : value};\n        var request = store.put(input);\n\n        request.onsuccess = function() {\n            dfd.resolve();\n        };\n\n        request.onerror = function(e) {\n            WL.Logger.error('Error setting item in indexedDb : ' + e.target.error.name);\n            dfd.reject(e);\n        };\n        return dfd.promise();\n    };\n\n    /**\n     * Gets an item in the database\n     * @param key\n     * @returns {value for given key}\n     */\n    this.getItem = function(key) {\n        var dfd = WLJQ.Deferred();\n        var store = getObjectStore('readonly');\n        var request = store.get(key);\n\n        request.onerror = function(e) {\n            WL.Logger.error('Error getting item from indexedDb : ' + e.target.error.name);\n            dfd.reject(e);\n        };\n\n        request.onsuccess = function() {\n            if (!WL.Validators.isNullOrUndefined(request.result)){\n                dfd.resolve(request.result.value);\n            } else {\n                dfd.resolve();\n            }\n        };\n        return dfd.promise();\n    };\n\n    /**\n     * Removes an item in the database\n     * @param key\n     * @returns {*}\n     */\n    this.removeItem = function(key) {\n        var dfd = WLJQ.Deferred();\n        var store = getObjectStore('readwrite');\n\n        var request = store.delete(key);\n\n        request.onsuccess = function() {\n            dfd.resolve();\n        };\n        return dfd.promise();\n    };\n\n    this.clearDB = function() {\n        var dfd = WLJQ.Deferred();\n        var DBOpenRequest = window.indexedDB.open(dbName, 1);\n        DBOpenRequest.onsuccess = function (event) {\n\n            // store the result of opening the database in the db variable. This is used a lot below\n            var db = event.target.result;\n            var transaction = db.transaction(defaultCategory, 'readwrite');\n            var objectStore = transaction.objectStore(defaultCategory);\n            var objectStoreRequest = objectStore.clear();\n\n            objectStoreRequest.onsuccess = function(event) {\n                dfd.resolve();\n            };\n\n            objectStoreRequest.onerror = function(event) {\n                dfd.reject();\n            };\n        };\n        return dfd.promise();\n    };\n\n    function getObjectStore(permissions) {\n        WL.Validators.validateDefined(db, 'getObjectStore');\n        var tx = db.transaction(defaultCategory, permissions);\n        return tx.objectStore(defaultCategory);\n    }\n\n    function getIndexedDB() {\n        // Get IndexedDB Factory according to browser\n        return window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\n    }\n\n};\n\n\n\n/**\n * ================================================================= \n * Source file taken from :: wldao.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2016 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n__WLDAO = function() {\n\tvar dao;\n\n\t/**\n\t * Initializes the database and verifies it is accessible\n\t * \n\t * @returns {*}\n\t */\n\tthis.init = function() {\n\t\ttry {\n\t\t\tdao = new __WLLocalStorageDB();\n\t\t\tdao.init();\n\t\t\tdao.setItem(\"testKey\", \"testValue\");\n\t\t\tif (dao.getItem(\"testKey\") == \"testValue\") {\n\t\t\t\tdao.removeItem(\"testKey\");\n\t\t\t} else {\n\t\t\t\tthrow \"LocalStorage Error\";\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tdao = new __WLVarStorageDB();\n\t\t\tdao.init();\n\t\t}\n\t};\n\n\t/**\n\t * Sets an item in the database\n\t * \n\t * @param key\n\t * @param value\n\t * @param options\n\t *            {{session : boolean, global : boolean}} - NOTE: When local storage\n\t *            is not available (e.g. Safari private mode) all data will be\n\t *            saved as session storage (regardless of options parameter);\n\t * @returns {*}\n\t */\n\tthis.setItem = function(key, value, options) {\n\t\tdao.setItem(key, value, options);\n\t}\n\n\t/**\n\t * Gets an item in the database\n\t * \n\t * @param key\n\t * @param options\n\t *            {{session : boolean, global : boolean}}\n\t * @returns {value for given key}\n\t */\n\tthis.getItem = function(key, options) {\n\t\treturn dao.getItem(key, options);\n\t}\n\n\t/**\n\t * Removes an item in the database\n\t * \n\t * @param key\n\t * @param options\n\t *            {{session : boolean, global : boolean}}\n\t * @returns {*}\n\t */\n\tthis.removeItem = function(key, options) {\n\t\tdao.removeItem(key, options);\n\t}\n};\n\n__WL.prototype.DAO = new __WLDAO;\nWL.DAO = new __WLDAO;\n\n/**\n * ================================================================= \n * Source file taken from :: wlasyncdao.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2016 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n__WLAsyncDAO = function() {\n\tvar dao;\n\tvar isIndexedDBEnabled = false;\n\t\n\t/**\n     * Initializes the database and verifies it is accessible\n     * @returns {*}\n     */\n\tthis.init = function() {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tdao = new __WLIndexDB();\n\t\t// check if IndexedDB is actually working by setting a test value and\n\t\t// then getting it by the test key. Finally removing the test key-value\n\t\t// pair and asserting that IndexDB is working by the isIndexedDBEnabled\n\t\t// variable.\n\t\ttry{\n\t\tdao.init().done(function() {\n\t\t\tdao.setItem(\"testKey\", \"testValue\").done(function() {\n\t\t\t\tdao.getItem(\"testKey\").done(function(value) {\n\t\t\t\t\tif (value == \"testValue\") {\n\t\t\t\t\t\tdao.removeItem(\"testKey\").done(function() {\n\t\t\t\t\t\t\tisIndexedDBEnabled = true;\n\t\t\t\t\t\t\tdfd.resolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdao = new __WLSyncDAOWrapper();\n\t\t\t\t\t\tdao.init();\n\t\t\t\t\t\tdfd.resolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t// all failures will be caught here and revert the underlying DAO\n\t\t\t// object to the synchronous DAO object.\n\t\t}).fail(function() {\n\t\t\tdao = new __WLSyncDAOWrapper();\n\t\t\tdao.init();\n\t\t\tdfd.resolve();\n\t\t});\n\t\t} catch (err){\n\t\t\tdao = new __WLSyncDAOWrapper();\n\t\t\tdao.init();\n\t\t\tdfd.resolve();\n\t\t}\n\t\treturn dfd.promise();\n\t};\n\t\n\t/**\n     * Sets an item in the database\n     * @param key\n     * @param value\n     * @returns {*}\n     */\n\tthis.setItem = function(key, value) {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tdao.setItem(key, value).then(function(){\n\t\t\tdfd.resolve();\n\t\t});\n\t\treturn dfd.promise();\n\t}\n\n\t/**\n     * Gets an item in the database\n     * @param key\n     * @returns {value for given key}\n     */\n\tthis.getItem = function(key) {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tdao.getItem(key).then(function(value) {\n\t\t\tdfd.resolve(value);\n\t\t});\n\t\treturn dfd.promise();\n\t}\n\n\t/**\n     * Removes an item in the database\n     * @param key\n     * @returns {*}\n     */\n\tthis.removeItem = function(key) {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tdao.removeItem(key).then(function() {\n\t\t\tdfd.resolve();\n\t\t});\n\t\treturn dfd.promise();\n\t}\n\t\n\t/**\n     * Checks if IndexedDB is available and working properly\n     * @returns {bool - true if IndexedDB is available}\n     */\n\tthis.isIndexedDB = function() {\n\t\treturn isIndexedDBEnabled;\n\t}\n};\n\n/**\n * ================================================================= \n * Source file taken from :: wldaoasyncwrapper.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2016 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n__WLSyncDAOWrapper = function() {\n\tvar dao;\n\t\n\t/**\n     * Initializes the database\n     * @returns {*}\n     */\n\tthis.init = function() {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tdao = new __WLDAO();\n\t\tdao.init();\n\t\tdfd.resolve();\n\t\treturn dfd.promise();\n\t};\n\n\t/**\n     * Sets an item in the Database\n     * @param key\n     * @param value\n     * @returns {*}\n     */\n\tthis.setItem = function(key, value) {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tdao.setItem(key, value);\n\t\tdfd.resolve();\n\t\treturn dfd.promise();\n\t}\n\n\tthis.getItem = function(key) {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tvar value = dao.getItem(key);\n\t\tdfd.resolve(value);\n\t\treturn dfd.promise();\n\t}\n\n\tthis.removeItem = function(key) {\n\t\tvar dfd = WLJQ.Deferred();\n\t\tdao.removeItem(key);\n\t\tdfd.resolve();\n\t\treturn dfd.promise();\n\t}\n};\n\n/**\n * ================================================================= \n * Source file taken from :: wlvarstorage.js\n * ================================================================= \n */\n\n/*\n Licensed Materials - Property of IBM\n\n (C) Copyright 2016 IBM Corp.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n__WLVarStorageDB = function() {\n\n\tvar appNamePrefix;\n\tvar storage = {};\n\n\t/**\n     * Initializes the database and verifies it is accessible\n     * @returns {*}\n     */\n\tthis.init = function() {\n\t\tappNamePrefix = WL.Config.__getApplicationName();\n\t};\n\n    /**\n     * Sets an item in the Database\n     * @param key\n     * @param value\n     * @returns {*}\n     */\n\tthis.setItem = function(key, value) {\n\t\tvar finalKey = buildKey(key);\n\t\tvar finalValue = value ? JSON.stringify(value) : null;\n\t\tstorage[finalKey] = finalValue;\n\t};\n\n    /**\n     * Gets an item in the Database\n     * @param key\n     * @returns {string - JSON representation of value for given key}\n     */\n\tthis.getItem = function(key) {\n\t\tvar finalKey = buildKey(key);\n\t\tvalue = storage[finalKey];\n\t\treturn value ? JSON.parse(value) : null;\n\t};\n\n\t/**\n     * Removes an item in the database\n     * @param key\n     * @returns {*}\n     */\n\tthis.removeItem = function(key) {\n\t\tvar finalKey = buildKey(key);\n\t\tdelete storage[finalKey];\n\t};\n\n\t\n\t // Builds the key with the appName prefeix\n\tfunction buildKey(key) {\n\t\treturn appNamePrefix + '.' + key;\n\t}\n};\n\n\n/**\n * ================================================================= \n * Source file taken from :: wlgap.web.js\n * ================================================================= \n */\n\n/**\n * Created by orep on 4/12/16.\n */\n//TODO\n\n/**\n * ================================================================= \n * Source file taken from :: wlcertmanager.js\n * ================================================================= \n */\n\n/*\n * Licensed Materials - Property of IBM\n * 5725-I43 (C) Copyright IBM Corp. 2006, 2013. All Rights Reserved.\n * US Government Users Restricted Rights - Use, duplication or\n * disclosure restricted by GSA ADP Schedule Contract with IBM Corp.\n */\n\n/* Copyright (C) Worklight Ltd. 2006-2012.  All rights reserved. */\n\nWL.CertManager = (function () {\n    /*jshint strict:false, maxparams:4*/\n\n    var KEYPAIR_OAUTH_ID = 'com.mfp.oauth.keypair';\n\n    // Map of keypairId -> keypair generated by WL.Crypto.generateKeyPair\n    var keyPairMapping = {};\n\n    \n    var getEncryptedDeviceID = function () {\n        var dfd = WLJQ.Deferred();\n        var deviceId = WL.BrowserManager.getDeviceData().id;\n        if (!deviceId) return null;\n        try {\n            getOrCreateKeyPair(KEYPAIR_OAUTH_ID).then(\n                function (keyPair) {\n                    WL.Crypto.signData(deviceId, keyPair).then(function (signedData) {\n                        dfd.resolve(signedData);\n                    }, function (err) {\n                        dfd.reject(err);\n                    });\n                },\n                function (error) {\n                    dfd.reject(error);\n                });\n        } catch (e) {\n            dfd.reject(e);\n        }\n        return dfd.promise();;\n    };\n\n    /**\n     * Generate keypair(private+public) and save it in indexDB and in memory.\n     */\n    var generateKeyPair = function (keyPairId) {\n        var dfd = WLJQ.Deferred();\n\n        keyPairId = !WL.Validators.isNullOrUndefined(keyPairId) ? keyPairId : KEYPAIR_OAUTH_ID;\n        WL.Crypto.generateKeyPair().then(\n            function (keyPair) {\n                keyPairMapping[keyPairId] = keyPair;\n             \n             if(WL.Crypto.cryptoFlag==true){ // wi 119013\n                        saveOrUpdateKeyPair(keyPairId, keyPair).then(\n                            function () {\n                                dfd.resolve(keyPair);\n                            },\n                            function (error) {\n                                WL.Logger.error('Failed to save keypair in indexDB ' + JSON.stringify(error));\n                                dfd.reject(error);\n                            });\n                        }else{ \n                            dfd.resolve(keyPair);\n                        }\n             },\n            function (error) {\n                dfd.reject(error);\n            });\n\n        return dfd.promise();\n    };\n\n    var getOrCreateKeyPair = function (keyPairId) {\n        var dfd = WLJQ.Deferred();\n\n        var keyForDB = !WL.Validators.isNullOrUndefined(keyPairId) ? keyPairId : KEYPAIR_OAUTH_ID;\n        if (keyPairMapping.hasOwnProperty(keyPairId) && !WL.Validators.isNullOrUndefined(keyPairMapping[keyPairId])) {\n            dfd.resolve(keyPairMapping[keyPairId]);\n        } else {\n            getKeyPair(keyForDB).then(\n                function (keyPair) {\n                    if (!WL.Validators.isNullOrUndefined(keyPair)) {\n                        dfd.resolve(keyPair);\n                    } else {\n                        generateKeyPair(keyPairId).then(\n                            function (keyPair) {\n                                dfd.resolve(keyPair)\n                            },\n                            function (error) {\n                                dfd.reject(error);\n                            });\n                    }\n                },\n                // failed to read from DB\n                function (error) {\n                    dfd.reject(error)\n                });\n        }\n\n        return dfd.promise();\n    };\n\n    var deleteKeyPair = function (keyPairId) {\n        var dfd = WLJQ.Deferred();\n\n        var keyForDB = !WL.Validators.isNullOrUndefined(keyPairId) ? keyPairId : KEYPAIR_OAUTH_ID;\n\n        if (keyPairMapping.hasOwnProperty(keyForDB)) {\n            keyPairMapping.keyPairId = null;\n        }\n        removeKeyPair(keyForDB).then(\n            function () {\n                dfd.resolve();\n            },\n            function (error) {\n                dfd.reject(error);\n            });\n        return dfd.promise();\n    };\n    /**\n     *\n     * @param payload - payload to sign\n     * @param options - optional json object, {\"kid\": client_id, \"keyPairId\" : idForKeyPair}\n     */\n    var signJWS = function (payload, options) {\n        var optionParams = WL.Validators.isNullOrUndefined(options) ? {} : options;\n        var dfd = WLJQ.Deferred();\n\n        var kid = optionParams.kid;\n        var keyPairId = !WL.Validators.isNullOrUndefined(optionParams.keyPairId) ? keyPairId : KEYPAIR_OAUTH_ID;\n\n        getOrCreateKeyPair(keyPairId).then(\n            function (keyPair) {\n                WL.Crypto.signJWS(payload, kid, keyPair).then(\n                    function (jws) {\n                        dfd.resolve(jws);\n                    },\n                    function (error) {\n                        dfd.reject(error);\n                    });\n            },\n            function (error) {\n                dfd.reject(error);\n            });\n\n        return dfd.promise();\n    };\n\n    var exportKey = function (cryptoKey) {\n        var dfd = WLJQ.Deferred();\n        try {\n            var crypto = window.crypto.subtle || window.crypto.webkitSubtle;\n            crypto.exportKey(\n                \"jwk\",\n                cryptoKey\n            ).then(function (jsonKeyData) {\n                dfd.resolve(jsonKeyData);\n            }).catch(function (err) {\n                console.error(err);\n            });\n        } catch (e) {\n            WL.Logger.info('No Crypto Object in this browser! ' + JSON.stringify(e));\n        }\n        return dfd.promise();\n    }\n\n    var importKey = function (jsonKey) {\n        var dfd = WLJQ.Deferred();\n        try {\n            var crypto = window.crypto.subtle || window.crypto.webkitSubtle;\n            crypto.importKey(\n                \"jwk\",\n                jsonKey,\n                {\n                    name: 'RSASSA-PKCS1-v1_5',\n                    modulusLength: 2048,\n                    publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                    hash: {\n                        name: 'SHA-256'\n                    }\n                },\n                true,\n                jsonKey.key_ops\n            ).then(function (importedKey) {\n                dfd.resolve(importedKey);\n            }).catch(function (err) {\n                console.error(err);\n                dfd.reject(err);\n            });\n        } catch (e) {\n            WL.Logger.info('No Crypto Object in this browser! ' + JSON.stringify(e));\n        }\n        return dfd.promise();\n    }\n    \n    var saveOrUpdateKeyPair = function(keyId, keypair) {\n        var dfd = WLJQ.Deferred();\n        var privateKeyKey = keyId + '.private.key';\n        var publicKeyKey = keyId + '.public.key';\n        var privateKey = keypair.privateKey;\n        var publicKey = keypair.publicKey;\n\n        // Save public key\n        exportKey(privateKey).then(function (jsonKeyData) {\n            exportKey(publicKey).then(function(publicJsonKeyData) {\n                WL.AsyncDAO.setItem(publicKeyKey, publicJsonKeyData).then(\n                    function () {\n                        // save exported json key in indexedDB\n                        WL.AsyncDAO.setItem(privateKeyKey, jsonKeyData).then(\n                            function () {\n                                dfd.resolve();\n                            }, function (error) {\n                                dfd.reject(error);\n                            });\n                    }, function (error) {\n                        dfd.reject(error);\n                    });\n            })\n        });\n        return dfd.promise();\n    };\n\n\n    var getKeyPair = function (keyId) {\n        var dfd = WLJQ.Deferred();\n        var privateKeyKey = keyId + '.private.key';\n        var publicKeyKey = keyId + '.public.key';\n        var keypair = {};\n        if (WL.Crypto.cryptoFlag == true) { // wi 119013\n            //Get private key\n            WL.AsyncDAO.getItem(privateKeyKey).then(\n                function (privateKeyJsonExported) {\n                    console.log('Getting the private from DB --> ' ,privateKeyJsonExported)\n                    if (!privateKeyJsonExported) {\n                        dfd.resolve(null);\n                    }\n                    importKey(privateKeyJsonExported).then(function (privateKey) {\n                        // Continue to  get public key\n                        console.log('Getting the privatekey by importing --> ' ,privateKey)\n                        keypair['privateKey'] = privateKey;\n                        WL.AsyncDAO.getItem(publicKeyKey)\n                            .then(\n                                function (publicKeyJsonExported) {\n                                    console.log('Getting the public from DB --> ' ,publicKeyJsonExported)\n                                    if (!publicKeyJsonExported) {\n                                        dfd.resolve(null);\n                                    } \n                                    if(publicKeyJsonExported instanceof CryptoKey){\n                                        console.log('Saved key is an instance of type cryptokey --> ' ,publicKeyJsonExported);\n                                        keypair['publicKey'] = publicKeyJsonExported;\n                                        dfd.resolve(keypair);\n                                    }\n                                    else{\n                                        console.log('Saved key is an not an instance of type cryptokey --> ' ,publicKeyJsonExported);\n                                        importKey(publicKeyJsonExported).then(function (publicKey) {\n                                            keypair['publicKey'] = publicKey;\n                                            console.log('Returning KeyPair --> ' ,keypair);\n                                            dfd.resolve(keypair);\n                                        });\n                                    }\n                                },\n                                function (e) {\n                                    dfd.reject(e);\n                                });\n                    });\n                }, function (e) {\n                    dfd.reject(e);\n                });\n        } else {  // wi 119013\n            WL.Crypto.generateKeyPair().then(\n                function (keyPair) {\n                    dfd.resolve(keyPair);\n                },\n                function (error) {\n                    dfd.reject(error);\n                });\n        }\n        return dfd.promise();\n    };\n\n    var removeKeyPair = function(keyId) {\n        var dfd = WLJQ.Deferred();\n        var privateKeyKey = keyId + '.private.key';\n        var publicKeyKey = keyId + '.public.key';\n        WL.AsyncDAO.removeItem(privateKeyKey).always(\n            function(){\n            \tWL.AsyncDAO.removeItem(publicKeyKey).always(function(){\n                dfd.resolve();\n            });\n        });\n        return dfd.promise();\n    };\n    \n    var init = function(){\n        var dfd = WLJQ.Deferred();\n    \t__WL.prototype.AsyncDAO = new __WLAsyncDAO();\n    \tWL.AsyncDAO = new __WLAsyncDAO();\n    \tWL.AsyncDAO.init().done(\n                function () {\n                \tnew __WLCrypto().done(function(){//synchronized this function to avoid MFP APIs unaccessible immediately after wlCommonInit() function gets called. \n                \t  dfd.resolve();\t\n                \t});\n                });\n    \treturn dfd.promise();\n    };\n\n    return {\n    \tinit:init,\n        signJWS: signJWS,\n        getEncryptedDeviceID: getEncryptedDeviceID,\n        deleteKeyPair: deleteKeyPair,\n        getOrCreateKeyPair: getOrCreateKeyPair\n    };\n\n}());\n\n     // Exposing WL.ResourceRequest and WL.AuthorizationManager to the global name space is for backward compatibility and for consistency to hybrid client\n    WL.ResourceRequest = WLResourceRequest;\n    WL.AuthorizationManager = WLAuthorizationManager;\n    \n    // Compatibility with Analytics hybrid client\n    WL.Logger = wlanalytics.logger;\n    WL.Logger.send = wlanalytics.send;\n    WL.Logger.on = wlanalytics.enable;\n    WL.Analytics = wlanalytics;\n    \n    return WL;\n}));","\"use strict\";var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return\"CORRUPT: \"+this.message};this.message=a},invalid:function(a){this.toString=function(){return\"INVALID: \"+this.message};this.message=a},bug:function(a){this.toString=function(){return\"BUG: \"+this.message};this.message=a},notReady:function(a){this.toString=function(){return\"NOT READY: \"+this.message};this.message=a}}};\nsjcl.cipher.aes=function(a){this.s[0][0][0]||this.O();var b,c,d,e,f=this.s[0][4],g=this.s[1];b=a.length;var h=1;if(4!==b&&6!==b&&8!==b)throw new sjcl.exception.invalid(\"invalid aes key size\");this.b=[d=a.slice(0),e=[]];for(a=b;a<4*b+28;a++){c=d[a-1];if(0===a%b||8===b&&4===a%b)c=f[c>>>24]<<24^f[c>>16&255]<<16^f[c>>8&255]<<8^f[c&255],0===a%b&&(c=c<<8^c>>>24^h<<24,h=h<<1^283*(h>>7));d[a]=d[a-b]^c}for(b=0;a;b++,a--)c=d[b&3?a:a-4],e[b]=4>=a||4>b?c:g[0][f[c>>>24]]^g[1][f[c>>16&255]]^g[2][f[c>>8&255]]^g[3][f[c&\n255]]};\nsjcl.cipher.aes.prototype={encrypt:function(a){return t(this,a,0)},decrypt:function(a){return t(this,a,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var a=this.s[0],b=this.s[1],c=a[4],d=b[4],e,f,g,h=[],k=[],l,n,m,p;for(e=0;0x100>e;e++)k[(h[e]=e<<1^283*(e>>7))^e]=e;for(f=g=0;!c[f];f^=l||1,g=k[g]||1)for(m=g^g<<1^g<<2^g<<3^g<<4,m=m>>8^m&255^99,c[f]=m,d[m]=f,n=h[e=h[l=h[f]]],p=0x1010101*n^0x10001*e^0x101*l^0x1010100*f,n=0x101*h[m]^0x1010100*m,e=0;4>e;e++)a[e][f]=n=n<<24^n>>>8,b[e][m]=p=p<<24^p>>>8;for(e=\n0;5>e;e++)a[e]=a[e].slice(0),b[e]=b[e].slice(0)}};\nfunction t(a,b,c){if(4!==b.length)throw new sjcl.exception.invalid(\"invalid aes block size\");var d=a.b[c],e=b[0]^d[0],f=b[c?3:1]^d[1],g=b[2]^d[2];b=b[c?1:3]^d[3];var h,k,l,n=d.length/4-2,m,p=4,r=[0,0,0,0];h=a.s[c];a=h[0];var q=h[1],v=h[2],w=h[3],x=h[4];for(m=0;m<n;m++)h=a[e>>>24]^q[f>>16&255]^v[g>>8&255]^w[b&255]^d[p],k=a[f>>>24]^q[g>>16&255]^v[b>>8&255]^w[e&255]^d[p+1],l=a[g>>>24]^q[b>>16&255]^v[e>>8&255]^w[f&255]^d[p+2],b=a[b>>>24]^q[e>>16&255]^v[f>>8&255]^w[g&255]^d[p+3],p+=4,e=h,f=k,g=l;for(m=\n0;4>m;m++)r[c?3&-m:m]=x[e>>>24]<<24^x[f>>16&255]<<16^x[g>>8&255]<<8^x[b&255]^d[p++],h=e,e=f,f=g,g=b,b=h;return r}\nsjcl.bitArray={bitSlice:function(a,b,c){a=sjcl.bitArray.$(a.slice(b/32),32-(b&31)).slice(1);return void 0===c?a:sjcl.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d=Math.floor(-b-c&31);return((b+c-1^b)&-32?a[b/32|0]<<32-d^a[b/32+1|0]>>>d:a[b/32|0]>>>d)&(1<<c)-1},concat:function(a,b){if(0===a.length||0===b.length)return a.concat(b);var c=a[a.length-1],d=sjcl.bitArray.getPartial(c);return 32===d?a.concat(b):sjcl.bitArray.$(b,d,c|0,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length;return 0===\nb?0:32*(b-1)+sjcl.bitArray.getPartial(a[b-1])},clamp:function(a,b){if(32*a.length<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;b=b&31;0<c&&b&&(a[c-1]=sjcl.bitArray.partial(b,a[c-1]&2147483648>>b-1,1));return a},partial:function(a,b,c){return 32===a?b:(c?b|0:b<<32-a)+0x10000000000*a},getPartial:function(a){return Math.round(a/0x10000000000)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return!1;var c=0,d;for(d=0;d<a.length;d++)c|=a[d]^b[d];return 0===\nc},$:function(a,b,c,d){var e;e=0;for(void 0===d&&(d=[]);32<=b;b-=32)d.push(c),c=0;if(0===b)return d.concat(a);for(e=0;e<a.length;e++)d.push(c|a[e]>>>b),c=a[e]<<32-b;e=a.length?a[a.length-1]:0;a=sjcl.bitArray.getPartial(e);d.push(sjcl.bitArray.partial(b+a&31,32<b+a?c:d.pop(),1));return d},i:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]},byteswapM:function(a){var b,c;for(b=0;b<a.length;++b)c=a[b],a[b]=c>>>24|c>>>8&0xff00|(c&0xff00)<<8|c<<24;return a}};\nsjcl.codec.utf8String={fromBits:function(a){var b=\"\",c=sjcl.bitArray.bitLength(a),d,e;for(d=0;d<c/8;d++)0===(d&3)&&(e=a[d/4]),b+=String.fromCharCode(e>>>24),e<<=8;return decodeURIComponent(escape(b))},toBits:function(a){a=unescape(encodeURIComponent(a));var b=[],c,d=0;for(c=0;c<a.length;c++)d=d<<8|a.charCodeAt(c),3===(c&3)&&(b.push(d),d=0);c&3&&b.push(sjcl.bitArray.partial(8*(c&3),d));return b}};\nsjcl.codec.hex={fromBits:function(a){var b=\"\",c;for(c=0;c<a.length;c++)b+=((a[c]|0)+0xf00000000000).toString(16).substr(4);return b.substr(0,sjcl.bitArray.bitLength(a)/4)},toBits:function(a){var b,c=[],d;a=a.replace(/\\s|0x/g,\"\");d=a.length;a=a+\"00000000\";for(b=0;b<a.length;b+=8)c.push(parseInt(a.substr(b,8),16)^0);return sjcl.bitArray.clamp(c,4*d)}};\nsjcl.codec.base32={B:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\",X:\"0123456789ABCDEFGHIJKLMNOPQRSTUV\",BITS:32,BASE:5,REMAINING:27,fromBits:function(a,b,c){var d=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,f=\"\",g=0,h=sjcl.codec.base32.B,k=0,l=sjcl.bitArray.bitLength(a);c&&(h=sjcl.codec.base32.X);for(c=0;f.length*d<l;)f+=h.charAt((k^a[c]>>>g)>>>e),g<d?(k=a[c]<<d-g,g+=e,c++):(k<<=d,g-=d);for(;f.length&7&&!b;)f+=\"=\";return f},toBits:function(a,b){a=a.replace(/\\s|=/g,\"\").toUpperCase();var c=sjcl.codec.base32.BITS,\nd=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,f=[],g,h=0,k=sjcl.codec.base32.B,l=0,n,m=\"base32\";b&&(k=sjcl.codec.base32.X,m=\"base32hex\");for(g=0;g<a.length;g++){n=k.indexOf(a.charAt(g));if(0>n){if(!b)try{return sjcl.codec.base32hex.toBits(a)}catch(p){}throw new sjcl.exception.invalid(\"this isn't \"+m+\"!\");}h>e?(h-=e,f.push(l^n>>>h),l=n<<c-h):(h+=d,l^=n<<c-h)}h&56&&f.push(sjcl.bitArray.partial(h&56,l,1));return f}};\nsjcl.codec.base32hex={fromBits:function(a,b){return sjcl.codec.base32.fromBits(a,b,1)},toBits:function(a){return sjcl.codec.base32.toBits(a,1)}};\nsjcl.codec.base64={B:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",fromBits:function(a,b,c){var d=\"\",e=0,f=sjcl.codec.base64.B,g=0,h=sjcl.bitArray.bitLength(a);c&&(f=f.substr(0,62)+\"-_\");for(c=0;6*d.length<h;)d+=f.charAt((g^a[c]>>>e)>>>26),6>e?(g=a[c]<<6-e,e+=26,c++):(g<<=6,e-=6);for(;d.length&3&&!b;)d+=\"=\";return d},toBits:function(a,b){a=a.replace(/\\s|=/g,\"\");var c=[],d,e=0,f=sjcl.codec.base64.B,g=0,h;b&&(f=f.substr(0,62)+\"-_\");for(d=0;d<a.length;d++){h=f.indexOf(a.charAt(d));\nif(0>h)throw new sjcl.exception.invalid(\"this isn't base64!\");26<e?(e-=26,c.push(g^h>>>e),g=h<<32-e):(e+=6,g^=h<<32-e)}e&56&&c.push(sjcl.bitArray.partial(e&56,g,1));return c}};sjcl.codec.base64url={fromBits:function(a){return sjcl.codec.base64.fromBits(a,1,1)},toBits:function(a){return sjcl.codec.base64.toBits(a,1)}};sjcl.hash.sha256=function(a){this.b[0]||this.O();a?(this.F=a.F.slice(0),this.A=a.A.slice(0),this.l=a.l):this.reset()};sjcl.hash.sha256.hash=function(a){return(new sjcl.hash.sha256).update(a).finalize()};\nsjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(a){\"string\"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));var b,c=this.A=sjcl.bitArray.concat(this.A,a);b=this.l;a=this.l=b+sjcl.bitArray.bitLength(a);if(0x1fffffffffffff<a)throw new sjcl.exception.invalid(\"Cannot hash more than 2^53 - 1 bits\");if(\"undefined\"!==typeof Uint32Array){var d=new Uint32Array(c),e=0;for(b=512+b-(512+b&0x1ff);b<=a;b+=512)u(this,d.subarray(16*e,\n16*(e+1))),e+=1;c.splice(0,16*e)}else for(b=512+b-(512+b&0x1ff);b<=a;b+=512)u(this,c.splice(0,16));return this},finalize:function(){var a,b=this.A,c=this.F,b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]);for(a=b.length+2;a&15;a++)b.push(0);b.push(Math.floor(this.l/0x100000000));for(b.push(this.l|0);b.length;)u(this,b.splice(0,16));this.reset();return c},Y:[],b:[],O:function(){function a(a){return 0x100000000*(a-Math.floor(a))|0}for(var b=0,c=2,d,e;64>b;c++){e=!0;for(d=2;d*d<=c;d++)if(0===c%d){e=\n!1;break}e&&(8>b&&(this.Y[b]=a(Math.pow(c,.5))),this.b[b]=a(Math.pow(c,1/3)),b++)}}};\nfunction u(a,b){var c,d,e,f=a.F,g=a.b,h=f[0],k=f[1],l=f[2],n=f[3],m=f[4],p=f[5],r=f[6],q=f[7];for(c=0;64>c;c++)16>c?d=b[c]:(d=b[c+1&15],e=b[c+14&15],d=b[c&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+b[c&15]+b[c+9&15]|0),d=d+q+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(r^m&(p^r))+g[c],q=r,r=p,p=m,m=n+d|0,n=l,l=k,k=h,h=d+(k&l^n&(k^l))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;f[0]=f[0]+h|0;f[1]=f[1]+k|0;f[2]=f[2]+l|0;f[3]=f[3]+n|0;f[4]=f[4]+m|0;f[5]=f[5]+p|0;f[6]=f[6]+r|0;f[7]=\nf[7]+q|0}\nsjcl.mode.ccm={name:\"ccm\",G:[],listenProgress:function(a){sjcl.mode.ccm.G.push(a)},unListenProgress:function(a){a=sjcl.mode.ccm.G.indexOf(a);-1<a&&sjcl.mode.ccm.G.splice(a,1)},fa:function(a){var b=sjcl.mode.ccm.G.slice(),c;for(c=0;c<b.length;c+=1)b[c](a)},encrypt:function(a,b,c,d,e){var f,g=b.slice(0),h=sjcl.bitArray,k=h.bitLength(c)/8,l=h.bitLength(g)/8;e=e||64;d=d||[];if(7>k)throw new sjcl.exception.invalid(\"ccm: iv must be at least 7 bytes\");for(f=2;4>f&&l>>>8*f;f++);f<15-k&&(f=15-k);c=h.clamp(c,\n8*(15-f));b=sjcl.mode.ccm.V(a,b,c,d,e,f);g=sjcl.mode.ccm.C(a,g,c,b,e,f);return h.concat(g.data,g.tag)},decrypt:function(a,b,c,d,e){e=e||64;d=d||[];var f=sjcl.bitArray,g=f.bitLength(c)/8,h=f.bitLength(b),k=f.clamp(b,h-e),l=f.bitSlice(b,h-e),h=(h-e)/8;if(7>g)throw new sjcl.exception.invalid(\"ccm: iv must be at least 7 bytes\");for(b=2;4>b&&h>>>8*b;b++);b<15-g&&(b=15-g);c=f.clamp(c,8*(15-b));k=sjcl.mode.ccm.C(a,k,c,l,e,b);a=sjcl.mode.ccm.V(a,k.data,c,d,e,b);if(!f.equal(k.tag,a))throw new sjcl.exception.corrupt(\"ccm: tag doesn't match\");\nreturn k.data},na:function(a,b,c,d,e,f){var g=[],h=sjcl.bitArray,k=h.i;d=[h.partial(8,(b.length?64:0)|d-2<<2|f-1)];d=h.concat(d,c);d[3]|=e;d=a.encrypt(d);if(b.length)for(c=h.bitLength(b)/8,65279>=c?g=[h.partial(16,c)]:0xffffffff>=c&&(g=h.concat([h.partial(16,65534)],[c])),g=h.concat(g,b),b=0;b<g.length;b+=4)d=a.encrypt(k(d,g.slice(b,b+4).concat([0,0,0])));return d},V:function(a,b,c,d,e,f){var g=sjcl.bitArray,h=g.i;e/=8;if(e%2||4>e||16<e)throw new sjcl.exception.invalid(\"ccm: invalid tag length\");\nif(0xffffffff<d.length||0xffffffff<b.length)throw new sjcl.exception.bug(\"ccm: can't deal with 4GiB or more data\");c=sjcl.mode.ccm.na(a,d,c,e,g.bitLength(b)/8,f);for(d=0;d<b.length;d+=4)c=a.encrypt(h(c,b.slice(d,d+4).concat([0,0,0])));return g.clamp(c,8*e)},C:function(a,b,c,d,e,f){var g,h=sjcl.bitArray;g=h.i;var k=b.length,l=h.bitLength(b),n=k/50,m=n;c=h.concat([h.partial(8,f-1)],c).concat([0,0,0]).slice(0,4);d=h.bitSlice(g(d,a.encrypt(c)),0,e);if(!k)return{tag:d,data:[]};for(g=0;g<k;g+=4)g>n&&(sjcl.mode.ccm.fa(g/\nk),n+=m),c[3]++,e=a.encrypt(c),b[g]^=e[0],b[g+1]^=e[1],b[g+2]^=e[2],b[g+3]^=e[3];return{tag:d,data:h.clamp(b,l)}}};\nsjcl.mode.ocb2={name:\"ocb2\",encrypt:function(a,b,c,d,e,f){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid(\"ocb iv must be 128 bits\");var g,h=sjcl.mode.ocb2.S,k=sjcl.bitArray,l=k.i,n=[0,0,0,0];c=h(a.encrypt(c));var m,p=[];d=d||[];e=e||64;for(g=0;g+4<b.length;g+=4)m=b.slice(g,g+4),n=l(n,m),p=p.concat(l(c,a.encrypt(l(c,m)))),c=h(c);m=b.slice(g);b=k.bitLength(m);g=a.encrypt(l(c,[0,0,0,b]));m=k.clamp(l(m.concat([0,0,0]),g),b);n=l(n,l(m.concat([0,0,0]),g));n=a.encrypt(l(n,l(c,h(c))));\nd.length&&(n=l(n,f?d:sjcl.mode.ocb2.pmac(a,d)));return p.concat(k.concat(m,k.clamp(n,e)))},decrypt:function(a,b,c,d,e,f){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid(\"ocb iv must be 128 bits\");e=e||64;var g=sjcl.mode.ocb2.S,h=sjcl.bitArray,k=h.i,l=[0,0,0,0],n=g(a.encrypt(c)),m,p,r=sjcl.bitArray.bitLength(b)-e,q=[];d=d||[];for(c=0;c+4<r/32;c+=4)m=k(n,a.decrypt(k(n,b.slice(c,c+4)))),l=k(l,m),q=q.concat(m),n=g(n);p=r-32*c;m=a.encrypt(k(n,[0,0,0,p]));m=k(m,h.clamp(b.slice(c),p).concat([0,\n0,0]));l=k(l,m);l=a.encrypt(k(l,k(n,g(n))));d.length&&(l=k(l,f?d:sjcl.mode.ocb2.pmac(a,d)));if(!h.equal(h.clamp(l,e),h.bitSlice(b,r)))throw new sjcl.exception.corrupt(\"ocb: tag doesn't match\");return q.concat(h.clamp(m,p))},pmac:function(a,b){var c,d=sjcl.mode.ocb2.S,e=sjcl.bitArray,f=e.i,g=[0,0,0,0],h=a.encrypt([0,0,0,0]),h=f(h,d(d(h)));for(c=0;c+4<b.length;c+=4)h=d(h),g=f(g,a.encrypt(f(h,b.slice(c,c+4))));c=b.slice(c);128>e.bitLength(c)&&(h=f(h,d(h)),c=e.concat(c,[-2147483648,0,0,0]));g=f(g,c);\nreturn a.encrypt(f(d(f(h,d(h))),g))},S:function(a){return[a[0]<<1^a[1]>>>31,a[1]<<1^a[2]>>>31,a[2]<<1^a[3]>>>31,a[3]<<1^135*(a[0]>>>31)]}};\nsjcl.mode.gcm={name:\"gcm\",encrypt:function(a,b,c,d,e){var f=b.slice(0);b=sjcl.bitArray;d=d||[];a=sjcl.mode.gcm.C(!0,a,f,d,c,e||128);return b.concat(a.data,a.tag)},decrypt:function(a,b,c,d,e){var f=b.slice(0),g=sjcl.bitArray,h=g.bitLength(f);e=e||128;d=d||[];e<=h?(b=g.bitSlice(f,h-e),f=g.bitSlice(f,0,h-e)):(b=f,f=[]);a=sjcl.mode.gcm.C(!1,a,f,d,c,e);if(!g.equal(a.tag,b))throw new sjcl.exception.corrupt(\"gcm: tag doesn't match\");return a.data},ka:function(a,b){var c,d,e,f,g,h=sjcl.bitArray.i;e=[0,0,\n0,0];f=b.slice(0);for(c=0;128>c;c++){(d=0!==(a[Math.floor(c/32)]&1<<31-c%32))&&(e=h(e,f));g=0!==(f[3]&1);for(d=3;0<d;d--)f[d]=f[d]>>>1|(f[d-1]&1)<<31;f[0]>>>=1;g&&(f[0]^=-0x1f000000)}return e},j:function(a,b,c){var d,e=c.length;b=b.slice(0);for(d=0;d<e;d+=4)b[0]^=0xffffffff&c[d],b[1]^=0xffffffff&c[d+1],b[2]^=0xffffffff&c[d+2],b[3]^=0xffffffff&c[d+3],b=sjcl.mode.gcm.ka(b,a);return b},C:function(a,b,c,d,e,f){var g,h,k,l,n,m,p,r,q=sjcl.bitArray;m=c.length;p=q.bitLength(c);r=q.bitLength(d);h=q.bitLength(e);\ng=b.encrypt([0,0,0,0]);96===h?(e=e.slice(0),e=q.concat(e,[1])):(e=sjcl.mode.gcm.j(g,[0,0,0,0],e),e=sjcl.mode.gcm.j(g,e,[0,0,Math.floor(h/0x100000000),h&0xffffffff]));h=sjcl.mode.gcm.j(g,[0,0,0,0],d);n=e.slice(0);d=h.slice(0);a||(d=sjcl.mode.gcm.j(g,h,c));for(l=0;l<m;l+=4)n[3]++,k=b.encrypt(n),c[l]^=k[0],c[l+1]^=k[1],c[l+2]^=k[2],c[l+3]^=k[3];c=q.clamp(c,p);a&&(d=sjcl.mode.gcm.j(g,h,c));a=[Math.floor(r/0x100000000),r&0xffffffff,Math.floor(p/0x100000000),p&0xffffffff];d=sjcl.mode.gcm.j(g,d,a);k=b.encrypt(e);\nd[0]^=k[0];d[1]^=k[1];d[2]^=k[2];d[3]^=k[3];return{tag:q.bitSlice(d,0,f),data:c}}};sjcl.misc.hmac=function(a,b){this.W=b=b||sjcl.hash.sha256;var c=[[],[]],d,e=b.prototype.blockSize/32;this.w=[new b,new b];a.length>e&&(a=b.hash(a));for(d=0;d<e;d++)c[0][d]=a[d]^909522486,c[1][d]=a[d]^1549556828;this.w[0].update(c[0]);this.w[1].update(c[1]);this.R=new b(this.w[0])};\nsjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(a){if(this.aa)throw new sjcl.exception.invalid(\"encrypt on already updated hmac called!\");this.update(a);return this.digest(a)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(a){this.aa=!0;this.R.update(a)};sjcl.misc.hmac.prototype.digest=function(){var a=this.R.finalize(),a=(new this.W(this.w[1])).update(a).finalize();this.reset();return a};\nsjcl.misc.pbkdf2=function(a,b,c,d,e){c=c||1E4;if(0>d||0>c)throw new sjcl.exception.invalid(\"invalid params to pbkdf2\");\"string\"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));\"string\"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));e=e||sjcl.misc.hmac;a=new e(a);var f,g,h,k,l=[],n=sjcl.bitArray;for(k=1;32*l.length<(d||1);k++){e=f=a.encrypt(n.concat(b,[k]));for(g=1;g<c;g++)for(f=a.encrypt(f),h=0;h<f.length;h++)e[h]^=f[h];l=l.concat(e)}d&&(l=n.clamp(l,d));return l};\nsjcl.prng=function(a){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=a;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=0x10000;this.T=[0,48,64,96,128,192,0x100,384,512,768,1024];this.da=3E4;this.ba=80};\nsjcl.prng.prototype={randomWords:function(a,b){var c=[],d;d=this.isReady(b);var e;if(d===this.u)throw new sjcl.exception.notReady(\"generator isn't seeded\");if(d&this.J){d=!(d&this.I);e=[];var f=0,g;this.Z=e[0]=(new Date).valueOf()+this.da;for(g=0;16>g;g++)e.push(0x100000000*Math.random()|0);for(g=0;g<this.c.length&&(e=e.concat(this.c[g].finalize()),f+=this.m[g],this.m[g]=0,d||!(this.P&1<<g));g++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=f;f>this.o&&(this.o=\nf);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(e));this.L=new sjcl.cipher.aes(this.b);for(d=0;4>d&&(this.h[d]=this.h[d]+1|0,!this.h[d]);d++);}for(d=0;d<a;d+=4)0===(d+1)%this.ca&&y(this),e=z(this),c.push(e[0],e[1],e[2],e[3]);y(this);return c.slice(0,a)},setDefaultParanoia:function(a,b){if(0===a&&\"Setting paranoia=0 will ruin your security; use it only for testing\"!==b)throw new sjcl.exception.invalid(\"Setting paranoia=0 will ruin your security; use it only for testing\");this.M=a},addEntropy:function(a,\nb,c){c=c||\"user\";var d,e,f=(new Date).valueOf(),g=this.H[c],h=this.isReady(),k=0;d=this.U[c];void 0===d&&(d=this.U[c]=this.ha++);void 0===g&&(g=this.H[c]=0);this.H[c]=(this.H[c]+1)%this.c.length;switch(typeof a){case \"number\":void 0===b&&(b=1);this.c[g].update([d,this.N++,1,b,f,1,a|0]);break;case \"object\":c=Object.prototype.toString.call(a);if(\"[object Uint32Array]\"===c){e=[];for(c=0;c<a.length;c++)e.push(a[c]);a=e}else for(\"[object Array]\"!==c&&(k=1),c=0;c<a.length&&!k;c++)\"number\"!==typeof a[c]&&\n(k=1);if(!k){if(void 0===b)for(c=b=0;c<a.length;c++)for(e=a[c];0<e;)b++,e=e>>>1;this.c[g].update([d,this.N++,2,b,f,a.length].concat(a))}break;case \"string\":void 0===b&&(b=a.length);this.c[g].update([d,this.N++,3,b,f,a.length]);this.c[g].update(a);break;default:k=1}if(k)throw new sjcl.exception.bug(\"random: addEntropy only supports number, array of numbers or string\");this.m[g]+=b;this.f+=b;h===this.u&&(this.isReady()!==this.u&&A(\"seeded\",Math.max(this.o,this.f)),A(\"progress\",this.getProgress()))},\nisReady:function(a){a=this.T[void 0!==a?a:this.M];return this.o&&this.o>=a?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=a?this.J|this.u:this.u},getProgress:function(a){a=this.T[a?a:this.M];return this.o>=a?1:this.f>a?1:this.f/a},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener(\"load\",\nthis.a.loadTimeCollector,!1),window.addEventListener(\"mousemove\",this.a.mouseCollector,!1),window.addEventListener(\"keypress\",this.a.keyboardCollector,!1),window.addEventListener(\"devicemotion\",this.a.accelerometerCollector,!1),window.addEventListener(\"touchmove\",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent(\"onload\",this.a.loadTimeCollector),document.attachEvent(\"onmousemove\",this.a.mouseCollector),document.attachEvent(\"keypress\",this.a.keyboardCollector);else throw new sjcl.exception.bug(\"can't attach event\");\nthis.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener(\"load\",this.a.loadTimeCollector,!1),window.removeEventListener(\"mousemove\",this.a.mouseCollector,!1),window.removeEventListener(\"keypress\",this.a.keyboardCollector,!1),window.removeEventListener(\"devicemotion\",this.a.accelerometerCollector,!1),window.removeEventListener(\"touchmove\",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent(\"onload\",this.a.loadTimeCollector),document.detachEvent(\"onmousemove\",\nthis.a.mouseCollector),document.detachEvent(\"keypress\",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(a,b){this.K[a][this.ga++]=b},removeEventListener:function(a,b){var c,d,e=this.K[a],f=[];for(d in e)e.hasOwnProperty(d)&&e[d]===b&&f.push(d);for(c=0;c<f.length;c++)d=f[c],delete e[d]},la:function(){C(this,1)},oa:function(a){var b,c;try{b=a.x||a.clientX||a.offsetX||0,c=a.y||a.clientY||a.offsetY||0}catch(d){c=b=0}0!=b&&0!=c&&this.addEntropy([b,c],2,\"mouse\");C(this,0)},qa:function(a){a=\na.touches[0]||a.changedTouches[0];this.addEntropy([a.pageX||a.clientX,a.pageY||a.clientY],1,\"touch\");C(this,0)},ma:function(){C(this,2)},ea:function(a){a=a.accelerationIncludingGravity.x||a.accelerationIncludingGravity.y||a.accelerationIncludingGravity.z;if(window.orientation){var b=window.orientation;\"number\"===typeof b&&this.addEntropy(b,1,\"accelerometer\")}a&&this.addEntropy(a,2,\"accelerometer\");C(this,0)}};\nfunction A(a,b){var c,d=sjcl.random.K[a],e=[];for(c in d)d.hasOwnProperty(c)&&e.push(d[c]);for(c=0;c<e.length;c++)e[c](b)}function C(a,b){\"undefined\"!==typeof window&&window.performance&&\"function\"===typeof window.performance.now?a.addEntropy(window.performance.now(),b,\"loadtime\"):a.addEntropy((new Date).valueOf(),b,\"loadtime\")}function y(a){a.b=z(a).concat(z(a));a.L=new sjcl.cipher.aes(a.b)}function z(a){for(var b=0;4>b&&(a.h[b]=a.h[b]+1|0,!a.h[b]);b++);return a.L.encrypt(a.h)}\nfunction B(a,b){return function(){b.apply(a,arguments)}}sjcl.random=new sjcl.prng(6);\na:try{var D,E,F,G;if(G=\"undefined\"!==typeof module&&module.exports){var H;try{H=require(\"crypto\")}catch(a){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,\"crypto['randomBytes']\");else if(\"undefined\"!==typeof window&&\"undefined\"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);\nelse break a;sjcl.random.addEntropy(F,1024,\"crypto['getRandomValues']\")}}catch(a){\"undefined\"!==typeof window&&window.console&&(console.log(\"There was an error collecting entropy from the browser:\"),console.log(a))}\nsjcl.json={defaults:{v:1,iter:1E4,ks:128,ts:64,mode:\"ccm\",adata:\"\",cipher:\"aes\"},ja:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json,f=e.g({iv:sjcl.random.randomWords(4,0)},e.defaults),g;e.g(f,c);c=f.adata;\"string\"===typeof f.salt&&(f.salt=sjcl.codec.base64.toBits(f.salt));\"string\"===typeof f.iv&&(f.iv=sjcl.codec.base64.toBits(f.iv));if(!sjcl.mode[f.mode]||!sjcl.cipher[f.cipher]||\"string\"===typeof a&&100>=f.iter||64!==f.ts&&96!==f.ts&&128!==f.ts||128!==f.ks&&192!==f.ks&&0x100!==f.ks||2>f.iv.length||\n4<f.iv.length)throw new sjcl.exception.invalid(\"json encrypt: invalid parameters\");\"string\"===typeof a?(g=sjcl.misc.cachedPbkdf2(a,f),a=g.key.slice(0,f.ks/32),f.salt=g.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.publicKey&&(g=a.kem(),f.kemtag=g.tag,a=g.key.slice(0,f.ks/32));\"string\"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));\"string\"===typeof c&&(f.adata=c=sjcl.codec.utf8String.toBits(c));g=new sjcl.cipher[f.cipher](a);e.g(d,f);d.key=a;f.ct=\"ccm\"===f.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&\nb instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(g,b,f.iv,c,f.ts):sjcl.mode[f.mode].encrypt(g,b,f.iv,c,f.ts);return f},encrypt:function(a,b,c,d){var e=sjcl.json,f=e.ja.apply(e,arguments);return e.encode(f)},ia:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json;b=e.g(e.g(e.g({},e.defaults),b),c,!0);var f,g;f=b.adata;\"string\"===typeof b.salt&&(b.salt=sjcl.codec.base64.toBits(b.salt));\"string\"===typeof b.iv&&(b.iv=sjcl.codec.base64.toBits(b.iv));if(!sjcl.mode[b.mode]||!sjcl.cipher[b.cipher]||\"string\"===\ntypeof a&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&0x100!==b.ks||!b.iv||2>b.iv.length||4<b.iv.length)throw new sjcl.exception.invalid(\"json decrypt: invalid parameters\");\"string\"===typeof a?(g=sjcl.misc.cachedPbkdf2(a,b),a=g.key.slice(0,b.ks/32),b.salt=g.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.secretKey&&(a=a.unkem(sjcl.codec.base64.toBits(b.kemtag)).slice(0,b.ks/32));\"string\"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));g=new sjcl.cipher[b.cipher](a);f=\"ccm\"===\nb.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&b.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(g,b.ct,b.iv,b.tag,f,b.ts):sjcl.mode[b.mode].decrypt(g,b.ct,b.iv,f,b.ts);e.g(d,b);d.key=a;return 1===c.raw?f:sjcl.codec.utf8String.fromBits(f)},decrypt:function(a,b,c,d){var e=sjcl.json;return e.ia(a,e.decode(b),c,d)},encode:function(a){var b,c=\"{\",d=\"\";for(b in a)if(a.hasOwnProperty(b)){if(!b.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid(\"json encode: invalid property name\");c+=d+'\"'+\nb+'\":';d=\",\";switch(typeof a[b]){case \"number\":case \"boolean\":c+=a[b];break;case \"string\":c+='\"'+escape(a[b])+'\"';break;case \"object\":c+='\"'+sjcl.codec.base64.fromBits(a[b],0)+'\"';break;default:throw new sjcl.exception.bug(\"json encode: unsupported type\");}}return c+\"}\"},decode:function(a){a=a.replace(/\\s/g,\"\");if(!a.match(/^\\{.*\\}$/))throw new sjcl.exception.invalid(\"json decode: this isn't json!\");a=a.replace(/^\\{|\\}$/g,\"\").split(/,/);var b={},c,d;for(c=0;c<a.length;c++){if(!(d=a[c].match(/^\\s*(?:([\"']?)([a-z][a-z0-9]*)\\1)\\s*:\\s*(?:(-?\\d+)|\"([a-z0-9+\\/%*_.@=\\-]*)\"|(true|false))$/i)))throw new sjcl.exception.invalid(\"json decode: this isn't json!\");\nnull!=d[3]?b[d[2]]=parseInt(d[3],10):null!=d[4]?b[d[2]]=d[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(d[4]):unescape(d[4]):null!=d[5]&&(b[d[2]]=\"true\"===d[5])}return b},g:function(a,b,c){void 0===a&&(a={});if(void 0===b)return a;for(var d in b)if(b.hasOwnProperty(d)){if(c&&void 0!==a[d]&&a[d]!==b[d])throw new sjcl.exception.invalid(\"required parameter overridden\");a[d]=b[d]}return a},sa:function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&a[d]!==b[d]&&(c[d]=a[d]);return c},ra:function(a,\nb){var c={},d;for(d=0;d<b.length;d++)void 0!==a[b[d]]&&(c[b[d]]=a[b[d]]);return c}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(a,b){var c=sjcl.misc.pa,d;b=b||{};d=b.iter||1E3;c=c[a]=c[a]||{};d=c[d]=c[d]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):sjcl.random.randomWords(2,0)};c=void 0===b.salt?d.firstSalt:b.salt;d[c]=d[c]||sjcl.misc.pbkdf2(a,c,b.iter);return{key:d[c].slice(0),salt:c.slice(0)}};\n","/*\n A JavaScript implementation of the SHA family of hashes, as\n defined in FIPS PUB 180-4 and FIPS PUB 202, as well as the corresponding\n HMAC implementation as defined in FIPS PUB 198a\n\n Copyright Brian Turek 2008-2016\n Distributed under the BSD License\n See http://caligatio.github.com/jsSHA/ for more information\n\n Several functions taken from Paul Johnston\n*/\n'use strict';(function(X){function C(f,b,c){var d=0,a=[],k=0,g,e,n,h,m,r,t,q,v=!1,u=[],w=[],x,y=!1,z=!1;c=c||{};g=c.encoding||\"UTF8\";x=c.numRounds||1;n=J(b,g);if(x!==parseInt(x,10)||1>x)throw Error(\"numRounds must a integer >= 1\");if(\"SHA-1\"===f)m=512,r=K,t=Y,h=160,q=function(b){return b.slice()};else if(0===f.lastIndexOf(\"SHA-\",0))if(r=function(b,d){return L(b,d,f)},t=function(b,d,c,a){var l,k;if(\"SHA-224\"===f||\"SHA-256\"===f)l=(d+65>>>9<<4)+15,k=16;else if(\"SHA-384\"===f||\"SHA-512\"===f)l=(d+129>>>\n10<<5)+31,k=32;else throw Error(\"Unexpected error in SHA-2 implementation\");for(;b.length<=l;)b.push(0);b[d>>>5]|=128<<24-d%32;d=d+c;b[l]=d&4294967295;b[l-1]=d/4294967296|0;c=b.length;for(d=0;d<c;d+=k)a=L(b.slice(d,d+k),a,f);if(\"SHA-224\"===f)b=[a[0],a[1],a[2],a[3],a[4],a[5],a[6]];else if(\"SHA-256\"===f)b=a;else if(\"SHA-384\"===f)b=[a[0].a,a[0].b,a[1].a,a[1].b,a[2].a,a[2].b,a[3].a,a[3].b,a[4].a,a[4].b,a[5].a,a[5].b];else if(\"SHA-512\"===f)b=[a[0].a,a[0].b,a[1].a,a[1].b,a[2].a,a[2].b,a[3].a,a[3].b,a[4].a,\na[4].b,a[5].a,a[5].b,a[6].a,a[6].b,a[7].a,a[7].b];else throw Error(\"Unexpected error in SHA-2 implementation\");return b},q=function(b){return b.slice()},\"SHA-224\"===f)m=512,h=224;else if(\"SHA-256\"===f)m=512,h=256;else if(\"SHA-384\"===f)m=1024,h=384;else if(\"SHA-512\"===f)m=1024,h=512;else throw Error(\"Chosen SHA variant is not supported\");else if(0===f.lastIndexOf(\"SHA3-\",0)||0===f.lastIndexOf(\"SHAKE\",0)){var F=6;r=D;q=function(b){var f=[],a;for(a=0;5>a;a+=1)f[a]=b[a].slice();return f};if(\"SHA3-224\"===\nf)m=1152,h=224;else if(\"SHA3-256\"===f)m=1088,h=256;else if(\"SHA3-384\"===f)m=832,h=384;else if(\"SHA3-512\"===f)m=576,h=512;else if(\"SHAKE128\"===f)m=1344,h=-1,F=31,z=!0;else if(\"SHAKE256\"===f)m=1088,h=-1,F=31,z=!0;else throw Error(\"Chosen SHA variant is not supported\");t=function(b,f,a,d,c){a=m;var l=F,k,g=[],e=a>>>5,h=0,p=f>>>5;for(k=0;k<p&&f>=a;k+=e)d=D(b.slice(k,k+e),d),f-=a;b=b.slice(k);for(f%=a;b.length<e;)b.push(0);k=f>>>3;b[k>>2]^=l<<24-k%4*8;b[e-1]^=128;for(d=D(b,d);32*g.length<c;){b=d[h%5][h/\n5|0];g.push((b.b&255)<<24|(b.b&65280)<<8|(b.b&16711680)>>8|b.b>>>24);if(32*g.length>=c)break;g.push((b.a&255)<<24|(b.a&65280)<<8|(b.a&16711680)>>8|b.a>>>24);h+=1;0===64*h%a&&D(null,d)}return g}}else throw Error(\"Chosen SHA variant is not supported\");e=B(f);this.setHMACKey=function(b,a,c){var l;if(!0===v)throw Error(\"HMAC key already set\");if(!0===y)throw Error(\"Cannot set HMAC key after calling update\");if(!0===z)throw Error(\"SHAKE is not supported for HMAC\");g=(c||{}).encoding||\"UTF8\";a=J(a,g)(b);\nb=a.binLen;a=a.value;l=m>>>3;c=l/4-1;if(l<b/8){for(a=t(a,b,0,B(f),h);a.length<=c;)a.push(0);a[c]&=4294967040}else if(l>b/8){for(;a.length<=c;)a.push(0);a[c]&=4294967040}for(b=0;b<=c;b+=1)u[b]=a[b]^909522486,w[b]=a[b]^1549556828;e=r(u,e);d=m;v=!0};this.update=function(b){var f,c,g,h=0,q=m>>>5;f=n(b,a,k);b=f.binLen;c=f.value;f=b>>>5;for(g=0;g<f;g+=q)h+m<=b&&(e=r(c.slice(g,g+q),e),h+=m);d+=h;a=c.slice(h>>>5);k=b%m;y=!0};this.getHash=function(b,c){var g,m,n,r;if(!0===v)throw Error(\"Cannot call getHash after setting HMAC key\");\nn=M(c);if(!0===z){if(-1===n.shakeLen)throw Error(\"shakeLen must be specified in options\");h=n.shakeLen}switch(b){case \"HEX\":g=function(b){return N(b,h,n)};break;case \"B64\":g=function(b){return O(b,h,n)};break;case \"BYTES\":g=function(b){return P(b,h)};break;case \"ARRAYBUFFER\":try{m=new ArrayBuffer(0)}catch(sa){throw Error(\"ARRAYBUFFER not supported by this environment\");}g=function(b){return Q(b,h)};break;default:throw Error(\"format must be HEX, B64, BYTES, or ARRAYBUFFER\");}r=t(a.slice(),k,d,q(e),\nh);for(m=1;m<x;m+=1)!0===z&&0!==h%32&&(r[r.length-1]&=4294967040<<24-h%32),r=t(r,h,0,B(f),h);return g(r)};this.getHMAC=function(b,c){var g,n,u,x;if(!1===v)throw Error(\"Cannot call getHMAC without first setting HMAC key\");u=M(c);switch(b){case \"HEX\":g=function(b){return N(b,h,u)};break;case \"B64\":g=function(b){return O(b,h,u)};break;case \"BYTES\":g=function(b){return P(b,h)};break;case \"ARRAYBUFFER\":try{g=new ArrayBuffer(0)}catch(z){throw Error(\"ARRAYBUFFER not supported by this environment\");}g=function(b){return Q(b,\nh)};break;default:throw Error(\"outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER\");}n=t(a.slice(),k,d,q(e),h);x=r(w,B(f));x=t(n,h,m,x,h);return g(x)}}function a(f,b){this.a=f;this.b=b}function Z(f,b,a){var d=f.length,l,k,g,e,n;b=b||[0];a=a||0;n=a>>>3;if(0!==d%2)throw Error(\"String of HEX type must be in byte increments\");for(l=0;l<d;l+=2){k=parseInt(f.substr(l,2),16);if(isNaN(k))throw Error(\"String of HEX type contains invalid characters\");e=(l>>>1)+n;for(g=e>>>2;b.length<=g;)b.push(0);b[g]|=k<<\n8*(3-e%4)}return{value:b,binLen:4*d+a}}function aa(f,b,a){var d=[],l,k,g,e,d=b||[0];a=a||0;k=a>>>3;for(l=0;l<f.length;l+=1)b=f.charCodeAt(l),e=l+k,g=e>>>2,d.length<=g&&d.push(0),d[g]|=b<<8*(3-e%4);return{value:d,binLen:8*f.length+a}}function ba(f,b,a){var d=[],l=0,k,g,e,n,h,m,d=b||[0];a=a||0;b=a>>>3;if(-1===f.search(/^[a-zA-Z0-9=+\\/]+$/))throw Error(\"Invalid character in base-64 string\");g=f.indexOf(\"=\");f=f.replace(/\\=/g,\"\");if(-1!==g&&g<f.length)throw Error(\"Invalid '=' found in base-64 string\");\nfor(g=0;g<f.length;g+=4){h=f.substr(g,4);for(e=n=0;e<h.length;e+=1)k=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".indexOf(h[e]),n|=k<<18-6*e;for(e=0;e<h.length-1;e+=1){m=l+b;for(k=m>>>2;d.length<=k;)d.push(0);d[k]|=(n>>>16-8*e&255)<<8*(3-m%4);l+=1}}return{value:d,binLen:8*l+a}}function ca(a,b,c){var d=[],l,k,g,d=b||[0];c=c||0;l=c>>>3;for(b=0;b<a.byteLength;b+=1)g=b+l,k=g>>>2,d.length<=k&&d.push(0),d[k]|=a[b]<<8*(3-g%4);return{value:d,binLen:8*a.byteLength+c}}function N(a,b,c){var d=\n\"\";b/=8;var l,k;for(l=0;l<b;l+=1)k=a[l>>>2]>>>8*(3-l%4),d+=\"0123456789abcdef\".charAt(k>>>4&15)+\"0123456789abcdef\".charAt(k&15);return c.outputUpper?d.toUpperCase():d}function O(a,b,c){var d=\"\",l=b/8,k,g,e;for(k=0;k<l;k+=3)for(g=k+1<l?a[k+1>>>2]:0,e=k+2<l?a[k+2>>>2]:0,e=(a[k>>>2]>>>8*(3-k%4)&255)<<16|(g>>>8*(3-(k+1)%4)&255)<<8|e>>>8*(3-(k+2)%4)&255,g=0;4>g;g+=1)8*k+6*g<=b?d+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charAt(e>>>6*(3-g)&63):d+=c.b64Pad;return d}function P(a,\nb){var c=\"\",d=b/8,l,k;for(l=0;l<d;l+=1)k=a[l>>>2]>>>8*(3-l%4)&255,c+=String.fromCharCode(k);return c}function Q(a,b){var c=b/8,d,l=new ArrayBuffer(c);for(d=0;d<c;d+=1)l[d]=a[d>>>2]>>>8*(3-d%4)&255;return l}function M(a){var b={outputUpper:!1,b64Pad:\"=\",shakeLen:-1};a=a||{};b.outputUpper=a.outputUpper||!1;!0===a.hasOwnProperty(\"b64Pad\")&&(b.b64Pad=a.b64Pad);if(!0===a.hasOwnProperty(\"shakeLen\")){if(0!==a.shakeLen%8)throw Error(\"shakeLen must be a multiple of 8\");b.shakeLen=a.shakeLen}if(\"boolean\"!==\ntypeof b.outputUpper)throw Error(\"Invalid outputUpper formatting option\");if(\"string\"!==typeof b.b64Pad)throw Error(\"Invalid b64Pad formatting option\");return b}function J(a,b){var c;switch(b){case \"UTF8\":case \"UTF16BE\":case \"UTF16LE\":break;default:throw Error(\"encoding must be UTF8, UTF16BE, or UTF16LE\");}switch(a){case \"HEX\":c=Z;break;case \"TEXT\":c=function(a,f,c){var e=[],p=[],n=0,h,m,r,t,q,e=f||[0];f=c||0;r=f>>>3;if(\"UTF8\"===b)for(h=0;h<a.length;h+=1)for(c=a.charCodeAt(h),p=[],128>c?p.push(c):\n2048>c?(p.push(192|c>>>6),p.push(128|c&63)):55296>c||57344<=c?p.push(224|c>>>12,128|c>>>6&63,128|c&63):(h+=1,c=65536+((c&1023)<<10|a.charCodeAt(h)&1023),p.push(240|c>>>18,128|c>>>12&63,128|c>>>6&63,128|c&63)),m=0;m<p.length;m+=1){q=n+r;for(t=q>>>2;e.length<=t;)e.push(0);e[t]|=p[m]<<8*(3-q%4);n+=1}else if(\"UTF16BE\"===b||\"UTF16LE\"===b)for(h=0;h<a.length;h+=1){c=a.charCodeAt(h);\"UTF16LE\"===b&&(m=c&255,c=m<<8|c>>>8);q=n+r;for(t=q>>>2;e.length<=t;)e.push(0);e[t]|=c<<8*(2-q%4);n+=2}return{value:e,binLen:8*\nn+f}};break;case \"B64\":c=ba;break;case \"BYTES\":c=aa;break;case \"ARRAYBUFFER\":try{c=new ArrayBuffer(0)}catch(d){throw Error(\"ARRAYBUFFER not supported by this environment\");}c=ca;break;default:throw Error(\"format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER\");}return c}function y(a,b){return a<<b|a>>>32-b}function R(f,b){return 32<b?(b=b-32,new a(f.b<<b|f.a>>>32-b,f.a<<b|f.b>>>32-b)):0!==b?new a(f.a<<b|f.b>>>32-b,f.b<<b|f.a>>>32-b):f}function v(a,b){return a>>>b|a<<32-b}function w(f,b){var c=null,\nc=new a(f.a,f.b);return c=32>=b?new a(c.a>>>b|c.b<<32-b&4294967295,c.b>>>b|c.a<<32-b&4294967295):new a(c.b>>>b-32|c.a<<64-b&4294967295,c.a>>>b-32|c.b<<64-b&4294967295)}function S(f,b){var c=null;return c=32>=b?new a(f.a>>>b,f.b>>>b|f.a<<32-b&4294967295):new a(0,f.a>>>b-32)}function da(a,b,c){return a&b^~a&c}function ea(f,b,c){return new a(f.a&b.a^~f.a&c.a,f.b&b.b^~f.b&c.b)}function T(a,b,c){return a&b^a&c^b&c}function fa(f,b,c){return new a(f.a&b.a^f.a&c.a^b.a&c.a,f.b&b.b^f.b&c.b^b.b&c.b)}function ga(a){return v(a,\n2)^v(a,13)^v(a,22)}function ha(f){var b=w(f,28),c=w(f,34);f=w(f,39);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function ia(a){return v(a,6)^v(a,11)^v(a,25)}function ja(f){var b=w(f,14),c=w(f,18);f=w(f,41);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function ka(a){return v(a,7)^v(a,18)^a>>>3}function la(f){var b=w(f,1),c=w(f,8);f=S(f,7);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function ma(a){return v(a,17)^v(a,19)^a>>>10}function na(f){var b=w(f,19),c=w(f,61);f=S(f,6);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function G(a,\nb){var c=(a&65535)+(b&65535);return((a>>>16)+(b>>>16)+(c>>>16)&65535)<<16|c&65535}function oa(a,b,c,d){var l=(a&65535)+(b&65535)+(c&65535)+(d&65535);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(l>>>16)&65535)<<16|l&65535}function H(a,b,c,d,l){var e=(a&65535)+(b&65535)+(c&65535)+(d&65535)+(l&65535);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(l>>>16)+(e>>>16)&65535)<<16|e&65535}function pa(f,b){var c,d,l;c=(f.b&65535)+(b.b&65535);d=(f.b>>>16)+(b.b>>>16)+(c>>>16);l=(d&65535)<<16|c&65535;c=(f.a&65535)+\n(b.a&65535)+(d>>>16);d=(f.a>>>16)+(b.a>>>16)+(c>>>16);return new a((d&65535)<<16|c&65535,l)}function qa(f,b,c,d){var l,e,g;l=(f.b&65535)+(b.b&65535)+(c.b&65535)+(d.b&65535);e=(f.b>>>16)+(b.b>>>16)+(c.b>>>16)+(d.b>>>16)+(l>>>16);g=(e&65535)<<16|l&65535;l=(f.a&65535)+(b.a&65535)+(c.a&65535)+(d.a&65535)+(e>>>16);e=(f.a>>>16)+(b.a>>>16)+(c.a>>>16)+(d.a>>>16)+(l>>>16);return new a((e&65535)<<16|l&65535,g)}function ra(f,b,c,d,l){var e,g,p;e=(f.b&65535)+(b.b&65535)+(c.b&65535)+(d.b&65535)+(l.b&65535);g=\n(f.b>>>16)+(b.b>>>16)+(c.b>>>16)+(d.b>>>16)+(l.b>>>16)+(e>>>16);p=(g&65535)<<16|e&65535;e=(f.a&65535)+(b.a&65535)+(c.a&65535)+(d.a&65535)+(l.a&65535)+(g>>>16);g=(f.a>>>16)+(b.a>>>16)+(c.a>>>16)+(d.a>>>16)+(l.a>>>16)+(e>>>16);return new a((g&65535)<<16|e&65535,p)}function A(f){var b=0,c=0,d;for(d=0;d<arguments.length;d+=1)b^=arguments[d].b,c^=arguments[d].a;return new a(c,b)}function B(f){var b=[],c;if(\"SHA-1\"===f)b=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===f.lastIndexOf(\"SHA-\",\n0))switch(b=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],f){case \"SHA-224\":break;case \"SHA-256\":b=c;break;case \"SHA-384\":b=[new a(3418070365,b[0]),new a(1654270250,b[1]),new a(2438529370,b[2]),new a(355462360,b[3]),new a(1731405415,b[4]),new a(41048885895,b[5]),new a(3675008525,b[6]),new a(1203062813,b[7])];break;case \"SHA-512\":b=[new a(c[0],4089235720),new a(c[1],\n2227873595),new a(c[2],4271175723),new a(c[3],1595750129),new a(c[4],2917565137),new a(c[5],725511199),new a(c[6],4215389547),new a(c[7],327033209)];break;default:throw Error(\"Unknown SHA variant\");}else if(0===f.lastIndexOf(\"SHA3-\",0)||0===f.lastIndexOf(\"SHAKE\",0))for(f=0;5>f;f+=1)b[f]=[new a(0,0),new a(0,0),new a(0,0),new a(0,0),new a(0,0)];else throw Error(\"No SHA variants supported\");return b}function K(a,b){var c=[],d,e,k,g,p,n,h;d=b[0];e=b[1];k=b[2];g=b[3];p=b[4];for(h=0;80>h;h+=1)c[h]=16>h?\na[h]:y(c[h-3]^c[h-8]^c[h-14]^c[h-16],1),n=20>h?H(y(d,5),e&k^~e&g,p,1518500249,c[h]):40>h?H(y(d,5),e^k^g,p,1859775393,c[h]):60>h?H(y(d,5),T(e,k,g),p,2400959708,c[h]):H(y(d,5),e^k^g,p,3395469782,c[h]),p=g,g=k,k=y(e,30),e=d,d=n;b[0]=G(d,b[0]);b[1]=G(e,b[1]);b[2]=G(k,b[2]);b[3]=G(g,b[3]);b[4]=G(p,b[4]);return b}function Y(a,b,c,d){var e;for(e=(b+65>>>9<<4)+15;a.length<=e;)a.push(0);a[b>>>5]|=128<<24-b%32;b+=c;a[e]=b&4294967295;a[e-1]=b/4294967296|0;b=a.length;for(e=0;e<b;e+=16)d=K(a.slice(e,e+16),d);\nreturn d}function L(f,b,c){var d,l,k,g,p,n,h,m,r,t,q,v,u,w,x,y,z,F,A,B,C,D,E=[],I;if(\"SHA-224\"===c||\"SHA-256\"===c)t=64,v=1,D=Number,u=G,w=oa,x=H,y=ka,z=ma,F=ga,A=ia,C=T,B=da,I=e;else if(\"SHA-384\"===c||\"SHA-512\"===c)t=80,v=2,D=a,u=pa,w=qa,x=ra,y=la,z=na,F=ha,A=ja,C=fa,B=ea,I=U;else throw Error(\"Unexpected error in SHA-2 implementation\");c=b[0];d=b[1];l=b[2];k=b[3];g=b[4];p=b[5];n=b[6];h=b[7];for(q=0;q<t;q+=1)16>q?(r=q*v,m=f.length<=r?0:f[r],r=f.length<=r+1?0:f[r+1],E[q]=new D(m,r)):E[q]=w(z(E[q-2]),\nE[q-7],y(E[q-15]),E[q-16]),m=x(h,A(g),B(g,p,n),I[q],E[q]),r=u(F(c),C(c,d,l)),h=n,n=p,p=g,g=u(k,m),k=l,l=d,d=c,c=u(m,r);b[0]=u(c,b[0]);b[1]=u(d,b[1]);b[2]=u(l,b[2]);b[3]=u(k,b[3]);b[4]=u(g,b[4]);b[5]=u(p,b[5]);b[6]=u(n,b[6]);b[7]=u(h,b[7]);return b}function D(f,b){var c,d,e,k,g=[],p=[];if(null!==f)for(d=0;d<f.length;d+=2)b[(d>>>1)%5][(d>>>1)/5|0]=A(b[(d>>>1)%5][(d>>>1)/5|0],new a((f[d+1]&255)<<24|(f[d+1]&65280)<<8|(f[d+1]&16711680)>>>8|f[d+1]>>>24,(f[d]&255)<<24|(f[d]&65280)<<8|(f[d]&16711680)>>>8|\nf[d]>>>24));for(c=0;24>c;c+=1){k=B(\"SHA3-\");for(d=0;5>d;d+=1)g[d]=A(b[d][0],b[d][1],b[d][2],b[d][3],b[d][4]);for(d=0;5>d;d+=1)p[d]=A(g[(d+4)%5],R(g[(d+1)%5],1));for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)b[d][e]=A(b[d][e],p[d]);for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)k[e][(2*d+3*e)%5]=R(b[d][e],V[d][e]);for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)b[d][e]=A(k[d][e],new a(~k[(d+1)%5][e].a&k[(d+2)%5][e].a,~k[(d+1)%5][e].b&k[(d+2)%5][e].b));b[0][0]=A(b[0][0],W[c])}return b}var e,U,V,W;e=[1116352408,1899447441,3049323471,3921009573,\n961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,\n883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];U=[new a(e[0],3609767458),new a(e[1],602891725),new a(e[2],3964484399),new a(e[3],2173295548),new a(e[4],4081628472),new a(e[5],3053834265),new a(e[6],2937671579),new a(e[7],3664609560),new a(e[8],2734883394),new a(e[9],1164996542),new a(e[10],1323610764),new a(e[11],3590304994),new a(e[12],4068182383),new a(e[13],991336113),new a(e[14],633803317),new a(e[15],\n3479774868),new a(e[16],2666613458),new a(e[17],944711139),new a(e[18],2341262773),new a(e[19],2007800933),new a(e[20],1495990901),new a(e[21],1856431235),new a(e[22],3175218132),new a(e[23],2198950837),new a(e[24],3999719339),new a(e[25],766784016),new a(e[26],2566594879),new a(e[27],3203337956),new a(e[28],1034457026),new a(e[29],2466948901),new a(e[30],3758326383),new a(e[31],168717936),new a(e[32],1188179964),new a(e[33],1546045734),new a(e[34],1522805485),new a(e[35],2643833823),new a(e[36],\n2343527390),new a(e[37],1014477480),new a(e[38],1206759142),new a(e[39],344077627),new a(e[40],1290863460),new a(e[41],3158454273),new a(e[42],3505952657),new a(e[43],106217008),new a(e[44],3606008344),new a(e[45],1432725776),new a(e[46],1467031594),new a(e[47],851169720),new a(e[48],3100823752),new a(e[49],1363258195),new a(e[50],3750685593),new a(e[51],3785050280),new a(e[52],3318307427),new a(e[53],3812723403),new a(e[54],2003034995),new a(e[55],3602036899),new a(e[56],1575990012),new a(e[57],\n1125592928),new a(e[58],2716904306),new a(e[59],442776044),new a(e[60],593698344),new a(e[61],3733110249),new a(e[62],2999351573),new a(e[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,\n3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)];W=[new a(0,1),new a(0,32898),new a(2147483648,32906),new a(2147483648,2147516416),new a(0,32907),new a(0,2147483649),new a(2147483648,2147516545),new a(2147483648,32777),new a(0,138),new a(0,136),new a(0,2147516425),new a(0,2147483658),new a(0,2147516555),new a(2147483648,139),new a(2147483648,32905),new a(2147483648,32771),new a(2147483648,32770),new a(2147483648,128),new a(0,32778),new a(2147483648,\n2147483658),new a(2147483648,2147516545),new a(2147483648,32896),new a(0,2147483649),new a(2147483648,2147516424)];V=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];\"function\"===typeof define&&define.amd?define(function(){return C}):\"undefined\"!==typeof exports?(\"undefined\"!==typeof module&&module.exports&&(module.exports=C),exports=C):X.jsSHA=C})(this);\n"],"sourceRoot":"webpack:///"}